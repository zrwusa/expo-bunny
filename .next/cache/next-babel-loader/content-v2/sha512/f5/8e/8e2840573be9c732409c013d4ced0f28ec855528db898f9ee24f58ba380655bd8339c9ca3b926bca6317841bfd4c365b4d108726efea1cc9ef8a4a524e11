{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{useBunnyKit}from\"../../hooks/bunny-kit\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import React,{useEffect,useRef,useState}from'react';import{useKeyboardHeight}from\"../../hooks/keyboard-height\";import{useFirebase}from'react-redux-firebase';import{makeStyles}from\"./styles\";import{CachedImage}from\"../CachedImage\";export var StickerPicker=function StickerPicker(_ref){var _ref$isShow=_ref.isShow,isShow=_ref$isShow===void 0?false:_ref$isShow,onValueChanged=_ref.onValueChanged,_ref$quality=_ref.quality,quality=_ref$quality===void 0?'MEDIUM':_ref$quality;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor;var _useKeyboardHeight=useKeyboardHeight(),currentHeight=_useKeyboardHeight.currentHeight;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),stickers=_useState2[0],setStickers=_useState2[1];var firebase=useFirebase();var styles=makeStyles(sizeLabor,themeLabor);var isMounted=useRef(false);var qualityMap={LOW:'ShaunTheSheep128/',MEDIUM:'ShaunTheSheep256/',HIGH:'ShaunTheSheep/'};var shaunTheSheepRef=firebase.storage().ref(qualityMap[quality]);useEffect(function(){isMounted.current=true;(function _callee2(){var allStickerRef,stickers;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(shaunTheSheepRef.listAll());case 2:allStickerRef=_context2.sent;_context2.next=5;return _regeneratorRuntime.awrap(Promise.all(allStickerRef.items.map(function _callee(stickerRef){var url;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(stickerRef.getDownloadURL());case 2:url=_context.sent;return _context.abrupt(\"return\",{id:stickerRef.fullPath,url:url});case 4:case\"end\":return _context.stop();}}},null,null,null,Promise);})));case 5:stickers=_context2.sent;isMounted.current&&setStickers(stickers);case 7:case\"end\":return _context2.stop();}}},null,null,null,Promise);})();return function(){isMounted.current=false;};},[]);return isShow?React.createElement(View,{style:{height:currentHeight||346}},React.createElement(ScrollView,{contentContainerStyle:styles.panel},stickers.map(function(sticker){return React.createElement(View,{key:sticker.id},React.createElement(TouchableOpacity,{onPress:function _callee3(){return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:onValueChanged&&onValueChanged(sticker.url);case 1:case\"end\":return _context3.stop();}}},null,null,null,Promise);}},React.createElement(CachedImage,{style:styles.stickerImage,source:{uri:sticker.url}})));}))):null;};","map":null,"metadata":{},"sourceType":"module"}