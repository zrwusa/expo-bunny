{"ast":null,"code":"\"use strict\";var _interopRequireDefault2=require(\"@babel/runtime/helpers/interopRequireDefault\");var _defineProperty2=_interopRequireDefault2(require(\"@babel/runtime/helpers/defineProperty\"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}exports.__esModule=true;exports.noSSR=noSSR;exports.default=dynamic;var _react=_interopRequireDefault(require(\"react\"));var _loadable=_interopRequireDefault(require(\"./loadable\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var isServerSide=false;function noSSR(LoadableInitializer,loadableOptions){delete loadableOptions.webpack;delete loadableOptions.modules;if(!isServerSide){return LoadableInitializer(loadableOptions);}var Loading=loadableOptions.loading;return function(){return _react.default.createElement(Loading,{error:null,isLoading:true,pastDelay:false,timedOut:false});};}function dynamic(dynamicOptions,options){var loadableFn=_loadable.default;var loadableOptions={loading:function loading(_ref){var error=_ref.error,isLoading=_ref.isLoading,pastDelay=_ref.pastDelay;if(!pastDelay)return null;if(true){if(isLoading){return null;}if(error){return _react.default.createElement(\"p\",null,error.message,_react.default.createElement(\"br\",null),error.stack);}}return null;}};if(dynamicOptions instanceof Promise){loadableOptions.loader=function(){return dynamicOptions;};}else if(typeof dynamicOptions==='function'){loadableOptions.loader=dynamicOptions;}else if(typeof dynamicOptions==='object'){loadableOptions=_objectSpread(_objectSpread({},loadableOptions),dynamicOptions);}loadableOptions=_objectSpread(_objectSpread({},loadableOptions),options);if(typeof dynamicOptions==='object'&&!(dynamicOptions instanceof Promise)){if(true){if(dynamicOptions.modules){console.warn('The modules option for next/dynamic has been deprecated. See here for more info https://nextjs.org/docs/messages/next-dynamic-modules');}}if(dynamicOptions.render){loadableOptions.render=function(loaded,props){return dynamicOptions.render(props,loaded);};}if(dynamicOptions.modules){loadableFn=_loadable.default.Map;var loadModules={};var modules=dynamicOptions.modules();Object.keys(modules).forEach(function(key){var value=modules[key];if(typeof value.then==='function'){loadModules[key]=function(){return value.then(function(mod){return mod.default||mod;});};return;}loadModules[key]=value;});loadableOptions.loader=loadModules;}}if(loadableOptions.loadableGenerated){loadableOptions=_objectSpread(_objectSpread({},loadableOptions),loadableOptions.loadableGenerated);delete loadableOptions.loadableGenerated;}if(typeof loadableOptions.ssr==='boolean'){if(!loadableOptions.ssr){delete loadableOptions.ssr;return noSSR(loadableFn,loadableOptions);}delete loadableOptions.ssr;}return loadableFn(loadableOptions);}","map":{"version":3,"sources":["../../../next-server/lib/dynamic.tsx"],"names":["isServerSide","loadableOptions","LoadableInitializer","Loading","loadableFn","Loadable","loading","error","dynamicOptions","console","loadModules","modules","Object","key","value","mod","noSSR"],"mappings":"6iCAAA,GAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CACA,GAAA,CAAA,SAAA,CAAA,sBAAA,CAAA,OAAA,cAAA,CAAA,C,kFAEA,IAAMA,CAAAA,YAAN,MAAA,CAiDO,QAAA,CAAA,KAAA,CAAA,mBAAA,CAAA,eAAA,CAGmB,CAExB,MAAOC,CAAAA,eAAe,CAAtB,OAAA,CACA,MAAOA,CAAAA,eAAe,CAAtB,OAAA,CAGA,GAAI,CAAJ,YAAA,CAAmB,CACjB,MAAOC,CAAAA,mBAAmB,CAA1B,eAA0B,CAA1B,CAGF,IAAMC,CAAAA,OAAO,CAAGF,eAAe,CAA/B,OAAA,CAEA,MAAO,kBACL,CAAA,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,OAAA,CAAA,CAAS,KAAK,CAAd,IAAA,CAAsB,SAAS,CAA/B,IAAA,CAAgC,SAAS,CAAzC,KAAA,CAAkD,QAAQ,CAD5D,KACE,CAAA,CADK,EAAP,CAKF,CAEe,QAAA,CAAA,OAAA,CAAA,cAAA,CAAA,OAAA,CAGW,CACxB,GAAIG,CAAAA,UAAyB,CAAGC,SAAAA,CAAhC,OAAA,CACA,GAAIJ,CAAAA,eAAmC,CAAG,CAExCK,OAAO,CAAE,sBAAqC,IAApC,CAAA,KAAoC,MAApC,KAAoC,CAApC,SAAoC,MAApC,SAAoC,CAArC,SAAqC,MAArC,SAAqC,CAC5C,GAAI,CAAJ,SAAA,CAAgB,MAAA,KAAA,CAChB,QAA4C,CAC1C,GAAA,SAAA,CAAe,CACb,MAAA,KAAA,CAEF,IAAA,KAAA,CAAW,CACT,MACE,CAAA,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,GAAA,CAAA,IAAA,CACGC,KAAK,CADR,OAAA,CAEE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,IAAA,CAFF,IAEE,CAFF,CAGGA,KAAK,CAJV,KACE,CADF,CAQH,CAED,OAAA,KAAA,CAnBJ,CAA0C,CAA1C,CA2BA,GAAIC,cAAc,WAAlB,CAAA,OAAA,CAAuC,CACrCP,eAAe,CAAfA,MAAAA,CAAyB,iBAAzBA,CAAAA,cAAyB,EAAzBA,CADF,CAAA,IAGO,IAAI,MAAA,CAAA,cAAA,GAAJ,UAAA,CAA0C,CAC/CA,eAAe,CAAfA,MAAAA,CAAAA,cAAAA,CADK,CAAA,IAGA,IAAI,MAAA,CAAA,cAAA,GAAJ,QAAA,CAAwC,CAC7CA,eAAe,gCAAG,eAAH,EAAfA,cAAe,CAAfA,CAGF,CACAA,eAAe,gCAAG,eAAH,EAAfA,OAAe,CAAfA,CAEA,GACE,MAAA,CAAA,cAAA,GAAA,QAAA,EACA,EAAEO,cAAc,WAFlB,CAAA,OAEE,CAFF,CAGE,CAEA,QAA2C,CACzC,GAAIA,cAAc,CAAlB,OAAA,CAA4B,CAC1BC,OAAO,CAAPA,IAAAA,CAAAA,uIAAAA,EAIH,CACD,CACA,GAAID,cAAc,CAAlB,MAAA,CAA2B,CACzBP,eAAe,CAAfA,MAAAA,CAAyB,SAAA,MAAA,CAAA,KAAA,QACvBO,CAAAA,cAAc,CAAdA,MAAAA,CAAAA,KAAAA,CADFP,MACEO,CADuB,EAAzBP,CAGF,CACA,GAAIO,cAAc,CAAlB,OAAA,CAA4B,CAC1BJ,UAAU,CAAGC,SAAAA,CAAAA,OAAAA,CAAbD,GAAAA,CACA,GAAMM,CAAAA,WAAsB,CAA5B,EAAA,CACA,GAAMC,CAAAA,OAAO,CAAGH,cAAc,CAA9B,OAAgBA,EAAhB,CACAI,MAAM,CAANA,IAAAA,CAAAA,OAAAA,EAAAA,OAAAA,CAA8BC,SAAAA,GAAD,CAAS,CACpC,GAAMC,CAAAA,KAAU,CAAGH,OAAO,CAA1B,GAA0B,CAA1B,CACA,GAAI,MAAOG,CAAAA,KAAK,CAAZ,IAAA,GAAJ,UAAA,CAAsC,CACpCJ,WAAW,CAAXA,GAAW,CAAXA,CAAmB,iBAAMI,CAAAA,KAAK,CAALA,IAAAA,CAAYC,SAAAA,GAAD,QAAcA,CAAAA,GAAG,CAAHA,OAAAA,EAAlDL,GAAoC,EAAXI,CAAN,EAAnBJ,CACA,OAEFA,CAAAA,WAAW,CAAXA,GAAW,CAAXA,CAAAA,KAAAA,CANFE,CAAAA,EAQAX,eAAe,CAAfA,MAAAA,CAAAA,WAAAA,CAEH,CAED,CACA,GAAIA,eAAe,CAAnB,iBAAA,CAAuC,CACrCA,eAAe,gCAAG,eAAH,EAEVA,eAAe,CAFpBA,iBAAe,CAAfA,CAIA,MAAOA,CAAAA,eAAe,CAAtB,iBAAA,CAGF,CACA,GAAI,MAAOA,CAAAA,eAAe,CAAtB,GAAA,GAAJ,SAAA,CAA8C,CAC5C,GAAI,CAACA,eAAe,CAApB,GAAA,CAA0B,CACxB,MAAOA,CAAAA,eAAe,CAAtB,GAAA,CACA,MAAOe,CAAAA,KAAK,CAAA,UAAA,CAAZ,eAAY,CAAZ,CAEF,OAAOf,CAAAA,eAAe,CAAtB,GAAA,CAGF,OAAOG,CAAAA,UAAU,CAAjB,eAAiB,CAAjB,CACD","sourcesContent":["import React from 'react'\nimport Loadable from './loadable'\n\nconst isServerSide = typeof window === 'undefined'\n\nexport type LoaderComponent<P = {}> = Promise<\n  React.ComponentType<P> | { default: React.ComponentType<P> }\n>\n\nexport type Loader<P = {}> = (() => LoaderComponent<P>) | LoaderComponent<P>\n\nexport type LoaderMap = { [mdule: string]: () => Loader<any> }\n\nexport type LoadableGeneratedOptions = {\n  webpack?(): any\n  modules?(): LoaderMap\n}\n\nexport type LoadableBaseOptions<P = {}> = LoadableGeneratedOptions & {\n  loading?: ({\n    error,\n    isLoading,\n    pastDelay,\n  }: {\n    error?: Error | null\n    isLoading?: boolean\n    pastDelay?: boolean\n    retry?: () => void\n    timedOut?: boolean\n  }) => JSX.Element | null\n  loader?: Loader<P> | LoaderMap\n  loadableGenerated?: LoadableGeneratedOptions\n  ssr?: boolean\n}\n\nexport type LoadableOptions<P = {}> = LoadableBaseOptions<P> & {\n  render?(loader: any, props: any): JSX.Element\n}\n\nexport type DynamicOptions<P = {}> = LoadableBaseOptions<P> & {\n  /**\n   * @deprecated the modules option has been planned for removal\n   */\n  render?(props: P, loaded: any): JSX.Element\n}\n\nexport type LoadableFn<P = {}> = (\n  opts: LoadableOptions<P>\n) => React.ComponentType<P>\n\nexport type LoadableComponent<P = {}> = React.ComponentType<P>\n\nexport function noSSR<P = {}>(\n  LoadableInitializer: LoadableFn<P>,\n  loadableOptions: LoadableOptions<P>\n): React.ComponentType<P> {\n  // Removing webpack and modules means react-loadable won't try preloading\n  delete loadableOptions.webpack\n  delete loadableOptions.modules\n\n  // This check is necessary to prevent react-loadable from initializing on the server\n  if (!isServerSide) {\n    return LoadableInitializer(loadableOptions)\n  }\n\n  const Loading = loadableOptions.loading!\n  // This will only be rendered on the server side\n  return () => (\n    <Loading error={null} isLoading pastDelay={false} timedOut={false} />\n  )\n}\n\n// function dynamic<P = {}, O extends DynamicOptions>(options: O):\n\nexport default function dynamic<P = {}>(\n  dynamicOptions: DynamicOptions<P> | Loader<P>,\n  options?: DynamicOptions<P>\n): React.ComponentType<P> {\n  let loadableFn: LoadableFn<P> = Loadable\n  let loadableOptions: LoadableOptions<P> = {\n    // A loading component is not required, so we default it\n    loading: ({ error, isLoading, pastDelay }) => {\n      if (!pastDelay) return null\n      if (process.env.NODE_ENV === 'development') {\n        if (isLoading) {\n          return null\n        }\n        if (error) {\n          return (\n            <p>\n              {error.message}\n              <br />\n              {error.stack}\n            </p>\n          )\n        }\n      }\n\n      return null\n    },\n  }\n\n  // Support for direct import(), eg: dynamic(import('../hello-world'))\n  // Note that this is only kept for the edge case where someone is passing in a promise as first argument\n  // The react-loadable babel plugin will turn dynamic(import('../hello-world')) into dynamic(() => import('../hello-world'))\n  // To make sure we don't execute the import without rendering first\n  if (dynamicOptions instanceof Promise) {\n    loadableOptions.loader = () => dynamicOptions\n    // Support for having import as a function, eg: dynamic(() => import('../hello-world'))\n  } else if (typeof dynamicOptions === 'function') {\n    loadableOptions.loader = dynamicOptions\n    // Support for having first argument being options, eg: dynamic({loader: import('../hello-world')})\n  } else if (typeof dynamicOptions === 'object') {\n    loadableOptions = { ...loadableOptions, ...dynamicOptions }\n  }\n\n  // Support for passing options, eg: dynamic(import('../hello-world'), {loading: () => <p>Loading something</p>})\n  loadableOptions = { ...loadableOptions, ...options }\n\n  if (\n    typeof dynamicOptions === 'object' &&\n    !(dynamicOptions instanceof Promise)\n  ) {\n    // show deprecation warning for `modules` key in development\n    if (process.env.NODE_ENV !== 'production') {\n      if (dynamicOptions.modules) {\n        console.warn(\n          'The modules option for next/dynamic has been deprecated. See here for more info https://nextjs.org/docs/messages/next-dynamic-modules'\n        )\n      }\n    }\n    // Support for `render` when using a mapping, eg: `dynamic({ modules: () => {return {HelloWorld: import('../hello-world')}, render(props, loaded) {} } })\n    if (dynamicOptions.render) {\n      loadableOptions.render = (loaded, props) =>\n        dynamicOptions.render!(props, loaded)\n    }\n    // Support for `modules` when using a mapping, eg: `dynamic({ modules: () => {return {HelloWorld: import('../hello-world')}, render(props, loaded) {} } })\n    if (dynamicOptions.modules) {\n      loadableFn = Loadable.Map\n      const loadModules: LoaderMap = {}\n      const modules = dynamicOptions.modules()\n      Object.keys(modules).forEach((key) => {\n        const value: any = modules[key]\n        if (typeof value.then === 'function') {\n          loadModules[key] = () => value.then((mod: any) => mod.default || mod)\n          return\n        }\n        loadModules[key] = value\n      })\n      loadableOptions.loader = loadModules\n    }\n  }\n\n  // coming from build/babel/plugins/react-loadable-plugin.js\n  if (loadableOptions.loadableGenerated) {\n    loadableOptions = {\n      ...loadableOptions,\n      ...loadableOptions.loadableGenerated,\n    }\n    delete loadableOptions.loadableGenerated\n  }\n\n  // support for disabling server side rendering, eg: dynamic(import('../hello-world'), {ssr: false})\n  if (typeof loadableOptions.ssr === 'boolean') {\n    if (!loadableOptions.ssr) {\n      delete loadableOptions.ssr\n      return noSSR(loadableFn, loadableOptions)\n    }\n    delete loadableOptions.ssr\n  }\n\n  return loadableFn(loadableOptions)\n}\n"]},"metadata":{},"sourceType":"script"}