{"ast":null,"code":"export function throttle(func,limit){var inThrottle;return function(){var args=arguments;var context=this;if(!inThrottle){inThrottle=true;func.apply(context,args);setTimeout(function(){return inThrottle=false;},limit);}};}export function debounce(func){var _options$isImmediate;var waitMilliseconds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:50;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var timeoutId;var isImmediate=(_options$isImmediate=options.isImmediate)!=null?_options$isImmediate:false;var maxWait=options.maxWait;var lastInvokeTime=Date.now();function nextInvokeTimeout(){if(maxWait!==undefined){var timeSinceLastInvocation=Date.now()-lastInvokeTime;if(timeSinceLastInvocation+waitMilliseconds>=maxWait){return maxWait-timeSinceLastInvocation;}}return waitMilliseconds;}var debouncedFunction=function debouncedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var context=this;var invokeFunction=function invokeFunction(){timeoutId=undefined;lastInvokeTime=Date.now();if(!isImmediate){func.apply(context,args);}};var shouldCallNow=isImmediate&&timeoutId===undefined;if(timeoutId!==undefined){clearTimeout(timeoutId);}timeoutId=setTimeout(invokeFunction,nextInvokeTimeout());if(shouldCallNow){func.apply(context,args);}};debouncedFunction.cancel=function(){if(timeoutId!==undefined){clearTimeout(timeoutId);}};return debouncedFunction;}","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/utils/common.ts"],"names":["args","context","inThrottle","func","setTimeout","waitMilliseconds","options","isImmediate","maxWait","lastInvokeTime","Date","timeSinceLastInvocation","debouncedFunction","invokeFunction","timeoutId","shouldCallNow","clearTimeout","nextInvokeTimeout"],"mappings":"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","sourcesContent":["import {DebouncedFunction, DebounceOptions, Procedure} from '../types';\n\nexport function throttle(func: Function, limit: number): Function {\n    let inThrottle: boolean;\n    return function (this: any): any {\n        const args = arguments;\n        const context = this;\n\n        if (!inThrottle) {\n            inThrottle = true;\n            func.apply(context, args);\n            setTimeout(() => (inThrottle = false), limit);\n        }\n    };\n}\n\nexport function debounce<F extends Procedure>(\n    func: F,\n    waitMilliseconds = 50,\n    options: DebounceOptions = {}\n): DebouncedFunction<F> {\n    let timeoutId: ReturnType<typeof setTimeout> | undefined;\n    const isImmediate = options.isImmediate ?? false;\n    const maxWait = options.maxWait;\n    let lastInvokeTime = Date.now();\n\n    function nextInvokeTimeout() {\n        if (maxWait !== undefined) {\n            const timeSinceLastInvocation = Date.now() - lastInvokeTime;\n\n            if (timeSinceLastInvocation + waitMilliseconds >= maxWait) {\n                return maxWait - timeSinceLastInvocation;\n            }\n        }\n\n        return waitMilliseconds;\n    }\n\n    const debouncedFunction = function (\n        this: ThisParameterType<F>,\n        ...args: Parameters<F>\n    ) {\n        const context = this;\n\n        const invokeFunction = function () {\n            timeoutId = undefined;\n            lastInvokeTime = Date.now();\n            if (!isImmediate) {\n                func.apply(context, args);\n            }\n        };\n\n        const shouldCallNow = isImmediate && timeoutId === undefined;\n\n        if (timeoutId !== undefined) {\n            clearTimeout(timeoutId);\n        }\n\n        timeoutId = setTimeout(invokeFunction, nextInvokeTimeout());\n\n        if (shouldCallNow) {\n            func.apply(context, args);\n        }\n    };\n\n    debouncedFunction.cancel = function () {\n        if (timeoutId !== undefined) {\n            clearTimeout(timeoutId);\n        }\n    };\n\n    return debouncedFunction;\n}\n"]},"metadata":{},"sourceType":"module"}