{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect,useState}from'react';import{Text,View}from\"../../components/UI\";import{shortenTFunctionKey}from\"../../providers/i18n-labor\";import{makeContainerStyles}from\"../../containers\";import Animated from\"react-native-web/dist/exports/Animated\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import{randomText,wait}from\"../../utils\";import{FollowUpSearchBar}from\"../../components/FollowUpSearchBar\";import{makeStyles}from\"./styles\";import{collectBizLogicResult}from\"../../store/actions\";import{bizLogicError}from\"../../helpers\";import config from\"../../config\";import{useBunnyKit}from\"../../hooks/bunny-kit\";export function DemoSearchScreen(_ref){var route=_ref.route,navigation=_ref.navigation;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,t=_useBunnyKit.t;var st=shortenTFunctionKey(t,'screens.DemoSearch');var containerStyles=makeContainerStyles(sizeLabor,themeLabor);var styles=makeStyles(sizeLabor,themeLabor);var _useState=useState(new Animated.Value(0)),_useState2=_slicedToArray(_useState,1),scrollYValue=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var getDummyData=function getDummyData(){var dummyData=[];for(var i=0;i<10000;i++){dummyData.push({id:i,text:randomText(30)});}return dummyData;};useEffect(function(){},[]);var mockSearch=function mockSearch(keywordText){return _regeneratorRuntime.async(function mockSearch$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(resolve,reject){wait(1000).then(function(){var dummyData=getDummyData();var result=dummyData.filter(function(item){return item.text.includes(keywordText);});return Math.random()>0.1?resolve(result):reject(new Error('error when searching'));});}));case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);};return React.createElement(SafeAreaView,{style:containerStyles.Screen},React.createElement(FollowUpSearchBar,{scrollYValue:scrollYValue,defaultKeywords:[],onSearch:function _callee(searchText){var searchResult;return _regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(mockSearch(searchText));case 3:searchResult=_context2.sent;setData(searchResult);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);collectBizLogicResult(bizLogicError(_context2.t0));case 10:case\"end\":return _context2.stop();}}},null,null,[[0,7]],Promise);}}),React.createElement(Animated.FlatList,{data:data,showsVerticalScrollIndicator:false,style:styles.list,onScroll:Animated.event([{nativeEvent:{contentOffset:{y:scrollYValue}}}],{useNativeDriver:config.useNativeDriver}),keyExtractor:function keyExtractor(item){return item.id.toString();},contentInsetAdjustmentBehavior:\"automatic\",renderItem:function renderItem(_ref2){var item=_ref2.item;return React.createElement(View,{style:styles.item},React.createElement(View,{style:styles.itemBox},React.createElement(Text,{style:styles.itemText},item.id),React.createElement(Text,null,item.text)));}}));}","map":null,"metadata":{},"sourceType":"module"}