{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect}from'react';import{ButtonTO,InButtonText,Text,View}from\"../../components/UI\";import{shortenTFunctionKey}from\"../../providers/i18n-labor\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{makeStyles}from\"./styles\";import ImageProgressive from\"../../components/UI/ImageProgressive\";import{Col,makeContainerStyles,Row}from\"../../containers\";import{getSharedStyles}from\"../../helpers\";import{Avatar}from\"../../components/Avatar\";import{useFirestore}from'react-redux-firebase';import{useSelector}from'react-redux';import{useBunnyKit}from\"../../hooks/bunny-kit\";function ProfileScreen(_ref){var _user$storedUser;var route=_ref.route,navigation=_ref.navigation;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,t=_useBunnyKit.t,user=_useBunnyKit.user;var st=shortenTFunctionKey(t,'screens.Profile');var containerStyles=makeContainerStyles(sizeLabor,themeLabor);var styles=makeStyles(sizeLabor,themeLabor);var _getSharedStyles=getSharedStyles(sizeLabor,themeLabor),sharedStyles=_getSharedStyles.sharedStyles;var firestore=useFirestore();var userId=user==null?void 0:(_user$storedUser=user.storedUser)==null?void 0:_user$storedUser.uid;var getStoredUser=function getStoredUser(){return _regeneratorRuntime.async(function getStoredUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(firestore.get({collection:'users',where:[['uid','==',userId]],storeAs:'storedUser'}));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);};var storedUser=useSelector(function(rootState){return rootState.firestoreState.ordered.storedUser;});var _uploadedPortrait=function _uploadedPortrait(source){var usersRef;return _regeneratorRuntime.async(function _uploadedPortrait$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(source!=null&&source.uri)){_context2.next=8;break;}if(userId){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:usersRef=firestore.collection('users');_context2.next=6;return _regeneratorRuntime.awrap(usersRef.doc(userId).set({photoURL:source.uri},{merge:true}));case 6:_context2.next=8;return _regeneratorRuntime.awrap(getStoredUser());case 8:case\"end\":return _context2.stop();}}},null,null,null,Promise);};useEffect(function(){(function _callee(){return _regeneratorRuntime.async(function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(getStoredUser());case 2:case\"end\":return _context3.stop();}}},null,null,null,Promise);})();},[]);return React.createElement(SafeAreaView,null,React.createElement(ScrollView,null,React.createElement(View,{style:[containerStyles.Screen,sharedStyles.centralized]},React.createElement(Row,{style:styles.user},storedUser!=null&&storedUser[0]?React.createElement(Row,null,React.createElement(Col,null,React.createElement(Row,null,React.createElement(Text,{style:sharedStyles.title},\"Welcome,\")),React.createElement(Row,null,React.createElement(Text,{style:[sharedStyles.title,{fontWeight:'bold'}]},storedUser[0].displayName||storedUser[0].email))),React.createElement(Col,null,storedUser!=null&&storedUser[0].photoURL?React.createElement(Avatar,{size:\"xl\",shouldUpload:true,uploaderProps:{onUploaded:_uploadedPortrait,path:'portraits'},source:{uri:storedUser[0].photoURL}}):null)):null),React.createElement(ImageProgressive,{previewSource:{uri:\"https://raw.githubusercontent.com/zrwusa/assets/master/images/pexels-5451714-placeholder.jpg\"},source:{uri:\"https://raw.githubusercontent.com/zrwusa/assets/master/images/pexels-5451714-medium.jpg\"},style:styles.imageProgressive,resizeMode:\"cover\"}),React.createElement(Row,{paddingVertical:\"l\",align:\"center\"},React.createElement(ButtonTO,{onPress:function onPress(){return navigation.navigate('Home');}},React.createElement(InButtonText,null,st(\"goToHomeScreen\")))))));}export default ProfileScreen;","map":null,"metadata":{},"sourceType":"module"}