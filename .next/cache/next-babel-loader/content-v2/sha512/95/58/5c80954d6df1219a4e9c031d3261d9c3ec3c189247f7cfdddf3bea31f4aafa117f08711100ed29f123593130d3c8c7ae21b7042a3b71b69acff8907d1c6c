{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/Composer.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TextInput from\"react-native-web/dist/exports/TextInput\";import{DEFAULT_PLACEHOLDER,MIN_COMPOSER_HEIGHT}from\"./Constant\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;var colors=themeLabor.theme.colors;return StyleSheet.create({textInput:_objectSpread(_objectSpread({flex:1,marginLeft:wp(10),fontSize:wp(16),lineHeight:wp(16),color:colors.text},Platform.select({web:{paddingTop:wp(6),paddingLeft:wp(4)}})),{},{marginTop:Platform.select({ios:wp(6),android:0,web:wp(6)}),marginBottom:Platform.select({ios:wp(5),android:wp(3),web:wp(4)})})});};var Composer=function(_React$Component){_inherits(Composer,_React$Component);var _super=_createSuper(Composer);function Composer(){var _this;_classCallCheck(this,Composer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.layout=undefined;_this.onLayout=function(e){var layout=e.nativeEvent.layout;if(!layout){return;}if(!_this.layout||_this.layout&&(_this.layout.width!==layout.width||_this.layout.height!==layout.height)){_this.layout=layout;_this.props.onInputSizeChanged(_this.layout);}};_this.onChangeText=function(text){_this.props.onTextChanged(text);};return _this;}_createClass(Composer,[{key:\"render\",value:function render(){var _this$props$bunnyKit=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor,colors=_this$props$bunnyKit.colors;var styles=makeStyles(sizeLabor,themeLabor);var _this$props$placehold=this.props.placeholderTextColor,placeholderTextColor=_this$props$placehold===void 0?colors.placeholder:_this$props$placehold;return React.createElement(TextInput,_extends({testID:this.props.placeholder,accessible:true,accessibilityLabel:this.props.placeholder,placeholder:this.props.placeholder,placeholderTextColor:placeholderTextColor,multiline:this.props.multiline,editable:!this.props.disableComposer,onLayout:this.onLayout,onChangeText:this.onChangeText,style:[styles.textInput,this.props.textInputStyle,_objectSpread({height:this.props.composerHeight},Platform.select({web:{outlineWidth:0,outlineColor:'transparent',outlineOffset:0}}))],autoFocus:this.props.textInputAutoFocus,value:this.props.text,enablesReturnKeyAutomatically:true,underlineColorAndroid:\"transparent\",keyboardAppearance:this.props.keyboardAppearance},this.props.textInputProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:105,columnNumber:13}}));}}]);return Composer;}(React.Component);Composer.defaultProps={composerHeight:MIN_COMPOSER_HEIGHT,text:'',placeholderTextColor:'#b2b2b2',placeholder:DEFAULT_PLACEHOLDER,textInputProps:undefined,multiline:true,disableComposer:false,textInputStyle:{},textInputAutoFocus:false,keyboardAppearance:'default',onTextChanged:function onTextChanged(){},onInputSizeChanged:function onInputSizeChanged(){}};export default withBunnyKit(Composer);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/Composer.tsx"],"names":["makeStyles","wp","sizeLabor","colors","themeLabor","textInput","flex","marginLeft","fontSize","lineHeight","color","text","web","paddingTop","paddingLeft","marginTop","ios","android","marginBottom","Composer","React","Component","defaultProps","composerHeight","placeholderTextColor","placeholder","textInputProps","multiline","disableComposer","textInputStyle","textInputAutoFocus","keyboardAppearance","onTextChanged","onInputSizeChanged","layout","undefined","onLayout","e","onChangeText","styles","height","outlineWidth","outlineColor","outlineOffset","withBunnyKit"],"mappings":"4/DAAA,MAAA,CAAA,KAAA,KAAA,OAAA,C,6LAEA,OAAA,mBAAA,CAAA,mBAAA,kBACA,OAAA,YAAA,6BAGA,GAAMA,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAA,SAAA,CAAA,UAAA,CAAkD,CACjE,GAAOC,CAAAA,EAAP,CAAaC,SAAS,CAATA,cAAAA,CAAb,OAAaA,CAAb,EAAA,CACA,GAAeC,CAAAA,MAAf,CAA0BC,UAA1B,CAAA,KAA0BA,CAA1B,MAAA,CACA,MAAO,CAAA,UAAU,CAAV,MAAA,CAAkB,CACrBC,SAAS,CAAA,aAAA,CAAA,aAAA,CAAA,CACLC,IAAI,CADC,CAAA,CAELC,UAAU,CAAEN,EAAE,CAFT,EAES,CAFT,CAGLO,QAAQ,CAAEP,EAAE,CAHP,EAGO,CAHP,CAILQ,UAAU,CAAER,EAAE,CAJT,EAIS,CAJT,CAKLS,KAAK,CAAEP,MAAM,CAACQ,IALT,CAAA,CAMF,QAAQ,CAAR,MAAA,CAAgB,CACfC,GAAG,CAAE,CACDC,UAAU,CAAEZ,EAAE,CADb,CACa,CADb,CAEDa,WAAW,CAAEb,EAAE,CAAA,CAAA,CAFd,CADU,CAAhB,CANE,CAAA,CAAA,EAAA,CAAA,CAYLc,SAAS,CAAE,QAAQ,CAAR,MAAA,CAAgB,CACvBC,GAAG,CAAEf,EAAE,CADgB,CAChB,CADgB,CAEvBgB,OAAO,CAFgB,CAAA,CAGvBL,GAAG,CAAEX,EAAE,CAAA,CAAA,CAHgB,CAAhB,CAZN,CAiBLiB,YAAY,CAAE,QAAQ,CAAR,MAAA,CAAgB,CAC1BF,GAAG,CAAEf,EAAE,CADmB,CACnB,CADmB,CAE1BgB,OAAO,CAAEhB,EAAE,CAFe,CAEf,CAFe,CAG1BW,GAAG,CAAEX,EAAE,CAAA,CAAA,CAHmB,CAAhB,CAjBT,CAAA,CADY,CAAlB,CAAP,CAHJ,CAAA,C,GA+CMkB,CAAAA,Q,kUAoBFe,M,CAA6CC,S,OAE7CC,Q,CAAW,SAAA,CAAA,CAAY,CACnB,GAAOF,CAAAA,MAAP,CAAiBG,CAAC,CAAlB,WAAiBA,CAAjB,MAAA,CAGA,GAAI,CAAJ,MAAA,CAAa,CACT,OACH,CAED,GACI,CAAC,KAAA,CAAD,MAAA,EACC,KAAA,CAAA,MAAA,GACI,KAAA,CAAA,MAAA,CAAA,KAAA,GAAsBH,MAAM,CAA5B,KAAA,EACG,KAAA,CAAA,MAAA,CAAA,MAAA,GAAuBA,MAAM,CAJzC,MAEK,CAFL,CAKE,CACE,KAAA,CAAA,MAAA,CAAA,MAAA,CACA,KAAA,CAAA,KAAA,CAAA,kBAAA,CAA+B,KAAA,CAA/B,MAAA,EACH,C,QAGLI,Y,CAAe,SAAA,IAAA,CAAkB,CAE7B,KAAA,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,E,2DAGJ,QAAA,CAAA,MAAA,EAAS,CACL,GAAA,CAAA,oBAAA,CAAoD,KAApD,KAAoD,CAApD,QAAA,CAAkBpC,SAAlB,CAAA,oBAAA,CAAA,SAAA,CAA6BE,UAA7B,CAAA,oBAAA,CAAA,UAAA,CAAyCD,MAAzC,CAAA,oBAAA,CAAA,MAAA,CACA,GAAMoC,CAAAA,MAAM,CAAGvC,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,GAAA,CAAA,qBAAA,CAAoD,KAApD,KAAoD,CAApD,oBAAA,CAAOwB,oBAAP,CAAA,qBAAA,GAAA,IAAA,EAAA,CAA8BrB,MAAM,CAApC,WAAA,CAAA,qBAAA,CACA,MACI,CAAA,KAAA,CAAA,aAAA,CAAA,SAAA,CAAA,QAAA,CAAA,CACI,MAAM,CAAE,KAAA,KAAA,CADZ,WAAA,CAEI,UAAU,CAFd,IAAA,CAGI,kBAAkB,CAAE,KAAA,KAAA,CAHxB,WAAA,CAII,WAAW,CAAE,KAAA,KAAA,CAJjB,WAAA,CAKI,oBAAoB,CALxB,oBAAA,CAMI,SAAS,CAAE,KAAA,KAAA,CANf,SAAA,CAOI,QAAQ,CAAE,CAAC,KAAA,KAAA,CAPf,eAAA,CAQI,QAAQ,CAAE,KARd,QAAA,CASI,YAAY,CAAE,KATlB,YAAA,CAUI,KAAK,CAAE,CACHoC,MAAM,CADH,SAAA,CAEH,KAAA,KAAA,CAFG,cAAA,CAAA,aAAA,CAAA,CAICC,MAAM,CAAE,KAAA,KAAA,CAAWjB,cAJpB,CAAA,CAKI,QAAQ,CAAR,MAAA,CAAgB,CACfX,GAAG,CAAE,CACD6B,YAAY,CADX,CAAA,CAEDC,YAAY,CAFX,aAAA,CAGDC,aAAa,CAAE,CAHd,CADU,CAAhB,CALJ,CAAA,CAVX,CAwBI,SAAS,CAAE,KAAA,KAAA,CAxBf,kBAAA,CAyBI,KAAK,CAAE,KAAA,KAAA,CAzBX,IAAA,CA0BI,6BAA6B,CA1BjC,IAAA,CA2BI,qBAAqB,CA3BzB,aAAA,CA4BI,kBAAkB,CAAE,KAAA,KAAA,CAAWZ,kBA5BnC,CAAA,CA6BQ,KAAA,KAAA,CA7BR,cAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CADJ,CAiCH,C,sBAnFkBX,KAAK,CAACC,S,EAAvBF,Q,CACKG,YADLH,CACoB,CAClBI,cAAc,CADI,mBAAA,CAElBZ,IAAI,CAFc,EAAA,CAIlBa,oBAAoB,CAJF,SAAA,CAKlBC,WAAW,CALO,mBAAA,CAMlBC,cAAc,CANI,SAAA,CAOlBC,SAAS,CAPS,IAAA,CAQlBC,eAAe,CARG,KAAA,CASlBC,cAAc,CATI,EAAA,CAUlBC,kBAAkB,CAVA,KAAA,CAWlBC,kBAAkB,CAXA,SAAA,CAYlBC,aAAa,CAAE,QAAA,CAAA,aAAA,EAAM,CAZH,CAAA,CAclBC,kBAAkB,CAAE,QAAA,CAAA,kBAAA,EAAM,CACzB,CAfiB,CADpBd,CAsFN,cAAeyB,CAAAA,YAAY,CAA3B,QAA2B,CAA3B","sourcesContent":["import React from 'react';\nimport {Platform, StyleSheet, TextInput, TextInputProps} from 'react-native';\nimport {DEFAULT_PLACEHOLDER, MIN_COMPOSER_HEIGHT} from './Constant';\nimport {WithBunnyKit, withBunnyKit} from '../../hooks/bunny-kit';\nimport {SizeLabor, ThemeLabor} from '../../types';\n\nconst makeStyles = (sizeLabor: SizeLabor, themeLabor: ThemeLabor) => {\n    const {wp} = sizeLabor.designsBasedOn.iphoneX;\n    const {theme: {colors}} = themeLabor;\n    return StyleSheet.create({\n        textInput: {\n            flex: 1,\n            marginLeft: wp(10),\n            fontSize: wp(16),\n            lineHeight: wp(16),\n            color: colors.text,\n            ...Platform.select({\n                web: {\n                    paddingTop: wp(6),\n                    paddingLeft: wp(4),\n                },\n            }),\n            marginTop: Platform.select({\n                ios: wp(6),\n                android: 0,\n                web: wp(6),\n            }),\n            marginBottom: Platform.select({\n                ios: wp(5),\n                android: wp(3),\n                web: wp(4),\n            }),\n        },\n    });\n};\n\nexport interface ComposerProps {\n    composerHeight?: number;\n    text?: string;\n    placeholder?: string;\n    placeholderTextColor?: string;\n    textInputProps?: Partial<TextInputProps>;\n    textInputStyle?: TextInputProps['style'];\n    textInputAutoFocus?: boolean;\n    keyboardAppearance?: TextInputProps['keyboardAppearance'];\n    multiline?: boolean;\n    disableComposer?: boolean;\n\n    onTextChanged?(text: string): void;\n\n    onInputSizeChanged?(layout: { width: number; height: number }): void;\n}\n\nclass Composer extends React.Component<ComposerProps & WithBunnyKit> {\n    static defaultProps = {\n        composerHeight: MIN_COMPOSER_HEIGHT,\n        text: '',\n        // TODO defaultProps can't use bunnyKit props\n        placeholderTextColor: '#b2b2b2',\n        placeholder: DEFAULT_PLACEHOLDER,\n        textInputProps: undefined,\n        multiline: true,\n        disableComposer: false,\n        textInputStyle: {},\n        textInputAutoFocus: false,\n        keyboardAppearance: 'default' as TextInputProps['keyboardAppearance'],\n        onTextChanged: () => {\n        },\n        onInputSizeChanged: () => {\n        },\n    };\n\n\n    layout?: { width: number; height: number } = undefined;\n\n    onLayout = (e: any) => {\n        const {layout} = e.nativeEvent;\n\n        // Support earlier versions of React Native on Android.\n        if (!layout) {\n            return;\n        }\n\n        if (\n            !this.layout ||\n            (this.layout &&\n                (this.layout.width !== layout.width ||\n                    this.layout.height !== layout.height))\n        ) {\n            this.layout = layout;\n            this.props.onInputSizeChanged!(this.layout!);\n        }\n    };\n\n    onChangeText = (text: string) => {\n        // TODO when this happens the MessageText rerenders,not sure is this necessary\n        this.props.onTextChanged!(text);\n    };\n\n    render() {\n        const {bunnyKit: {sizeLabor, themeLabor, colors}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        const {placeholderTextColor = colors.placeholder} = this.props;\n        return (\n            <TextInput\n                testID={this.props.placeholder}\n                accessible\n                accessibilityLabel={this.props.placeholder}\n                placeholder={this.props.placeholder}\n                placeholderTextColor={placeholderTextColor}\n                multiline={this.props.multiline}\n                editable={!this.props.disableComposer}\n                onLayout={this.onLayout}\n                onChangeText={this.onChangeText}\n                style={[\n                    styles.textInput,\n                    this.props.textInputStyle,\n                    {\n                        height: this.props.composerHeight,\n                        ...Platform.select({\n                            web: {\n                                outlineWidth: 0,\n                                outlineColor: 'transparent',\n                                outlineOffset: 0,\n                            },\n                        }),\n                    },\n                ]}\n                autoFocus={this.props.textInputAutoFocus}\n                value={this.props.text}\n                enablesReturnKeyAutomatically\n                underlineColorAndroid=\"transparent\"\n                keyboardAppearance={this.props.keyboardAppearance}\n                {...this.props.textInputProps}\n            />\n        );\n    }\n}\n\nexport default withBunnyKit(Composer);\n"]},"metadata":{},"sourceType":"module"}