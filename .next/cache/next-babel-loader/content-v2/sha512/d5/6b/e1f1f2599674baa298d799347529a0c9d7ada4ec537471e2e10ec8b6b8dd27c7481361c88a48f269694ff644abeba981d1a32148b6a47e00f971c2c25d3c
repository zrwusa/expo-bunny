{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _this=this,_jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/AudioRecorder/AudioRecorder.tsx\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect,useState}from'react';import{useBunnyKit}from\"../../hooks/bunny-kit\";import{IcoMoon}from\"../UI\";import Platform from\"react-native-web/dist/exports/Platform\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import Vibration from\"react-native-web/dist/exports/Vibration\";import{Audio}from\"../../../packages/expo-av/src\";import{uploadFileToFirebase}from\"../../helpers\";import{RECORDING_OPTIONS_PRESET_HIGH_QUALITY}from\"../../../packages/expo-av/src/Audio/Recording\";import{makeStyles}from\"./styles\";export var AudioRecorder=function AudioRecorder(_ref){var onValueChanged=_ref.onValueChanged,_ref$isUpload=_ref.isUpload,isUpload=_ref$isUpload===void 0?false:_ref$isUpload,onStatusChanged=_ref.onStatusChanged,_ref$uploadPath=_ref.uploadPath,uploadPath=_ref$uploadPath===void 0?'/':_ref$uploadPath,_ref$isDebug=_ref.isDebug,isDebug=_ref$isDebug===void 0?false:_ref$isDebug;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,colors=_useBunnyKit.colors;var _useState=useState(),_useState2=_slicedToArray(_useState,2),recording=_useState2[0],setRecording=_useState2[1];var _useState3=useState('STOPPED'),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var styles=makeStyles(sizeLabor,themeLabor);useEffect(function(){onStatusChanged&&onStatusChanged(status);},[status]);function startRecording(){var _recording;return _regeneratorRuntime.async(function startRecording$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;isDebug&&console.log('Requesting permissions..');setStatus('GETTING_PERMISSION');_context.next=5;return _regeneratorRuntime.awrap(Audio.requestPermissionsAsync());case 5:_context.next=7;return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({allowsRecordingIOS:true,playsInSilentModeIOS:true}));case 7:setStatus('STARTING');isDebug&&console.log('Starting recording..');_recording=new Audio.Recording();_context.next=12;return _regeneratorRuntime.awrap(_recording.prepareToRecordAsync(RECORDING_OPTIONS_PRESET_HIGH_QUALITY));case 12:_context.next=14;return _regeneratorRuntime.awrap(_recording.startAsync());case 14:setRecording(_recording);setStatus('STARTED');isDebug&&console.log('Recording started');_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);setStatus('ERROR');isDebug&&console.error('Failed to start recording',_context.t0);case 23:case\"end\":return _context.stop();}}},null,null,[[0,19]],Promise);}function stopRecording(){var localURI,remoteURL;return _regeneratorRuntime.async(function stopRecording$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setStatus('STOPPING');isDebug&&console.log('Stopping recording..');if(recording){_context2.next=5;break;}setStatus('STOPPED');return _context2.abrupt(\"return\");case 5:_context2.next=7;return _regeneratorRuntime.awrap(recording.stopAndUnloadAsync());case 7:localURI=recording.getURI();isDebug&&console.log('---recording,uri',recording,localURI);if(localURI){_context2.next=12;break;}setStatus('STOPPED');return _context2.abrupt(\"return\");case 12:if(!isUpload){_context2.next=21;break;}_context2.next=15;return _regeneratorRuntime.awrap(uploadFileToFirebase(localURI,uploadPath));case 15:remoteURL=_context2.sent;isDebug&&console.log('Recording stopped and stored (remotely) at',remoteURL);setStatus('STOPPED');onValueChanged&&onValueChanged(remoteURL);_context2.next=24;break;case 21:setStatus('STOPPED');isDebug&&console.log('Recording stopped and stored (locally) at',localURI);onValueChanged&&onValueChanged(localURI);case 24:setRecording(undefined);case 25:case\"end\":return _context2.stop();}}},null,null,null,Promise);}var _longPress=function _longPress(){return _regeneratorRuntime.async(function _longPress$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=status;_context3.next=_context3.t0==='STOPPED'?3:7;break;case 3:Platform.OS!=='web'&&Vibration.vibrate([10,10]);_context3.next=6;return _regeneratorRuntime.awrap(startRecording());case 6:return _context3.abrupt(\"break\",8);case 7:return _context3.abrupt(\"break\",8);case 8:case\"end\":return _context3.stop();}}},null,null,null,Promise);};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),pressIn=_useState6[0],setPressIn=_useState6[1];var _pressIn=function _pressIn(){return _regeneratorRuntime.async(function _pressIn$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setPressIn(true);case 1:case\"end\":return _context4.stop();}}},null,null,null,Promise);};var _pressOut=function _pressOut(){return _regeneratorRuntime.async(function _pressOut$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setPressIn(false);_context5.next=3;return _regeneratorRuntime.awrap(stopRecording());case 3:case\"end\":return _context5.stop();}}},null,null,null,Promise);};return React.createElement(TouchableHighlight,{onPressIn:_pressIn,onLongPress:_longPress,onPressOut:_pressOut,underlayColor:colors.transparent,__self:_this,__source:{fileName:_jsxFileName,lineNumber:115,columnNumber:12}},React.createElement(IcoMoon,{name:\"mic1\",style:[styles.micIcon,pressIn&&styles.active],__self:_this,__source:{fileName:_jsxFileName,lineNumber:121,columnNumber:9}}));};","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/AudioRecorder/AudioRecorder.tsx"],"names":["AudioRecorder","onValueChanged","isUpload","onStatusChanged","uploadPath","isDebug","sizeLabor","themeLabor","colors","useBunnyKit","recording","setRecording","useState","status","setStatus","styles","makeStyles","useEffect","console","Audio","allowsRecordingIOS","playsInSilentModeIOS","localURI","remoteURL","uploadFileToFirebase","_longPress","Platform","Vibration","startRecording","pressIn","setPressIn","_pressIn","_pressOut","stopRecording"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {useBunnyKit} from '../../hooks/bunny-kit';\nimport {IcoMoon} from '../UI';\nimport {Platform, TouchableHighlight, Vibration} from 'react-native';\nimport {Audio} from '../../../packages/expo-av/src';\nimport {uploadFileToFirebase} from '../../helpers';\nimport {RECORDING_OPTIONS_PRESET_HIGH_QUALITY} from '../../../packages/expo-av/src/Audio/Recording';\nimport {makeStyles} from './styles';\n\nexport interface AudioRecorderProps {\n    onValueChanged?: (uri: string) => void,\n    isUpload?: boolean,\n    onStatusChanged?: (status: AudioRecordingStatus) => void,\n    uploadPath?: string,\n    isDebug?: boolean\n}\n\nexport type AudioRecordingStatus =\n    'GETTING_PERMISSION'\n    | 'STARTING'\n    | 'STARTED'\n    | 'RECORDING'\n    | 'STOPPING'\n    | 'STOPPED'\n    | 'ERROR'\n    | undefined;\nexport const AudioRecorder = ({\n                                  onValueChanged,\n                                  isUpload = false,\n                                  onStatusChanged,\n                                  uploadPath = '/',\n                                  isDebug = false\n                              }: AudioRecorderProps) => {\n    const {sizeLabor, themeLabor, colors} = useBunnyKit();\n    const [recording, setRecording] = useState<Audio.Recording>();\n    const [status, setStatus] = useState<AudioRecordingStatus>('STOPPED');\n\n    const styles = makeStyles(sizeLabor, themeLabor);\n    useEffect(() => {\n        onStatusChanged && onStatusChanged(status);\n    }, [status]);\n\n    async function startRecording() {\n        try {\n            isDebug && console.log('Requesting permissions..');\n            setStatus('GETTING_PERMISSION');\n            await Audio.requestPermissionsAsync();\n            await Audio.setAudioModeAsync({\n                allowsRecordingIOS: true,\n                playsInSilentModeIOS: true,\n            });\n            setStatus('STARTING');\n            isDebug && console.log('Starting recording..');\n            const recording = new Audio.Recording();\n            await recording.prepareToRecordAsync(RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\n            await recording.startAsync();\n            setRecording(recording);\n            setStatus('STARTED');\n            isDebug && console.log('Recording started');\n        } catch (err: any) {\n            setStatus('ERROR');\n            isDebug && console.error('Failed to start recording', err);\n        }\n    }\n\n    async function stopRecording() {\n        setStatus('STOPPING');\n        isDebug && console.log('Stopping recording..');\n\n        if (!recording) {\n            setStatus('STOPPED');\n            return;\n        }\n        await recording.stopAndUnloadAsync();\n        const localURI = recording.getURI();\n\n        isDebug && console.log('---recording,uri', recording, localURI);\n        if (!localURI) {\n            setStatus('STOPPED');\n            return;\n        }\n        if (isUpload) {\n            const remoteURL = await uploadFileToFirebase(localURI, uploadPath);\n            isDebug && console.log('Recording stopped and stored (remotely) at', remoteURL);\n            setStatus('STOPPED');\n            onValueChanged && onValueChanged(remoteURL);\n        } else {\n            setStatus('STOPPED');\n            isDebug && console.log('Recording stopped and stored (locally) at', localURI);\n            onValueChanged && onValueChanged(localURI);\n        }\n        setRecording(undefined);\n    }\n\n    const _longPress = async () => {\n        switch (status) {\n            case 'STOPPED':\n                Platform.OS !== 'web' && Vibration.vibrate([10, 10]);\n                await startRecording();\n                break;\n            default:\n                break;\n        }\n    };\n    const [pressIn, setPressIn] = useState(false);\n    const _pressIn = async () => {\n        setPressIn(true);\n    };\n    const _pressOut = async () => {\n        setPressIn(false);\n        await stopRecording();\n    };\n\n    return <TouchableHighlight\n        onPressIn={_pressIn}\n        onLongPress={_longPress}\n        onPressOut={_pressOut}\n        underlayColor={colors.transparent}\n    >\n        <IcoMoon name=\"mic1\" style={[styles.micIcon, pressIn && styles.active]}/>\n    </TouchableHighlight>;\n};\n"]},"metadata":{},"sourceType":"module"}