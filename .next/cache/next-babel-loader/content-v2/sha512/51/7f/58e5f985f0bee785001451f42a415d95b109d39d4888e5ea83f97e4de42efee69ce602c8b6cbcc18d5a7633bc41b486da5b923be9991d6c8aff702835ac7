{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React from'react';import{apiAuth}from\"../../helpers/auth-api\";import BunnyConstants,{EBizLogicMsg}from\"../../constants/constants\";import AsyncStorage from'@react-native-async-storage/async-storage';import*as Google from'expo-google-app-auth';import _,{identity,pickBy}from'lodash';import{bizLogicError,bizLogicSuccess}from\"../../helpers/helpers\";import{EventRegister}from'react-native-event-listeners';import{firebase}from\"../../firebase/firebase\";import*as Facebook from'expo-facebook';var config={loginAPIMethod:'PUT',loginAPIPath:'/api/auth/login',signUpAPIMethod:'POST',signUpAPIPath:'/api/auth/register',refreshAPIMethod:'PUT',refreshAPIPath:'/api/auth/refresh',accessTokenValuePath:'access_token',accessTokenExpValuePath:'access_token_exp',refreshTokenValuePath:'refresh_token',refreshTokenExpValuePath:'refresh_token_exp',userValuePath:'user',accessTokenPersistenceKey:BunnyConstants.ACCESS_TOKEN_PERSISTENCE_KEY,accessTokenExpPersistenceKey:BunnyConstants.ACCESS_TOKEN_EXP_PERSISTENCE_KEY,refreshTokenPersistenceKey:BunnyConstants.REFRESH_TOKEN_PERSISTENCE_KEY,refreshTokenExpPersistenceKey:BunnyConstants.REFRESH_TOKEN_EXP_PERSISTENCE_KEY,userPersistenceKey:BunnyConstants.USER_PERSISTENCE_KEY,storageType:'LOCAL_STORAGE'};var accessTokenPersistenceKey=config.accessTokenPersistenceKey,accessTokenExpValuePath=config.accessTokenExpValuePath,accessTokenExpPersistenceKey=config.accessTokenExpPersistenceKey,refreshTokenPersistenceKey=config.refreshTokenPersistenceKey,refreshTokenExpValuePath=config.refreshTokenExpValuePath,refreshTokenExpPersistenceKey=config.refreshTokenExpPersistenceKey,userPersistenceKey=config.userPersistenceKey,loginAPIPath=config.loginAPIPath,signUpAPIPath=config.signUpAPIPath,accessTokenValuePath=config.accessTokenValuePath,refreshAPIMethod=config.refreshAPIMethod,loginAPIMethod=config.loginAPIMethod,signUpAPIMethod=config.signUpAPIMethod,refreshAPIPath=config.refreshAPIPath,refreshTokenValuePath=config.refreshTokenValuePath,userValuePath=config.userValuePath;var persistenceAuth=function persistenceAuth(_ref){var accessToken,refreshToken,user,accessTokenExp,refreshTokenExp;return _regeneratorRuntime.async(function persistenceAuth$(_context){while(1){switch(_context.prev=_context.next){case 0:accessToken=_ref.accessToken,refreshToken=_ref.refreshToken,user=_ref.user,accessTokenExp=_ref.accessTokenExp,refreshTokenExp=_ref.refreshTokenExp;_context.prev=1;_context.t0=accessToken;if(!_context.t0){_context.next=6;break;}_context.next=6;return _regeneratorRuntime.awrap(AsyncStorage.setItem(accessTokenPersistenceKey,accessToken));case 6:_context.t1=accessTokenExp;if(!_context.t1){_context.next=10;break;}_context.next=10;return _regeneratorRuntime.awrap(AsyncStorage.setItem(accessTokenExpPersistenceKey,accessTokenExp.toString()));case 10:_context.t2=refreshTokenExp;if(!_context.t2){_context.next=14;break;}_context.next=14;return _regeneratorRuntime.awrap(AsyncStorage.setItem(refreshTokenExpPersistenceKey,refreshTokenExp.toString()));case 14:_context.t3=refreshToken;if(!_context.t3){_context.next=18;break;}_context.next=18;return _regeneratorRuntime.awrap(AsyncStorage.setItem(refreshTokenPersistenceKey,refreshToken));case 18:_context.t4=user;if(!_context.t4){_context.next=22;break;}_context.next=22;return _regeneratorRuntime.awrap(AsyncStorage.setItem(userPersistenceKey,JSON.stringify(user)));case 22:_context.next=27;break;case 24:_context.prev=24;_context.t5=_context[\"catch\"](1);console.error(_context.t5);case 27:case\"end\":return _context.stop();}}},null,null,[[1,24]],Promise);};var triggerLogin=function triggerLogin(result){var success,data;return _regeneratorRuntime.async(function triggerLogin$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:success=result.success,data=result.data;if(!success){_context2.next=4;break;}_context2.next=4;return _regeneratorRuntime.awrap(persistenceAuth(data));case 4:EventRegister.emit('login',result);_context2.next=7;return _regeneratorRuntime.awrap(checkIsLogin());case 7:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var loginOrSignUp=function loginOrSignUp(res){var result,data,accessToken,refreshToken,accessTokenExp,refreshTokenExp,user;return _regeneratorRuntime.async(function loginOrSignUp$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(res){_context3.next=5;break;}result=bizLogicError(EBizLogicMsg.NO_AUTH_API_RESPONDED);_context3.next=4;return _regeneratorRuntime.awrap(triggerLogin(result));case 4:return _context3.abrupt(\"return\",result);case 5:data=res.data.data;if(data){_context3.next=11;break;}result=bizLogicError(EBizLogicMsg.NO_DATA_RESPONDED);_context3.next=10;return _regeneratorRuntime.awrap(triggerLogin(result));case 10:return _context3.abrupt(\"return\",result);case 11:accessToken=_.get(data,accessTokenValuePath);refreshToken=_.get(data,refreshTokenValuePath);accessTokenExp=_.get(data,accessTokenExpValuePath);refreshTokenExp=_.get(data,refreshTokenExpValuePath);user=_.get(data,userValuePath);if(accessToken&&refreshToken){_context3.next=21;break;}result=bizLogicError(EBizLogicMsg.NO_ACCESS_TOKEN_OR_REFRESH_TOKEN_RESPONDED);_context3.next=20;return _regeneratorRuntime.awrap(triggerLogin(result));case 20:return _context3.abrupt(\"return\",result);case 21:if(user){_context3.next=26;break;}result=bizLogicError(EBizLogicMsg.NO_USER_INFO_RESPONDED);_context3.next=25;return _regeneratorRuntime.awrap(triggerLogin(result));case 25:return _context3.abrupt(\"return\",result);case 26:result=bizLogicSuccess({accessToken:accessToken,accessTokenExp:accessTokenExp,refreshToken:refreshToken,refreshTokenExp:refreshTokenExp,user:{bunnyUser:user}});_context3.next=29;return _regeneratorRuntime.awrap(triggerLogin(result));case 29:return _context3.abrupt(\"return\",result);case 30:case\"end\":return _context3.stop();}}},null,null,null,Promise);};var bunnyLogin=function bunnyLogin(params){var res;return _regeneratorRuntime.async(function bunnyLogin$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(apiAuth.request({method:loginAPIMethod,url:loginAPIPath,data:params}));case 2:res=_context4.sent;_context4.next=5;return _regeneratorRuntime.awrap(loginOrSignUp(res));case 5:return _context4.abrupt(\"return\",_context4.sent);case 6:case\"end\":return _context4.stop();}}},null,null,null,Promise);};var bunnySignUp=function bunnySignUp(params){var res;return _regeneratorRuntime.async(function bunnySignUp$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(apiAuth.request({method:signUpAPIMethod,url:signUpAPIPath,data:params}));case 2:res=_context5.sent;_context5.next=5;return _regeneratorRuntime.awrap(loginOrSignUp(res));case 5:return _context5.abrupt(\"return\",_context5.sent);case 6:case\"end\":return _context5.stop();}}},null,null,null,Promise);};var bunnyRefreshAuth=function bunnyRefreshAuth(){var refreshToken,res,result,data,accessToken,accessTokenExp;return _regeneratorRuntime.async(function bunnyRefreshAuth$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(refreshTokenPersistenceKey));case 2:refreshToken=_context6.sent;apiAuth.defaults.headers.common['Authorization']=\"Bearer \"+refreshToken;_context6.next=6;return _regeneratorRuntime.awrap(apiAuth.request({method:refreshAPIMethod,url:refreshAPIPath}));case 6:res=_context6.sent;if(res){_context6.next=11;break;}result=bizLogicError(EBizLogicMsg.NO_AUTH_API_RESPONDED);EventRegister.emit('bunnyRefreshAuth',result);return _context6.abrupt(\"return\",result);case 11:data=res.data.data;if(data){_context6.next=16;break;}result=bizLogicError(EBizLogicMsg.NO_DATA_RESPONDED);EventRegister.emit('bunnyRefreshAuth',result);return _context6.abrupt(\"return\",result);case 16:accessToken=_.get(data,accessTokenValuePath);accessTokenExp=_.get(data,accessTokenExpValuePath);if(accessToken){_context6.next=22;break;}result=bizLogicError(EBizLogicMsg.NO_ACCESS_TOKEN_RESPONDED);EventRegister.emit('bunnyRefreshAuth',result);return _context6.abrupt(\"return\",result);case 22:_context6.next=24;return _regeneratorRuntime.awrap(persistenceAuth({accessToken:accessToken,accessTokenExp:accessTokenExp}));case 24:result=bizLogicSuccess(accessToken);EventRegister.emit('bunnyRefreshAuth',result);return _context6.abrupt(\"return\",result);case 27:case\"end\":return _context6.stop();}}},null,null,null,Promise);};var logOut=function logOut(triggerType){var res,_await$removePersiste,success,message,result;return _regeneratorRuntime.async(function logOut$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _regeneratorRuntime.awrap(firebase.auth().signOut());case 2:res=_context7.sent;_context7.next=5;return _regeneratorRuntime.awrap(removePersistenceAuth());case 5:_await$removePersiste=_context7.sent;success=_await$removePersiste.success;message=_await$removePersiste.message;if(!success){_context7.next=19;break;}result=bizLogicSuccess(true);EventRegister.emit('LogOut',result);_context7.next=13;return _regeneratorRuntime.awrap(checkIsLogin());case 13:if(!triggerType){_context7.next=16;break;}_context7.next=16;return _regeneratorRuntime.awrap(authTrigger(triggerType));case 16:return _context7.abrupt(\"return\",result);case 19:result=bizLogicError(message);EventRegister.emit('LogOut',result);_context7.next=23;return _regeneratorRuntime.awrap(checkIsLogin());case 23:return _context7.abrupt(\"return\",result);case 24:case\"end\":return _context7.stop();}}},null,null,null,Promise);};var dummyLogin=function dummyLogin(){var accessToken,refreshToken,user,accessTokenExp,refreshTokenExp,result;return _regeneratorRuntime.async(function dummyLogin$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:accessToken='access_token_dummy';refreshToken='refresh_token_dummy';user={email:'dummy@dummy.com',nickname:'dummy nickname'};accessTokenExp='3043008000000';refreshTokenExp='3043008000000';result=bizLogicSuccess({accessToken:accessToken,accessTokenExp:accessTokenExp,refreshToken:refreshToken,refreshTokenExp:refreshTokenExp,user:user});_context8.next=8;return _regeneratorRuntime.awrap(triggerLogin(result));case 8:return _context8.abrupt(\"return\",result);case 9:case\"end\":return _context8.stop();}}},null,null,null,Promise);};var googleLogin=function googleLogin(isFirebase){var isStoreUser,googleResponse,result,idToken,accessToken,refreshToken,user,credential,userCredential,_args9=arguments;return _regeneratorRuntime.async(function googleLogin$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:isStoreUser=_args9.length>1&&_args9[1]!==undefined?_args9[1]:true;_context9.next=3;return _regeneratorRuntime.awrap(Google.logInAsync({iosClientId:\"885187778268-sa6e0rubaqe1idh6323trqfdi6giqcsq.apps.googleusercontent.com\",androidClientId:\"885187778268-nfajf46vtpsk8uro4o8m42tgdosbr638.apps.googleusercontent.com\",iosStandaloneAppClientId:\"885187778268-gpa16i4lra9rjllqeblif6rq33dut3av.apps.googleusercontent.com\",androidStandaloneAppClientId:\"885187778268-fp953l5m38bh81ibesd0ld4lboqaal9f.apps.googleusercontent.com\"}));case 3:googleResponse=_context9.sent;if(!googleResponse){result=bizLogicError(EBizLogicMsg.NO_GOOGLE_LOGIN_RESULT);}_context9.t0=googleResponse.type;_context9.next=_context9.t0==='cancel'?8:_context9.t0==='success'?10:26;break;case 8:result=bizLogicError(EBizLogicMsg.GOOGLE_LOGIN_CANCELED);return _context9.abrupt(\"break\",28);case 10:idToken=googleResponse.idToken,accessToken=googleResponse.accessToken,refreshToken=googleResponse.refreshToken,user=googleResponse.user;if(!accessToken||!refreshToken){result=bizLogicError(EBizLogicMsg.GOOGLE_ACCESS_TOKEN_OR_REFRESH_TOKEN_NOT_EXISTS);}if(!isFirebase){_context9.next=24;break;}_context9.next=15;return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL));case 15:credential=firebase.auth.GoogleAuthProvider.credential(idToken,accessToken);_context9.next=18;return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));case 18:userCredential=_context9.sent;_context9.next=21;return _regeneratorRuntime.awrap(firebaseLoginResult(userCredential,isStoreUser));case 21:result=_context9.sent;_context9.next=25;break;case 24:result=bizLogicSuccess({accessToken:accessToken,refreshToken:refreshToken,user:{googleUser:user}});case 25:return _context9.abrupt(\"break\",28);case 26:result=bizLogicError(EBizLogicMsg.GOOGLE_LOGIN_RESULT_TYPE_INVALID);return _context9.abrupt(\"break\",28);case 28:_context9.next=30;return _regeneratorRuntime.awrap(triggerLogin(result));case 30:return _context9.abrupt(\"return\",result);case 31:case\"end\":return _context9.stop();}}},null,null,null,Promise);};var firebaseLoginResult=function firebaseLoginResult(userCredential){var isStoreUser,idToken,user,currentUser,storedUser,_args10=arguments;return _regeneratorRuntime.async(function firebaseLoginResult$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:isStoreUser=_args10.length>1&&_args10[1]!==undefined?_args10[1]:true;if(!(!userCredential||!userCredential.user)){_context10.next=3;break;}return _context10.abrupt(\"return\",bizLogicError(EBizLogicMsg.FIREBASE_INVALID_USER_CREDENTIAL));case 3:currentUser=firebase.auth().currentUser;if(!currentUser){_context10.next=16;break;}_context10.next=7;return _regeneratorRuntime.awrap(currentUser.getIdToken());case 7:idToken=_context10.sent;user=currentUser.toJSON();if(!isStoreUser){_context10.next=13;break;}_context10.next=12;return _regeneratorRuntime.awrap(storeUserInfo(userCredential));case 12:storedUser=_context10.sent;case 13:return _context10.abrupt(\"return\",bizLogicSuccess({accessToken:idToken,refreshToken:user.refreshToken,user:{firebaseUser:user,storedUser:storedUser}}));case 16:return _context10.abrupt(\"return\",bizLogicError(EBizLogicMsg.FIREBASE_INVALID_CURRENT_USER));case 17:case\"end\":return _context10.stop();}}},null,null,null,Promise);};var facebookLogin=function facebookLogin(isFirebase){var isStoreUser,result,facebookResponse,type,token,credential,userCredential,facebookGetMeResponse,user,_args11=arguments;return _regeneratorRuntime.async(function facebookLogin$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:isStoreUser=_args11.length>1&&_args11[1]!==undefined?_args11[1]:true;_context11.next=3;return _regeneratorRuntime.awrap(Facebook.initializeAsync({appId:\"1077883556032942\"}));case 3:_context11.next=5;return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync({permissions:['public_profile','email']}));case 5:facebookResponse=_context11.sent;type=facebookResponse.type;_context11.t0=type;_context11.next=_context11.t0==='cancel'?10:_context11.t0==='success'?12:31;break;case 10:result=bizLogicError(EBizLogicMsg.FACEBOOK_LOGIN_CANCELED);return _context11.abrupt(\"break\",33);case 12:token=facebookResponse.token;if(!isFirebase){_context11.next=23;break;}credential=firebase.auth.FacebookAuthProvider.credential(token);_context11.next=17;return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));case 17:userCredential=_context11.sent;_context11.next=20;return _regeneratorRuntime.awrap(firebaseLoginResult(userCredential,isStoreUser));case 20:result=_context11.sent;_context11.next=30;break;case 23:_context11.next=25;return _regeneratorRuntime.awrap(fetch(\"https://graph.facebook.com/me?access_token=\"+token));case 25:facebookGetMeResponse=_context11.sent;_context11.next=28;return _regeneratorRuntime.awrap(facebookGetMeResponse.json());case 28:user=_context11.sent;result=bizLogicSuccess({accessToken:token,user:{facebookUser:user}});case 30:return _context11.abrupt(\"break\",33);case 31:result=bizLogicError(EBizLogicMsg.FACEBOOK_LOGIN_RESULT_TYPE_INVALID);return _context11.abrupt(\"break\",33);case 33:_context11.next=35;return _regeneratorRuntime.awrap(triggerLogin(result));case 35:return _context11.abrupt(\"return\",result);case 36:case\"end\":return _context11.stop();}}},null,null,null,Promise);};var firebaseEmailLogin=function firebaseEmailLogin(email,password){var isStoreUser,userCredential,result,_args12=arguments;return _regeneratorRuntime.async(function firebaseEmailLogin$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:isStoreUser=_args12.length>2&&_args12[2]!==undefined?_args12[2]:true;_context12.next=3;return _regeneratorRuntime.awrap(firebase.auth().signInWithEmailAndPassword(email,password));case 3:userCredential=_context12.sent;_context12.next=6;return _regeneratorRuntime.awrap(firebaseLoginResult(userCredential,isStoreUser));case 6:result=_context12.sent;_context12.next=9;return _regeneratorRuntime.awrap(triggerLogin(result));case 9:return _context12.abrupt(\"return\",result);case 10:case\"end\":return _context12.stop();}}},null,null,null,Promise);};var storeUserInfo=function storeUserInfo(userCredential){var _userCredential$user;var user,displayName,email,phoneNumber,photoURL,providerId,uid,extractedUser,cleanedExtractedUser,usersRef,userInfoSnapshot;return _regeneratorRuntime.async(function storeUserInfo$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:user=(_userCredential$user=userCredential.user)==null?void 0:_userCredential$user.toJSON();if(!user){_context13.next=14;break;}displayName=user.displayName,email=user.email,phoneNumber=user.phoneNumber,photoURL=user.photoURL,providerId=user.providerId,uid=user.uid;extractedUser={displayName:displayName,email:email,phoneNumber:phoneNumber,photoURL:photoURL,providerId:providerId,uid:uid};cleanedExtractedUser=pickBy(extractedUser,identity);usersRef=firebase.firestore().collection('users');_context13.next=8;return _regeneratorRuntime.awrap(usersRef.doc(uid).set(cleanedExtractedUser,{merge:true}));case 8:_context13.next=10;return _regeneratorRuntime.awrap(usersRef.doc(uid).get({source:'server'}));case 10:userInfoSnapshot=_context13.sent;return _context13.abrupt(\"return\",userInfoSnapshot.data());case 14:return _context13.abrupt(\"return\");case 15:case\"end\":return _context13.stop();}}},null,null,null,Promise);};var firebaseEmailSignUp=function firebaseEmailSignUp(email,password){var isStoreUser,userCredential,result,_args14=arguments;return _regeneratorRuntime.async(function firebaseEmailSignUp$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:isStoreUser=_args14.length>2&&_args14[2]!==undefined?_args14[2]:true;_context14.next=3;return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(email,password));case 3:userCredential=_context14.sent;_context14.next=6;return _regeneratorRuntime.awrap(firebaseLoginResult(userCredential,isStoreUser));case 6:result=_context14.sent;_context14.next=9;return _regeneratorRuntime.awrap(triggerLogin(result));case 9:return _context14.abrupt(\"return\",result);case 10:case\"end\":return _context14.stop();}}},null,null,null,Promise);};var firebaseSendOTP=function firebaseSendOTP(phoneInfoOptions,applicationVerifier){var phoneProvider,verificationId;return _regeneratorRuntime.async(function firebaseSendOTP$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:phoneProvider=new firebase.auth.PhoneAuthProvider();_context15.next=3;return _regeneratorRuntime.awrap(phoneProvider.verifyPhoneNumber(phoneInfoOptions,applicationVerifier));case 3:verificationId=_context15.sent;return _context15.abrupt(\"return\",bizLogicSuccess({verificationId:verificationId}));case 5:case\"end\":return _context15.stop();}}},null,null,null,Promise);};var firebaseConfirmOTP=function firebaseConfirmOTP(verificationId,verificationCode){var isStoreUser,credential,userCredential,result,_args16=arguments;return _regeneratorRuntime.async(function firebaseConfirmOTP$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:isStoreUser=_args16.length>2&&_args16[2]!==undefined?_args16[2]:true;credential=firebase.auth.PhoneAuthProvider.credential(verificationId,verificationCode);_context16.next=4;return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));case 4:userCredential=_context16.sent;_context16.next=7;return _regeneratorRuntime.awrap(firebaseLoginResult(userCredential,isStoreUser));case 7:result=_context16.sent;_context16.next=10;return _regeneratorRuntime.awrap(triggerLogin(result));case 10:return _context16.abrupt(\"return\",result);case 11:case\"end\":return _context16.stop();}}},null,null,null,Promise);};var firebaseResetPassword=function firebaseResetPassword(email){return _regeneratorRuntime.async(function firebaseResetPassword$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return _regeneratorRuntime.awrap(firebase.auth().sendPasswordResetEmail(email));case 2:return _context17.abrupt(\"return\",bizLogicSuccess(true));case 3:case\"end\":return _context17.stop();}}},null,null,null,Promise);};var removePersistenceAuth=function removePersistenceAuth(authParam){return _regeneratorRuntime.async(function removePersistenceAuth$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!(authParam&&authParam.length>0)){_context18.next=22;break;}_context18.t0=authParam.includes('accessToken');if(!_context18.t0){_context18.next=5;break;}_context18.next=5;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(accessTokenPersistenceKey));case 5:_context18.t1=authParam.includes('accessTokenExp');if(!_context18.t1){_context18.next=9;break;}_context18.next=9;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(accessTokenExpPersistenceKey));case 9:_context18.t2=authParam.includes('refreshToken');if(!_context18.t2){_context18.next=13;break;}_context18.next=13;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(refreshTokenPersistenceKey));case 13:_context18.t3=authParam.includes('refreshTokenExp');if(!_context18.t3){_context18.next=17;break;}_context18.next=17;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(refreshTokenExpPersistenceKey));case 17:_context18.t4=authParam.includes('user');if(!_context18.t4){_context18.next=21;break;}_context18.next=21;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(userPersistenceKey));case 21:return _context18.abrupt(\"return\",bizLogicSuccess(true));case 22:_context18.next=24;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(accessTokenPersistenceKey));case 24:_context18.next=26;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(accessTokenExpPersistenceKey));case 26:_context18.next=28;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(refreshTokenExpPersistenceKey));case 28:_context18.next=30;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(refreshTokenPersistenceKey));case 30:_context18.next=32;return _regeneratorRuntime.awrap(AsyncStorage.removeItem(userPersistenceKey));case 32:return _context18.abrupt(\"return\",bizLogicSuccess(true));case 33:case\"end\":return _context18.stop();}}},null,null,null,Promise);};var getPersistenceAuth=function getPersistenceAuth(){var accessToken,refreshToken,user,accessTokenExp,refreshTokenExp;return _regeneratorRuntime.async(function getPersistenceAuth$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(accessTokenPersistenceKey));case 2:accessToken=_context19.sent;_context19.next=5;return _regeneratorRuntime.awrap(AsyncStorage.getItem(refreshTokenPersistenceKey));case 5:refreshToken=_context19.sent;_context19.next=8;return _regeneratorRuntime.awrap(AsyncStorage.getItem(userPersistenceKey));case 8:user=_context19.sent;_context19.next=11;return _regeneratorRuntime.awrap(AsyncStorage.getItem(accessTokenExpPersistenceKey));case 11:accessTokenExp=_context19.sent;_context19.next=14;return _regeneratorRuntime.awrap(AsyncStorage.getItem(refreshTokenExpPersistenceKey));case 14:refreshTokenExp=_context19.sent;return _context19.abrupt(\"return\",{accessToken:accessToken,accessTokenExp:accessTokenExp,refreshToken:refreshToken,refreshTokenExp:refreshTokenExp,user:user?JSON.parse(user):undefined});case 16:case\"end\":return _context19.stop();}}},null,null,null,Promise);};var authTrigger=function authTrigger(triggerType){EventRegister.emit('authTrigger',triggerType);};var checkTokenExp=function checkTokenExp(){var itvID=setInterval(function _callee(){var refreshTokenExp,now,exp;return _regeneratorRuntime.async(function _callee$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.next=2;return _regeneratorRuntime.awrap(AsyncStorage.getItem(refreshTokenExpPersistenceKey));case 2:refreshTokenExp=_context20.sent;now=new Date();exp=new Date(0);if(!refreshTokenExp){_context20.next=10;break;}exp.setUTCSeconds(parseInt(refreshTokenExp));if(!(now>exp)){_context20.next=10;break;}_context20.next=10;return _regeneratorRuntime.awrap(logOut('AUTO'));case 10:case\"end\":return _context20.stop();}}},null,null,null,Promise);},1000);};var checkIsLogin=function checkIsLogin(){var _await$getPersistence,accessToken,isLogin;return _regeneratorRuntime.async(function checkIsLogin$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return _regeneratorRuntime.awrap(getPersistenceAuth());case 2:_await$getPersistence=_context21.sent;accessToken=_await$getPersistence.accessToken;isLogin=!!accessToken;EventRegister.emit('checkIsLogin',bizLogicSuccess(isLogin));return _context21.abrupt(\"return\",isLogin);case 7:case\"end\":return _context21.stop();}}},null,null,null,Promise);};export var authLaborContext={authFunctions:{bunnyLogin:bunnyLogin,googleLogin:googleLogin,facebookLogin:facebookLogin,firebaseSendOTP:firebaseSendOTP,firebaseConfirmOTP:firebaseConfirmOTP,firebaseEmailLogin:firebaseEmailLogin,firebaseEmailSignUp:firebaseEmailSignUp,firebaseResetPassword:firebaseResetPassword,dummyLogin:dummyLogin,logOut:logOut,bunnySignUp:bunnySignUp,bunnyRefreshAuth:bunnyRefreshAuth,getPersistenceAuth:getPersistenceAuth,authTrigger:authTrigger},authResult:{isLogin:false,accessToken:'',refreshToken:'',user:{},triggerUUID:'',triggerType:undefined,triggerReference:''}};export var AuthLaborContext=React.createContext(authLaborContext);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/providers/auth-labor/AuthLaborContext.tsx"],"names":["config","loginAPIMethod","loginAPIPath","signUpAPIMethod","signUpAPIPath","refreshAPIMethod","refreshAPIPath","accessTokenValuePath","accessTokenExpValuePath","refreshTokenValuePath","refreshTokenExpValuePath","userValuePath","accessTokenPersistenceKey","BunnyConstants","accessTokenExpPersistenceKey","refreshTokenPersistenceKey","refreshTokenExpPersistenceKey","userPersistenceKey","storageType","persistenceAuth","accessToken","refreshToken","user","accessTokenExp","refreshTokenExp","AsyncStorage","JSON","console","triggerLogin","success","data","result","EventRegister","checkIsLogin","loginOrSignUp","bizLogicError","EBizLogicMsg","res","_","bizLogicSuccess","bunnyUser","bunnyLogin","method","url","params","bunnySignUp","bunnyRefreshAuth","apiAuth","logOut","firebase","message","removePersistenceAuth","authTrigger","dummyLogin","email","nickname","googleLogin","isStoreUser","googleResponse","iosClientId","androidClientId","iosStandaloneAppClientId","androidStandaloneAppClientId","idToken","credential","userCredential","firebaseLoginResult","googleUser","currentUser","storedUser","storeUserInfo","firebaseUser","facebookLogin","appId","facebookResponse","permissions","type","token","facebookGetMeResponse","fetch","facebookUser","firebaseEmailLogin","displayName","phoneNumber","photoURL","providerId","uid","extractedUser","cleanedExtractedUser","pickBy","usersRef","merge","userInfoSnapshot","source","firebaseEmailSignUp","firebaseSendOTP","phoneProvider","verificationId","firebaseConfirmOTP","firebaseResetPassword","authParam","getPersistenceAuth","undefined","checkTokenExp","itvID","setInterval","now","exp","parseInt","isLogin","authLaborContext","authFunctions","authResult","triggerUUID","triggerType","triggerReference","AuthLaborContext","React"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    AuthContextConfig,\n    AuthLaborContextType,\n    AuthRes,\n    BizLogicResult,\n    LoginParams,\n    PersistenceAuthParam,\n    PersistenceAuthParamKey,\n    SignUpParams,\n    StoredUser,\n    TriggerType,\n    User,\n} from '../../types';\nimport {apiAuth} from '../../helpers/auth-api';\nimport BunnyConstants, {EBizLogicMsg} from '../../constants/constants';\nimport {AxiosResponse} from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as Google from 'expo-google-app-auth';\nimport {\n    ANDROID_CLIENT_ID,\n    ANDROID_CLIENT_ID_FOR_EXPO,\n    FACEBOOK_APP_ID,\n    IOS_CLIENT_ID,\n    IOS_CLIENT_ID_FOR_EXPO\n} from '@env';\nimport _, {identity, pickBy} from 'lodash';\nimport {bizLogicError, bizLogicSuccess} from '../../helpers/helpers';\nimport {EventRegister} from 'react-native-event-listeners';\nimport {firebase} from '../../firebase/firebase';\nimport * as Facebook from 'expo-facebook';\n\nconst config: AuthContextConfig = {\n    loginAPIMethod: 'PUT',\n    loginAPIPath: '/api/auth/login',\n    signUpAPIMethod: 'POST',\n    signUpAPIPath: '/api/auth/register',\n    refreshAPIMethod: 'PUT',\n    refreshAPIPath: '/api/auth/refresh',\n    accessTokenValuePath: 'access_token',\n    accessTokenExpValuePath: 'access_token_exp',\n    refreshTokenValuePath: 'refresh_token',\n    refreshTokenExpValuePath: 'refresh_token_exp',\n    userValuePath: 'user',\n    accessTokenPersistenceKey: BunnyConstants.ACCESS_TOKEN_PERSISTENCE_KEY,\n    accessTokenExpPersistenceKey: BunnyConstants.ACCESS_TOKEN_EXP_PERSISTENCE_KEY,\n    refreshTokenPersistenceKey: BunnyConstants.REFRESH_TOKEN_PERSISTENCE_KEY,\n    refreshTokenExpPersistenceKey: BunnyConstants.REFRESH_TOKEN_EXP_PERSISTENCE_KEY,\n    userPersistenceKey: BunnyConstants.USER_PERSISTENCE_KEY,\n    storageType: 'LOCAL_STORAGE',\n};\n\nconst {\n    accessTokenPersistenceKey, accessTokenExpValuePath,\n    accessTokenExpPersistenceKey,\n    refreshTokenPersistenceKey, refreshTokenExpValuePath, refreshTokenExpPersistenceKey,\n    userPersistenceKey,\n    loginAPIPath, signUpAPIPath, accessTokenValuePath, refreshAPIMethod,\n    loginAPIMethod, signUpAPIMethod, refreshAPIPath, refreshTokenValuePath,\n    userValuePath\n} = config;\n\nconst persistenceAuth = async ({\n                                   accessToken,\n                                   refreshToken,\n                                   user,\n                                   accessTokenExp,\n                                   refreshTokenExp\n                               }: PersistenceAuthParam) => {\n    try {\n        accessToken && await AsyncStorage.setItem(accessTokenPersistenceKey, accessToken);\n        accessTokenExp && await AsyncStorage.setItem(accessTokenExpPersistenceKey, accessTokenExp.toString());\n        refreshTokenExp && await AsyncStorage.setItem(refreshTokenExpPersistenceKey, refreshTokenExp.toString());\n        refreshToken && await AsyncStorage.setItem(refreshTokenPersistenceKey, refreshToken);\n        user && await AsyncStorage.setItem(userPersistenceKey, JSON.stringify(user));\n    } catch (e: any) {\n        console.error(e);\n    }\n\n};\n\nconst triggerLogin = async (result: BizLogicResult) => {\n    const {success, data} = result;\n    if (success) {\n        await persistenceAuth(data);\n    }\n    EventRegister.emit('login', result);\n    await checkIsLogin();\n};\n\nconst loginOrSignUp = async (res: any) => {\n    let result: BizLogicResult;\n    if (!res) {\n        result = bizLogicError(EBizLogicMsg.NO_AUTH_API_RESPONDED);\n        await triggerLogin(result);\n        return result;\n    }\n    const {data} = res.data;\n    if (!data) {\n        result = bizLogicError(EBizLogicMsg.NO_DATA_RESPONDED);\n        await triggerLogin(result);\n        return result;\n    }\n    const accessToken = _.get(data, accessTokenValuePath);\n    const refreshToken = _.get(data, refreshTokenValuePath);\n    const accessTokenExp = _.get(data, accessTokenExpValuePath);\n    const refreshTokenExp = _.get(data, refreshTokenExpValuePath);\n\n    const user = _.get(data, userValuePath);\n    if (!(accessToken && refreshToken)) {\n        result = bizLogicError(EBizLogicMsg.NO_ACCESS_TOKEN_OR_REFRESH_TOKEN_RESPONDED);\n        await triggerLogin(result);\n        return result;\n    }\n    if (!user) {\n        result = bizLogicError(EBizLogicMsg.NO_USER_INFO_RESPONDED);\n        await triggerLogin(result);\n        return result;\n    }\n\n    result = bizLogicSuccess({accessToken, accessTokenExp, refreshToken, refreshTokenExp, user: {bunnyUser: user}});\n    await triggerLogin(result);\n    return result;\n};\n\nconst bunnyLogin = async (params: LoginParams) => {\n    const res = await apiAuth.request<LoginParams, AxiosResponse<AuthRes>>({\n        method: loginAPIMethod,\n        url: loginAPIPath,\n        data: params\n    });\n    return await loginOrSignUp(res);\n};\n\nconst bunnySignUp = async (params: SignUpParams) => {\n    const res = await apiAuth.request({method: signUpAPIMethod, url: signUpAPIPath, data: params});\n    return await loginOrSignUp(res);\n};\n\nconst bunnyRefreshAuth = async (): Promise<BizLogicResult> => {\n    const refreshToken = await AsyncStorage.getItem(refreshTokenPersistenceKey);\n    apiAuth.defaults.headers.common['Authorization'] = `Bearer ${refreshToken}`;\n    const res = await apiAuth.request({method: refreshAPIMethod, url: refreshAPIPath});\n    let result: BizLogicResult;\n    if (!res) {\n        result = bizLogicError(EBizLogicMsg.NO_AUTH_API_RESPONDED);\n        EventRegister.emit('bunnyRefreshAuth', result);\n        return result;\n    }\n    const {data} = res.data;\n    if (!data) {\n        result = bizLogicError(EBizLogicMsg.NO_DATA_RESPONDED);\n        EventRegister.emit('bunnyRefreshAuth', result);\n        return result;\n    }\n    const accessToken = _.get(data, accessTokenValuePath);\n    const accessTokenExp = _.get(data, accessTokenExpValuePath);\n    if (!accessToken) {\n        result = bizLogicError(EBizLogicMsg.NO_ACCESS_TOKEN_RESPONDED);\n        EventRegister.emit('bunnyRefreshAuth', result);\n        return result;\n    }\n    await persistenceAuth({accessToken, accessTokenExp});\n    result = bizLogicSuccess(accessToken);\n    EventRegister.emit('bunnyRefreshAuth', result);\n    return result;\n};\n\nconst logOut = async (triggerType?: TriggerType) => {\n    // TODO not tested\n    const res = await firebase.auth().signOut();\n    const {success, message} = await removePersistenceAuth();\n    let result: BizLogicResult;\n    if (success) {\n        result = bizLogicSuccess(true);\n        EventRegister.emit('LogOut', result);\n        await checkIsLogin();\n        if (triggerType) {\n            await authTrigger(triggerType);\n        }\n        return result;\n    } else {\n        result = bizLogicError(message);\n        EventRegister.emit('LogOut', result);\n        await checkIsLogin();\n        return result;\n    }\n};\n\nconst dummyLogin = async () => {\n    const accessToken = 'access_token_dummy';\n    const refreshToken = 'refresh_token_dummy';\n    const user = {\n        email: 'dummy@dummy.com',\n        nickname: 'dummy nickname'\n    };\n    const accessTokenExp = '3043008000000';\n    const refreshTokenExp = '3043008000000';\n    const result = bizLogicSuccess({\n        accessToken,\n        accessTokenExp,\n        refreshToken,\n        refreshTokenExp,\n        user\n    });\n    await triggerLogin(result);\n    return result;\n};\n\nconst googleLogin = async (isFirebase: boolean, isStoreUser: boolean = true) => {\n    const googleResponse = await Google.logInAsync({\n        iosClientId: `${IOS_CLIENT_ID_FOR_EXPO}`,\n        androidClientId: `${ANDROID_CLIENT_ID_FOR_EXPO}`,\n        iosStandaloneAppClientId: `${IOS_CLIENT_ID}`,\n        androidStandaloneAppClientId: `${ANDROID_CLIENT_ID}`,\n    });\n    let result: BizLogicResult;\n    if (!googleResponse) {\n        result = bizLogicError(EBizLogicMsg.NO_GOOGLE_LOGIN_RESULT);\n    }\n    switch (googleResponse.type) {\n        case 'cancel':\n            result = bizLogicError(EBizLogicMsg.GOOGLE_LOGIN_CANCELED);\n            break;\n        case 'success':\n            const {idToken, accessToken, refreshToken, user} = googleResponse;\n            if (!accessToken || !refreshToken) {\n                result = bizLogicError(EBizLogicMsg.GOOGLE_ACCESS_TOKEN_OR_REFRESH_TOKEN_NOT_EXISTS);\n            }\n            if (isFirebase) {\n                await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n                const credential = firebase.auth.GoogleAuthProvider.credential(idToken, accessToken);\n                const userCredential = await firebase.auth().signInWithCredential(credential);\n                result = await firebaseLoginResult(userCredential, isStoreUser);\n            } else {\n                result = bizLogicSuccess({\n                    accessToken,\n                    refreshToken,\n                    user: {googleUser: user},\n                });\n            }\n            break;\n        default:\n            result = bizLogicError(EBizLogicMsg.GOOGLE_LOGIN_RESULT_TYPE_INVALID);\n            break;\n    }\n    await triggerLogin(result);\n    return result;\n};\n\nconst firebaseLoginResult = async (userCredential: firebase.auth.UserCredential, isStoreUser: boolean = true) => {\n    if (!userCredential || !userCredential.user) {\n        return bizLogicError(EBizLogicMsg.FIREBASE_INVALID_USER_CREDENTIAL);\n    }\n    let idToken: string, user: firebase.User;\n    const currentUser = firebase.auth().currentUser;\n    if (currentUser) {\n        idToken = await currentUser.getIdToken();\n        // todo in web platform firebase return value confused, mess fields need toJSON\n        user = currentUser.toJSON() as firebase.User;\n\n        let storedUser: StoredUser | undefined;\n        if (isStoreUser) {\n            storedUser = await storeUserInfo(userCredential);\n        }\n\n        return bizLogicSuccess({\n            accessToken: idToken,\n            refreshToken: user.refreshToken,\n            // accessTokenExp: user.expirationTime.toString(),\n            user: {firebaseUser: user, storedUser},\n        });\n    } else {\n        return bizLogicError(EBizLogicMsg.FIREBASE_INVALID_CURRENT_USER);\n    }\n};\n\nconst facebookLogin = async (isFirebase: boolean, isStoreUser: boolean = true) => {\n    let result: BizLogicResult;\n    await Facebook.initializeAsync({\n        appId: FACEBOOK_APP_ID,\n    });\n    const facebookResponse = await Facebook.logInWithReadPermissionsAsync({\n        permissions: ['public_profile', 'email'],\n    });\n    const {type} = facebookResponse;\n    switch (type) {\n        case 'cancel':\n            result = bizLogicError(EBizLogicMsg.FACEBOOK_LOGIN_CANCELED);\n            break;\n        case 'success':\n            // @ts-ignore\n            const {token} = facebookResponse;\n            if (isFirebase) {\n                const credential = firebase.auth.FacebookAuthProvider.credential(token);\n\n                const userCredential = await firebase.auth().signInWithCredential(credential);\n                result = await firebaseLoginResult(userCredential, isStoreUser);\n            } else {\n                // todo accessToken refreshToken not correct\n                // Get the user's name using Facebook's Graph API\n                const facebookGetMeResponse = await fetch(`https://graph.facebook.com/me?access_token=${token}`);\n                const user = await facebookGetMeResponse.json();\n                result = bizLogicSuccess({\n                    accessToken: token,\n                    user: {facebookUser: user},\n                });\n            }\n            break;\n        default :\n            result = bizLogicError(EBizLogicMsg.FACEBOOK_LOGIN_RESULT_TYPE_INVALID);\n            break;\n    }\n    await triggerLogin(result);\n    return result;\n};\n// firebase.auth().onAuthStateChanged((authUser) => {\n//     console.log(authUser)\n// });\n\n// firebase.auth().onIdTokenChanged(token => {})\n\nconst firebaseEmailLogin = async (email: string, password: string, isStoreUser: boolean = true) => {\n    const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);\n    const result = await firebaseLoginResult(userCredential, isStoreUser);\n\n    await triggerLogin(result);\n    return result;\n};\n\nconst storeUserInfo = async (userCredential: firebase.auth.UserCredential) => {\n    const user = userCredential.user?.toJSON() as firebase.UserInfo;\n    if (user) {\n        const {\n            displayName,\n            email,\n            phoneNumber,\n            photoURL,\n            providerId,\n            uid\n        } = user;\n\n        const extractedUser = {\n            displayName,\n            email,\n            phoneNumber,\n            photoURL,\n            providerId,\n            uid\n        };\n\n        const cleanedExtractedUser = pickBy(extractedUser, identity);\n\n        const usersRef = firebase.firestore().collection('users');\n        await usersRef.doc(uid).set(cleanedExtractedUser, {merge: true});\n        const userInfoSnapshot = await usersRef.doc(uid).get({source: 'server'});\n        return userInfoSnapshot.data() as StoredUser;\n    } else {\n        return;\n    }\n};\nconst firebaseEmailSignUp = async (email: string, password: string, isStoreUser: boolean = true) => {\n    const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);\n    const result = await firebaseLoginResult(userCredential, isStoreUser);\n    await triggerLogin(result);\n    return result;\n};\n\nconst firebaseSendOTP = async (phoneInfoOptions: firebase.auth.PhoneInfoOptions | string,\n                               applicationVerifier: firebase.auth.ApplicationVerifier) => {\n    const phoneProvider = new firebase.auth.PhoneAuthProvider();\n    const verificationId = await phoneProvider.verifyPhoneNumber(\n        phoneInfoOptions,\n        // @ts-ignore\n        applicationVerifier\n    );\n    return bizLogicSuccess({verificationId});\n};\n\nconst firebaseConfirmOTP = async (verificationId: string, verificationCode: string, isStoreUser: boolean = true) => {\n    const credential = firebase.auth.PhoneAuthProvider.credential(\n        verificationId,\n        verificationCode\n    );\n    const userCredential = await firebase.auth().signInWithCredential(credential);\n    const result = await firebaseLoginResult(userCredential, isStoreUser);\n    await triggerLogin(result);\n    return result;\n};\n\nconst firebaseResetPassword = async (email: string) => {\n    await firebase.auth().sendPasswordResetEmail(email);\n    return bizLogicSuccess(true);\n};\n\nconst removePersistenceAuth = async (authParam?: PersistenceAuthParamKey[]) => {\n    if (authParam && authParam.length > 0) {\n        authParam.includes('accessToken') && await AsyncStorage.removeItem(accessTokenPersistenceKey);\n        authParam.includes('accessTokenExp') && await AsyncStorage.removeItem(accessTokenExpPersistenceKey);\n        authParam.includes('refreshToken') && await AsyncStorage.removeItem(refreshTokenPersistenceKey);\n        authParam.includes('refreshTokenExp') && await AsyncStorage.removeItem(refreshTokenExpPersistenceKey);\n        authParam.includes('user') && await AsyncStorage.removeItem(userPersistenceKey);\n        return bizLogicSuccess(true);\n    }\n    await AsyncStorage.removeItem(accessTokenPersistenceKey);\n    await AsyncStorage.removeItem(accessTokenExpPersistenceKey);\n    await AsyncStorage.removeItem(refreshTokenExpPersistenceKey);\n    await AsyncStorage.removeItem(refreshTokenPersistenceKey);\n    await AsyncStorage.removeItem(userPersistenceKey);\n    return bizLogicSuccess(true);\n};\n\nconst getPersistenceAuth = async () => {\n    const accessToken = await AsyncStorage.getItem(accessTokenPersistenceKey);\n    const refreshToken = await AsyncStorage.getItem(refreshTokenPersistenceKey);\n    const user = await AsyncStorage.getItem(userPersistenceKey);\n    const accessTokenExp = await AsyncStorage.getItem(accessTokenExpPersistenceKey);\n    const refreshTokenExp = await AsyncStorage.getItem(refreshTokenExpPersistenceKey);\n    return {\n        accessToken,\n        accessTokenExp,\n        refreshToken,\n        refreshTokenExp,\n        user: user ? JSON.parse(user) as User : undefined\n    };\n};\n\nconst authTrigger = (triggerType: TriggerType) => {\n    EventRegister.emit('authTrigger', triggerType);\n};\n\nconst checkTokenExp = () => {\n    const itvID = setInterval(async () => {\n        const refreshTokenExp = await AsyncStorage.getItem(refreshTokenExpPersistenceKey);\n        const now = new Date();\n        let exp = new Date(0);\n        if (refreshTokenExp) {\n            exp.setUTCSeconds(parseInt(refreshTokenExp));\n            if (now > exp) {\n                await logOut('AUTO');\n                // clearInterval(itvID)\n            }\n        }\n    }, 1000);\n};\n\nconst checkIsLogin = async () => {\n    const {accessToken} = await getPersistenceAuth();\n    let isLogin = !!accessToken;\n    EventRegister.emit('checkIsLogin', bizLogicSuccess(isLogin));\n    return isLogin;\n};\n\nexport const authLaborContext: AuthLaborContextType = {\n    authFunctions: {\n        bunnyLogin,\n        googleLogin,\n        facebookLogin,\n        firebaseSendOTP,\n        firebaseConfirmOTP,\n        firebaseEmailLogin,\n        firebaseEmailSignUp,\n        firebaseResetPassword,\n        dummyLogin,\n        logOut,\n        bunnySignUp,\n        bunnyRefreshAuth,\n        getPersistenceAuth,\n        authTrigger\n    },\n    authResult: {\n        isLogin: false,\n        accessToken: '',\n        refreshToken: '',\n        user: {},\n        triggerUUID: '',\n        triggerType: undefined,\n        triggerReference: ''\n    }\n};\n\nexport const AuthLaborContext = React.createContext<AuthLaborContextType>(authLaborContext);\n"]},"metadata":{},"sourceType":"module"}