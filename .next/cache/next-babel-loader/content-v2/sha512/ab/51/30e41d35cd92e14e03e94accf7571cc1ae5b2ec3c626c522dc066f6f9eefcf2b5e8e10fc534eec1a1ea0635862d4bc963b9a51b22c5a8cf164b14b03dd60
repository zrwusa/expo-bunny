{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{ButtonTO,IcoMoon,InButtonText,Text,TextButton,View}from\"../UI\";import{Col,Row}from\"../../containers\";import*as React from'react';import{useEffect,useState}from'react';import{useBunnyKit}from\"../../hooks/bunny-kit\";import{getSharedStyles}from\"../../helpers\";import{makeStyles}from\"./styles\";import Modal from'react-native-modal';import{Divider}from\"../Divider\";import FlatList from\"react-native-web/dist/exports/FlatList\";import{dictionaries}from\"./dictionaries\";import{Checkbox}from'react-native-paper';import lodash from'lodash';import{capitalizeWords}from\"../../utils\";import{InlineSelector}from\"../InlineSelector\";export var InterestPicker=function InterestPicker(props){var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,wp=_useBunnyKit.wp,colors=_useBunnyKit.colors;var onDone=props.onDone,_props$type=props.type,type=_props$type===void 0?'edit':_props$type,_props$initialSports=props.initialSports,initialSports=_props$initialSports===void 0?[{name:'ATV',code:'A0001'}]:_props$initialSports,_props$initialMusics=props.initialMusics,initialMusics=_props$initialMusics===void 0?[]:_props$initialMusics,_props$initialFoods=props.initialFoods,initialFoods=_props$initialFoods===void 0?[]:_props$initialFoods,_props$initialMovies=props.initialMovies,initialMovies=_props$initialMovies===void 0?[]:_props$initialMovies,_props$initialBooks=props.initialBooks,initialBooks=_props$initialBooks===void 0?[]:_props$initialBooks,_props$initialTravels=props.initialTravels,initialTravels=_props$initialTravels===void 0?[]:_props$initialTravels;var _getSharedStyles=getSharedStyles(sizeLabor,themeLabor),sharedStyles=_getSharedStyles.sharedStyles;var styles=makeStyles(sizeLabor,themeLabor);var _reset=function _reset(){};var _useState=useState({sports:initialSports,musics:initialMusics,foods:initialFoods,movies:initialMovies,books:initialBooks,travels:initialTravels}),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var _useState5=useState('musics'),_useState6=_slicedToArray(_useState5,2),modalType=_useState6[0],setModalType=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),checkState=_useState8[0],setCheckState=_useState8[1];var _toggleModal=function _toggleModal(type){setModalType(type);var newCheckState={};dictionaries[type].forEach(function(item){newCheckState[item.code]='unchecked';});var interests=result[type];interests.forEach(function(interest){newCheckState[interest.code]='checked';});setCheckState(function(prev){return newCheckState;});setShowModal(!showModal);};useEffect(function(){onDone==null?void 0:onDone(result);},[result]);return React.createElement(View,{style:[styles.container]},React.createElement(View,null,React.createElement(InlineSelector,{title:\"Sports\",onPress:function onPress(){_toggleModal('sports');},renderText:function renderText(){return result.sports.map(function(item){return item.name;}).join(',');}}),React.createElement(Divider,null),React.createElement(InlineSelector,{title:\"Musics\",onPress:function onPress(){_toggleModal('musics');},renderText:function renderText(){return result.musics.map(function(item){return item.name;}).join(',');}}),React.createElement(Divider,null),React.createElement(InlineSelector,{title:\"Foods\",onPress:function onPress(){_toggleModal('foods');},renderText:function renderText(){return result.foods.map(function(item){return item.name;}).join(',');}}),React.createElement(Divider,null),React.createElement(InlineSelector,{title:\"Movies\",onPress:function onPress(){_toggleModal('movies');},renderText:function renderText(){return result.movies.map(function(item){return item.name;}).join(',');}}),React.createElement(Divider,null),React.createElement(InlineSelector,{title:\"Books\",onPress:function onPress(){_toggleModal('books');},renderText:function renderText(){return result.books.map(function(item){return item.name;}).join(',');}}),React.createElement(Divider,null),React.createElement(InlineSelector,{title:\"Travels\",onPress:function onPress(){_toggleModal('travels');},renderText:function renderText(){return result.travels.map(function(item){return item.name;}).join(',');}})),React.createElement(Modal,{isVisible:showModal,propagateSwipe:true,onSwipeComplete:function onSwipeComplete(){return setShowModal(false);},swipeDirection:\"down\",style:styles.modal,onBackdropPress:function onBackdropPress(){return setShowModal(false);}},React.createElement(View,{style:styles.modalContainer},React.createElement(View,{style:styles.header},React.createElement(Row,null,React.createElement(Col,null,React.createElement(TextButton,{onPress:function onPress(){setShowModal(false);}},React.createElement(IcoMoon,{name:\"x\"}))),React.createElement(Col,{align:\"center\"},React.createElement(Text,{style:sharedStyles.title},capitalizeWords(modalType))),React.createElement(Col,{align:\"flex-end\"},React.createElement(TextButton,{onPress:_reset},React.createElement(Text,{style:[sharedStyles.text2,{paddingVertical:wp(10),paddingHorizontal:wp(5)}]},\"Reset\"))))),React.createElement(Divider,null),React.createElement(View,{style:styles.content},React.createElement(FlatList,{style:{height:wp(400)},data:dictionaries[modalType],keyExtractor:function keyExtractor(item){return item.code;},renderItem:function renderItem(_ref){var item=_ref.item;return React.createElement(Checkbox.Item,{labelStyle:sharedStyles.text2,label:item.name,color:colors.primary,status:checkState[item.code],onPress:function onPress(){var newStatus='unchecked';switch(checkState[item.code]){case'checked':newStatus='unchecked';break;case'unchecked':newStatus='checked';break;case'indeterminate':newStatus='checked';break;}setCheckState(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},item.code,newStatus));});}});}})),React.createElement(View,{style:[styles.footer]},React.createElement(ButtonTO,{onPress:function onPress(){_toggleModal('musics');var checked=lodash.pickBy(checkState,function(value){return value==='checked';});var checkedKeys=Object.keys(checked);var checkedInterests=dictionaries[modalType].filter(function(item){return checkedKeys.includes(item.code);});setResult(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},modalType,checkedInterests));});}},React.createElement(InButtonText,null,\"Done\"))))));};","map":null,"metadata":{},"sourceType":"module"}