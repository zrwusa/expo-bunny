{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useEffect,useState}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import View from\"react-native-web/dist/exports/View\";import{PanGestureHandler,State}from'react-native-gesture-handler';import{useBunnyKit}from\"../../../src/hooks/bunny-kit\";var SMALL_SIZE=24;var MEDIUM_SIZE=34;var LARGE_SIZE=44;var osRtl=I18nManager.isRTL;export default(function(props){var _useBunnyKit=useBunnyKit(),colors=_useBunnyKit.colors;var min=props.min,max=props.max,fromValueOnChange=props.fromValueOnChange,toValueOnChange=props.toValueOnChange,_props$step=props.step,step=_props$step===void 0?1:_props$step,_props$styleSize=props.styleSize,styleSize=_props$styleSize===void 0?'medium':_props$styleSize,_props$fromKnobColor=props.fromKnobColor,fromKnobColor=_props$fromKnobColor===void 0?colors.primary:_props$fromKnobColor,_props$toKnobColor=props.toKnobColor,toKnobColor=_props$toKnobColor===void 0?colors.primary:_props$toKnobColor,_props$inRangeBarColo=props.inRangeBarColor,inRangeBarColor=_props$inRangeBarColo===void 0?colors.primary:_props$inRangeBarColo,_props$outOfRangeBarC=props.outOfRangeBarColor,outOfRangeBarColor=_props$outOfRangeBarC===void 0?colors.divider:_props$outOfRangeBarC,_props$valueLabelsTex=props.valueLabelsTextColor,valueLabelsTextColor=_props$valueLabelsTex===void 0?colors.text2:_props$valueLabelsTex,_props$valueLabelsBac=props.valueLabelsBackgroundColor,valueLabelsBackgroundColor=_props$valueLabelsBac===void 0?'#3a4766':_props$valueLabelsBac,_props$rangeLabelsTex=props.rangeLabelsTextColor,rangeLabelsTextColor=_props$rangeLabelsTex===void 0?'rgb(60,60,60)':_props$rangeLabelsTex,_props$showRangeLabel=props.showRangeLabels,showRangeLabels=_props$showRangeLabel===void 0?true:_props$showRangeLabel,_props$showValueLabel=props.showValueLabels,showValueLabels=_props$showValueLabel===void 0?true:_props$showValueLabel,initialFromValue=props.initialFromValue,initialToValue=props.initialToValue,_props$valueLabelsPos=props.valueLabelsPosition,valueLabelsPosition=_props$valueLabelsPos===void 0?'down':_props$valueLabelsPos,_props$showBubbles=props.showBubbles,showBubbles=_props$showBubbles===void 0?false:_props$showBubbles,_props$showValueLabel2=props.showValueLabelsOnlyWhenDrag,showValueLabelsOnlyWhenDrag=_props$showValueLabel2===void 0?false:_props$showValueLabel2,_props$valueLabelsUni=props.valueLabelsUnit,valueLabelsUnit=_props$valueLabelsUni===void 0?'':_props$valueLabelsUni,fromValueOnIndicated=props.fromValueOnIndicated,toValueOnIndicated=props.toValueOnIndicated;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),wasInitialized=_useState2[0],setWasInitialized=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),knobSize=_useState4[0],setKnobSize=_useState4[1];var _useState5=useState(15),_useState6=_slicedToArray(_useState5,2),fontSize=_useState6[0],setFontSize=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),stepInPixels=_useState8[0],setStepInPixels=_useState8[1];var _useState9=useState('row'),_useState10=_slicedToArray(_useState9,2),flexDirection=_useState10[0],setFlexDirection=_useState10[1];var _useState11=useState({left:(knobSize-40)/2}),_useState12=_slicedToArray(_useState11,2),svgOffset=_useState12[0],setSvgOffset=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),fromValueOffset=_useState14[0],setFromValueOffset=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),toValueOffset=_useState16[0],setToValueOffset=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),sliderWidth=_useState18[0],setSliderWidth=_useState18[1];var _useState19=useState(3),_useState20=_slicedToArray(_useState19,2),fromElevation=_useState20[0],setFromElevation=_useState20[1];var _useState21=useState(3),_useState22=_slicedToArray(_useState21,2),toElevation=_useState22[0],setToElevation=_useState22[1];var _useState23=useState(new Animated.Value(0)),_useState24=_slicedToArray(_useState23,1),translateXFromValue=_useState24[0];var _useState25=useState(new Animated.Value(0)),_useState26=_slicedToArray(_useState25,1),translateXtoValue=_useState26[0];var _useState27=useState(new Animated.Value(showValueLabelsOnlyWhenDrag?0.01:1)),_useState28=_slicedToArray(_useState27,1),fromValueScale=_useState28[0];var _useState29=useState(new Animated.Value(showValueLabelsOnlyWhenDrag?0.01:1)),_useState30=_slicedToArray(_useState29,1),toValueScale=_useState30[0];var _useState31=useState(new Animated.Value(0.01)),_useState32=_slicedToArray(_useState31,1),rightBarScaleX=_useState32[0];var _useState33=useState(new Animated.Value(0.01)),_useState34=_slicedToArray(_useState33,1),leftBarScaleX=_useState34[0];var toValueTextRef=React.createRef();var fromValueTextRef=React.createRef();var opacity=React.useRef(new Animated.Value(0)).current;useEffect(function(){setFlexDirection(osRtl?'row-reverse':'row');setSvgOffset(osRtl?{right:(knobSize-40)/2}:{left:(knobSize-40)/2});},[knobSize]);useEffect(function(){if(wasInitialized){var _fromValueTextRef$cur,_toValueTextRef$curre;var stepSize=setStepSize(max,min,step);(_fromValueTextRef$cur=fromValueTextRef.current)==null?void 0:_fromValueTextRef$cur.setNativeProps({text:min.toString()+valueLabelsUnit});(_toValueTextRef$curre=toValueTextRef.current)==null?void 0:_toValueTextRef$curre.setNativeProps({text:max.toString()+valueLabelsUnit});if(typeof initialFromValue==='number'&&initialFromValue>=min&&initialFromValue<=max){var offset=(initialFromValue-min)/step*stepSize-knobSize/2;setFromValueStatic(offset,knobSize,stepSize);setValueText(offset,true);}if(typeof initialToValue==='number'&&initialToValue>=min&&initialToValue<=max&&typeof initialFromValue==='number'&&initialToValue>initialFromValue){var _offset=(initialToValue-min)/step*stepSize-knobSize/2;setToValueStatic(_offset,knobSize,stepSize);setValueText(_offset,false);}Animated.timing(opacity,{toValue:1,duration:64,useNativeDriver:true}).start();}},[min,max,step,initialFromValue,initialToValue,wasInitialized]);var sizeMap={'small':SMALL_SIZE,'medium':MEDIUM_SIZE,'large':LARGE_SIZE};useEffect(function(){var size=typeof styleSize==='number'?styleSize:sizeMap[styleSize];setKnobSize(size);translateXFromValue.setValue(-size/4);},[styleSize]);var calculateFromValue=function calculateFromValue(newOffset,knobSize,stepInPixels){return Math.floor((newOffset+knobSize/2)/stepInPixels)*stepInPixels-knobSize/2;};var setFromValueStatic=function setFromValueStatic(newOffset,knobSize,stepInPixels){newOffset=calculateFromValue(newOffset,knobSize,stepInPixels);setFromValue(newOffset);setFromValueOffset(newOffset);fromValueOnChange(Math.floor((newOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min);};var setFromValue=function setFromValue(newOffset){translateXFromValue.setValue(newOffset);leftBarScaleX.setValue((newOffset+knobSize/2)/sliderWidth+0.01);};var calculateToValue=function calculateToValue(newOffset,knobSize,stepInPixels){return Math.ceil((newOffset+knobSize/2)/stepInPixels)*stepInPixels-knobSize/2;};var setToValueStatic=function setToValueStatic(newOffset,knobSize,stepInPixels){newOffset=calculateToValue(newOffset,knobSize,stepInPixels);setToValue(newOffset);setToValueOffset(newOffset);toValueOnChange(Math.ceil((newOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min);};var setToValue=function setToValue(newOffset){translateXtoValue.setValue(newOffset);rightBarScaleX.setValue(1.01-(newOffset+knobSize/2)/sliderWidth);};var setStepSize=function setStepSize(max,min,step){var numberOfSteps=(max-min)/step;var stepSize=sliderWidth/numberOfSteps;setStepInPixels(stepSize);return stepSize;};var setValueText=function setValueText(totalOffset){var isFrom=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(isFrom&&fromValueTextRef!=null){var _fromValueTextRef$cur2;var numericValue=Math.floor((totalOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min;fromValueOnIndicated==null?void 0:fromValueOnIndicated(numericValue);(_fromValueTextRef$cur2=fromValueTextRef.current)==null?void 0:_fromValueTextRef$cur2.setNativeProps({text:numericValue.toString()+valueLabelsUnit});}else if(!isFrom&&toValueTextRef!=null){var _toValueTextRef$curre2;var _numericValue=Math.ceil((totalOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min;toValueOnIndicated==null?void 0:toValueOnIndicated(_numericValue);(_toValueTextRef$curre2=toValueTextRef.current)==null?void 0:_toValueTextRef$curre2.setNativeProps({text:_numericValue.toString()+valueLabelsUnit});}};var onGestureEventFromValue=function onGestureEventFromValue(event){var totalOffset=event.nativeEvent.translationX+fromValueOffset;if(totalOffset>=-knobSize/2&&totalOffset<toValueOffset){translateXFromValue.setValue(totalOffset);setValueText(totalOffset,true);leftBarScaleX.setValue((totalOffset+knobSize/2)/sliderWidth+0.01);}};var onHandlerStateChangeFromValue=function onHandlerStateChangeFromValue(event){if(event.nativeEvent.state===State.BEGAN){if(showValueLabelsOnlyWhenDrag)scaleTo(fromValueScale,1);setElevations(6,5);}if(event.nativeEvent.state===State.END){var newOffset=event.nativeEvent.translationX+fromValueOffset;newOffset=calculateFromValue(newOffset,knobSize,stepInPixels);if(newOffset<-knobSize/2){newOffset=-knobSize/2;}else if(newOffset>=toValueOffset){newOffset=toValueOffset-stepInPixels;}setFromValueStatic(newOffset,knobSize,stepInPixels);if(showValueLabelsOnlyWhenDrag)scaleTo(fromValueScale,0.01);}};var onGestureEventToValue=function onGestureEventToValue(event){var totalOffset=event.nativeEvent.translationX+toValueOffset;if(totalOffset<=sliderWidth-knobSize/2&&totalOffset>fromValueOffset){translateXtoValue.setValue(totalOffset);setValueText(totalOffset,false);rightBarScaleX.setValue(1.01-(totalOffset+knobSize/2)/sliderWidth);}};var onHandlerStateChangeToValue=function onHandlerStateChangeToValue(event){if(event.nativeEvent.state===State.BEGAN){if(showValueLabelsOnlyWhenDrag)scaleTo(toValueScale,1);setElevations(5,6);}if(event.nativeEvent.state===State.END){var newOffset=event.nativeEvent.translationX+toValueOffset;newOffset=calculateToValue(newOffset,knobSize,stepInPixels);if(newOffset>sliderWidth-knobSize/2){newOffset=sliderWidth-knobSize/2;}else if(newOffset<=fromValueOffset){newOffset=fromValueOffset+stepInPixels;}setToValueOffset(newOffset);translateXtoValue.setValue(newOffset);rightBarScaleX.setValue(1.01-(newOffset+knobSize/2)/sliderWidth);if(showValueLabelsOnlyWhenDrag)scaleTo(toValueScale,0.01);toValueOnChange(Math.ceil((newOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min);}};var scaleTo=function scaleTo(param,toValue){return Animated.timing(param,{toValue:toValue,duration:150,useNativeDriver:true}).start();};var setElevations=function setElevations(fromValue,toValue){setFromElevation(fromValue);setToElevation(toValue);};var onLayout=function onLayout(event){if(!wasInitialized){var width=event.nativeEvent.layout.width;setSliderWidth(width);translateXtoValue.setValue(width-knobSize/2);setToValueOffset(width-knobSize/2);setWasInitialized(true);}};var bubbleSizeMap={'small':{width:20,height:28},'medium':{width:40,height:56},'large':{width:50,height:70}};var bubbleSize=typeof styleSize==='number'?{width:styleSize,height:styleSize}:bubbleSizeMap[styleSize];var bubbleBottomValue=typeof styleSize==='number'?styleSize:bubbleSizeMap[styleSize].height;var bubbleBottom=valueLabelsPosition==='up'?0:-bubbleBottomValue;var renderValueLabels=function renderValueLabels(){return showValueLabels&&React.createElement(View,{style:{width:'100%',height:1,flexDirection:flexDirection}},React.createElement(Animated.View,{style:{position:'absolute',bottom:0,left:0,transform:[{translateX:translateXFromValue},{scale:fromValueScale}]}},showBubbles?React.createElement(View,{style:[svgOffset,_objectSpread(_objectSpread({},bubbleSize),{},{justifyContent:'center',alignItems:'center',position:'absolute',bottom:bubbleBottom,backgroundColor:'red'})]}):null,React.createElement(TextInput,{editable:false,style:{position:'absolute',width:50,textAlign:'center',left:-50/4,color:valueLabelsTextColor,bottom:valueLabelsPosition==='up'?18:-18},ref:fromValueTextRef})),React.createElement(Animated.View,{style:{position:'absolute',bottom:0,left:0,alignItems:'center',transform:[{translateX:translateXtoValue},{scale:toValueScale}]}},showBubbles?React.createElement(View,{style:[svgOffset,_objectSpread(_objectSpread({},bubbleSize),{},{justifyContent:'center',alignItems:'center',position:'absolute',bottom:bubbleBottom,backgroundColor:'red'})]}):null,React.createElement(TextInput,{editable:false,style:{position:'absolute',width:50,textAlign:'center',left:-50/4,color:valueLabelsTextColor,bottom:valueLabelsPosition==='up'?18:-18},ref:toValueTextRef})));};var paddingSizeMap={'small':21,'medium':14,'large':7};var styles=getStyle(knobSize);return React.createElement(Animated.View,{style:[styles.container,{opacity:opacity,padding:typeof styleSize==='number'?styleSize/2:paddingSizeMap[styleSize]}]},valueLabelsPosition==='up'?renderValueLabels():null,React.createElement(View,{style:{width:'100%',height:knobSize,marginVertical:4,position:'relative',flexDirection:flexDirection,alignItems:'center'}},React.createElement(View,{style:{position:'absolute',backgroundColor:inRangeBarColor,left:knobSize/4,marginLeft:-knobSize/4,right:knobSize/4,height:knobSize/3},onLayout:onLayout}),React.createElement(Animated.View,{style:{position:'absolute',left:knobSize/4,marginLeft:-knobSize/4,right:knobSize/4,height:knobSize/3,backgroundColor:outOfRangeBarColor,transform:[{translateX:sliderWidth/2},{scaleX:rightBarScaleX},{translateX:-sliderWidth/2}]}}),React.createElement(Animated.View,{style:{position:'absolute',left:-knobSize/4,width:knobSize/2,height:knobSize/3,borderRadius:knobSize/3,backgroundColor:outOfRangeBarColor}}),React.createElement(Animated.View,{style:{width:sliderWidth,height:knobSize/3,backgroundColor:outOfRangeBarColor,transform:[{translateX:-sliderWidth/2},{scaleX:leftBarScaleX},{translateX:sliderWidth/2}]}}),React.createElement(Animated.View,{style:{position:'absolute',left:sliderWidth-knobSize/4,width:knobSize/2,height:knobSize/3,borderRadius:knobSize/3,backgroundColor:outOfRangeBarColor}}),React.createElement(PanGestureHandler,{onGestureEvent:onGestureEventFromValue,onHandlerStateChange:onHandlerStateChangeFromValue},React.createElement(Animated.View,{style:[styles.knob1,{backgroundColor:fromKnobColor,elevation:fromElevation,transform:[{translateX:translateXFromValue}]}]},React.createElement(Text,{style:styles.knobInnerDivider},\"| | |\"))),React.createElement(PanGestureHandler,{onGestureEvent:onGestureEventToValue,onHandlerStateChange:onHandlerStateChangeToValue},React.createElement(Animated.View,{style:[styles.knob1,{backgroundColor:toKnobColor,elevation:toElevation,transform:[{translateX:translateXtoValue}]}]},React.createElement(Text,{style:styles.knobInnerDivider},\"| | |\")))),valueLabelsPosition==='down'?renderValueLabels():null,showRangeLabels?React.createElement(View,{style:{width:'100%',flexDirection:flexDirection,justifyContent:'space-between'}},React.createElement(Text,{style:{color:rangeLabelsTextColor,fontWeight:'bold',fontSize:fontSize}},min),React.createElement(Text,{style:{color:rangeLabelsTextColor,fontWeight:'bold',fontSize:fontSize}},max)):null);});var getStyle=function getStyle(knobSize){return StyleSheet.create({container:{},knob:{position:'absolute',elevation:4},knob1:{height:knobSize,width:2*knobSize,left:-(0.5*knobSize),borderRadius:0.5*knobSize,position:'absolute',flexDirection:'row',justifyContent:'center',alignItems:'center',elevation:4},knobInnerDivider:{marginHorizontal:3*knobSize/40,fontSize:18*knobSize/40,lineHeight:18*knobSize/40,color:'white'}});};","map":null,"metadata":{},"sourceType":"module"}