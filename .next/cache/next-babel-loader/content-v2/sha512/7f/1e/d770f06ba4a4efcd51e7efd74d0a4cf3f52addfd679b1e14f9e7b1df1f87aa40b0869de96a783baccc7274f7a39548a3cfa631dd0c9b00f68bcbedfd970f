{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/DemoRequest/DemoRequest.tsx\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{useState}from'react';import{ButtonTO,InButtonText,Text,View}from\"../UI\";import{useRequest}from\"../../providers/request-labor\";import{useDispatch}from'react-redux';import{collectSysError,saveQuickAlertSettings}from\"../../store/actions\";import{bunnyAPI}from\"../../helpers/bunny-api\";function DemoRequest(props){var _this=this;var request=useRequest();var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployees=_useState2[1];var granularity=0.0001;var expoPushToken='ExponentPushToken[oT1TDBCO7jtDytecDBmKWW]';var saveAlertSetting=function saveAlertSetting(){return _regeneratorRuntime.async(function saveAlertSetting$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(request.post('/api/push-service/alert-settings',{toke:expoPushToken}));case 3:_context.next=7;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);case 7:case\"end\":return _context.stop();}}},null,null,[[0,5]],Promise);};var handleSaveQuickAlertSettings=function handleSaveQuickAlertSettings(){return _regeneratorRuntime.async(function handleSaveQuickAlertSettings$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(saveQuickAlertSettings({token:expoPushToken,granularity:granularity,reminder:{times:3,interval:'1s'}}));case 1:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var getEmployees=function getEmployees(){var res;return _regeneratorRuntime.async(function getEmployees$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _regeneratorRuntime.awrap(bunnyAPI.get(\"/employees\"));case 3:res=_context3.sent;setEmployees(res.data);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch(collectSysError(_context3.t0.toString()));case 10:case\"end\":return _context3.stop();}}},null,null,[[0,7]],Promise);};var buttonTitle=props.buttonTitle;return React.createElement(View,{__self:this,__source:{fileName:_jsxFileName,lineNumber:45,columnNumber:13}},React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:46,columnNumber:9}},props.title),React.createElement(ButtonTO,{onPress:function _callee(){return _regeneratorRuntime.async(function _callee$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(getEmployees());case 2:case\"end\":return _context4.stop();}}},null,null,null,Promise);},__self:this,__source:{fileName:_jsxFileName,lineNumber:47,columnNumber:9}},React.createElement(InButtonText,{__self:this,__source:{fileName:_jsxFileName,lineNumber:49,columnNumber:12}},buttonTitle)),React.createElement(View,{__self:this,__source:{fileName:_jsxFileName,lineNumber:50,columnNumber:9}},employees&&employees.length>0?employees.map(function(employee){return React.createElement(Text,{key:employee._id,__self:_this,__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:21}},employee.email);}):null));}export default DemoRequest;","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/DemoRequest/DemoRequest.tsx"],"names":["request","useRequest","dispatch","useDispatch","employees","setEmployees","useState","granularity","expoPushToken","saveAlertSetting","toke","handleSaveQuickAlertSettings","saveQuickAlertSettings","token","reminder","times","interval","getEmployees","res","bunnyAPI","collectSysError","buttonTitle","props","employee"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {ButtonTO, InButtonText, Text, View} from '../UI';\nimport {DemoEmployee} from '../../types';\nimport {useRequest} from '../../providers/request-labor';\nimport {useDispatch} from 'react-redux';\nimport {collectSysError, saveQuickAlertSettings} from '../../store/actions';\nimport {bunnyAPI} from '../../helpers/bunny-api';\n\ninterface Props {\n    title: string,\n    buttonTitle: string\n}\n\nfunction DemoRequest(props: Props) {\n    const request = useRequest();\n    const dispatch = useDispatch();\n    const [employees, setEmployees] = useState<Array<DemoEmployee>>([]);\n    const granularity = 0.0001;\n    const expoPushToken = 'ExponentPushToken[oT1TDBCO7jtDytecDBmKWW]';\n    const saveAlertSetting = async function () {\n        try {\n            await request.post('/api/push-service/alert-settings', {toke: expoPushToken});\n        } catch (err: any) {\n        }\n    };\n\n    const handleSaveQuickAlertSettings = async function () {\n        dispatch(saveQuickAlertSettings({\n            token: expoPushToken,\n            granularity,\n            reminder: {times: 3, interval: '1s'}\n        }));\n    };\n\n    const getEmployees = async () => {\n        try {\n            const res = await bunnyAPI.get(`/employees`);\n            setEmployees(res.data);\n        } catch (err: any) {\n            dispatch(collectSysError(err.toString()));\n        }\n    };\n\n    const {buttonTitle} = props;\n    return (<View>\n        <Text>{props.title}</Text>\n        <ButtonTO onPress={async () => {\n            await getEmployees();\n        }}><InButtonText>{buttonTitle}</InButtonText></ButtonTO>\n        <View>\n            {employees && employees.length > 0\n                ? employees.map((employee) =>\n                    <Text key={employee._id}>\n                        {employee.email}\n                    </Text>\n                ) :\n                null}\n        </View>\n    </View>);\n}\n\nexport default DemoRequest;\n"]},"metadata":{},"sourceType":"module"}