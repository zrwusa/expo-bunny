{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import Linking from\"react-native-web/dist/exports/Linking\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ParsedText from'react-native-parsed-text';import Communications from'react-native-communications';import{withBunnyKit}from\"../../hooks/bunny-kit\";import{connectActionSheet}from\"../../../packages/react-native-action-sheet/src\";var WWW_URL_PATTERN=/^www\\./i;var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;var colors=themeLabor.theme.colors;var textStyle={fontSize:wp(16),lineHeight:wp(20),marginTop:wp(5),marginBottom:wp(5),marginLeft:wp(10),marginRight:wp(10)};return{left:StyleSheet.create({container:{},text:_objectSpread({color:colors.textA},textStyle),link:{color:colors.textA,textDecorationLine:'underline'}}),right:StyleSheet.create({container:{},text:_objectSpread({color:colors.textB},textStyle),link:{color:colors.textB,textDecorationLine:'underline'}})};};var DEFAULT_OPTION_TITLES=['Call','Text','Cancel'];var MessageText=function(_React$Component){_inherits(MessageText,_React$Component);var _super=_createSuper(MessageText);function MessageText(){var _this;_classCallCheck(this,MessageText);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onUrlPress=function(url){if(WWW_URL_PATTERN.test(url)){_this.onUrlPress(\"http://\"+url);}else{Linking.canOpenURL(url).then(function(supported){if(!supported){console.error('No handler for URL:',url);}else{Linking.openURL(url);}});}};_this.onPhonePress=function(phone){var phoneNumberOptionTitles=_this.props.phoneNumberOptionTitles;var options=phoneNumberOptionTitles&&phoneNumberOptionTitles.length>0?phoneNumberOptionTitles.slice(0,3):DEFAULT_OPTION_TITLES;var cancelButtonIndex=options.length-1;_this.props.showActionSheetWithOptions({options:options,cancelButtonIndex:cancelButtonIndex},function(buttonIndex){switch(buttonIndex){case 0:Communications.phonecall(phone,true);break;case 1:Communications.text(phone);break;default:break;}});};_this.onEmailPress=function(email){return Communications.email([email],null,null,null,null);};return _this;}_createClass(MessageText,[{key:\"render\",value:function render(){var _this2=this;var _this$props$bunnyKit=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);var linkStyle=[styles[this.props.position].link,this.props.linkStyle&&this.props.linkStyle[this.props.position]];var _this$props=this.props,currentMessage=_this$props.currentMessage,isDebug=_this$props.isDebug;isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level4]MessageText props',this.props);return React.createElement(View,{style:[styles[this.props.position].container,this.props.textContainerStyle&&this.props.textContainerStyle[this.props.position]]},currentMessage?currentMessage.text?React.createElement(ParsedText,{style:[styles[this.props.position].text,this.props.textStyle&&this.props.textStyle[this.props.position],this.props.customTextStyle],parse:[].concat(_toConsumableArray(this.props.parsePatterns(linkStyle)),[{type:'url',style:linkStyle,onPress:this.onUrlPress},{type:'phone',style:linkStyle,onPress:this.onPhonePress},{type:'email',style:linkStyle,onPress:this.onEmailPress}]),childrenProps:_objectSpread({},this.props.textProps),onLayout:function onLayout(){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageText onLayout');_this2.props.onMessageLoad==null?void 0:_this2.props.onMessageLoad(currentMessage);_this2.props.onMessageLoadStart==null?void 0:_this2.props.onMessageLoadStart(currentMessage);_this2.props.onMessageLoadEnd==null?void 0:_this2.props.onMessageLoadEnd(currentMessage);isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageText onMessageReadyForDisplay');_this2.props.onMessageReadyForDisplay==null?void 0:_this2.props.onMessageReadyForDisplay(currentMessage);}},this.props.currentMessage.text):React.createElement(Text,null,'currentMessage.text is undefined'):React.createElement(Text,null,'currentMessage is undefined'));}}]);return MessageText;}(React.Component);MessageText.defaultProps={position:'left',phoneNumberOptionTitles:DEFAULT_OPTION_TITLES,currentMessage:undefined,textContainerStyle:{},textStyle:{},linkStyle:{},customTextStyle:{},textProps:{},parsePatterns:function parsePatterns(){return[];},onMessageLoad:undefined,onMessageLoadStart:undefined,onMessageLoadEnd:undefined,onMessageReadyForDisplay:undefined,onMessageLoadError:undefined,isDebug:false};export default withBunnyKit(connectActionSheet(MessageText));","map":null,"metadata":{},"sourceType":"module"}