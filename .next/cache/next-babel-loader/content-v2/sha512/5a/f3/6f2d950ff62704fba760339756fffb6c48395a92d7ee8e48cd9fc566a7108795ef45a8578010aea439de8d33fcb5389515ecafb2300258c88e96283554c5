{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import{runAlgorithm}from\"../helpers\";import{countSmallerCase1,countSmallerCase2,countSmallerCase3,countSmallerCase4,countSmallerCase5,countSmallerCase7}from\"./cases\";import{BinaryIndexedTree,BST}from\"../../data-structures/binary-tree\";import{DeepProxy}from'@qiwi/deep-proxy';export var searchInRotatedSortedArray=function searchInRotatedSortedArray(nums,target){if(nums.length===0)return-1;var left=0;var right=nums.length-1;while(left<=right){var mid=left+Math.floor((right-left)/2);var midEle=nums[mid],leftEle=nums[left],rightEle=nums[right];if(midEle===target)return mid;if(leftEle<=midEle){if(leftEle<=target&&target<midEle){right=mid-1;}else{left=mid+1;}}else{if(midEle<target&&target<=rightEle){left=mid+1;}else{right=mid-1;}}}return-1;};var majorityElement=function majorityElement(nums){var majority=nums[0];var count=0;for(var _iterator=_createForOfIteratorHelperLoose(nums),_step;!(_step=_iterator()).done;){var num=_step.value;if(num===majority){count++;}else if(--count===0){count=1;majority=num;}}return majority;};var findMin=function findMin(nums){var n=nums.length;var first=nums[0];if(n===1){return first;}var last=nums[nums.length-1];if(first<last){return first;}var left=nums.splice(0,Math.floor(nums.length/2));if(left[0]>left[left.length-1]){return findMin(left);}else{return findMin(nums);}};var NumArray=function(){function NumArray(nums){_classCallCheck(this,NumArray);this._nums=nums;this._tree=new BinaryIndexedTree(nums.length);for(var i=0;i<nums.length;i++){this._tree.update(i+1,nums[i]);}}_createClass(NumArray,[{key:\"update\",value:function update(index,val){this._tree.update(index+1,val-this._nums[index]);this._nums[index]=val;}},{key:\"sumRange\",value:function sumRange(left,right){return this._tree.getPrefixSum(right+1)-this._tree.getPrefixSum(left);}}]);return NumArray;}();var countSmallerNoReverse=function countSmallerNoReverse(nums){var uniqueSorted=_toConsumableArray(new Set(nums)).sort(function(a,b){return b-a;});var freqs=new Array(uniqueSorted.length).fill(0);var positions=[];for(var i=nums.length-1;i>-1;i--){positions.unshift(uniqueSorted.indexOf(nums[i]));}var sumRight=function sumRight(pos){var sum=0;for(var _i=freqs.length-1;_i>pos;_i--){sum+=freqs[_i];}return sum;};var ans=[];for(var _i2=nums.length-1;_i2>-1;_i2--){freqs[positions[_i2]]++;ans.unshift(sumRight(positions[_i2]));}return ans;};var countSmallerBITPlagiarized=function countSmallerBITPlagiarized(nums){var ranks=new Map();var sortedNums=_toConsumableArray(nums).sort(function(a,b){return a-b;});sortedNums.forEach(function(num,i){return ranks.set(num,i+1);});var ans=[];var bit=new BinaryIndexedTree(nums.length);nums.reverse().forEach(function(num){ans.push(bit.getPrefixSum(ranks.get(num)-1));bit.update(ranks.get(num),1);});return ans.reverse();};var countSmallerBIT=function countSmallerBIT(nums){var orgNums=_toConsumableArray(nums);var sortedUniqueNums=_toConsumableArray(new Set(nums)).sort(function(a,b){return a-b;});var ranks=new Map();for(var i=0;i<sortedUniqueNums.length;i++){ranks.set(sortedUniqueNums[i],i+1);}var ans=[];var tree=new BinaryIndexedTree(ranks.size);var reversed=orgNums.reverse();for(var _i3=0;_i3<reversed.length;_i3++){var numRank=ranks.get(reversed[_i3]);ans.push(tree.getPrefixSum(numRank-1));tree.update(numRank,1);}return ans.reverse();};export var countSmallerBST=function countSmallerBST(nums,proxyHandler){var rootIndex,proxyVariables,outputArr,j,nodes,_iterator2,_step2,node;return _regeneratorRuntime.async(function countSmallerBST$(_context){while(1){switch(_context.prev=_context.next){case 0:rootIndex=nums.length-1;proxyVariables=new DeepProxy({bst:new BST(true,nums[rootIndex],undefined)},proxyHandler);outputArr=new Array(nums.length).fill(0);for(j=nums.length-1;j>-1;j--){if(j!==rootIndex){nodes=proxyVariables.bst.insert(nums[j]);for(_iterator2=_createForOfIteratorHelperLoose(nodes);!(_step2=_iterator2()).done;){node=_step2.value;outputArr[j]=node==null?void 0:node.allLesserSum;}}}return _context.abrupt(\"return\",outputArr);case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);};var runAllCountSmaller=function runAllCountSmaller(){return _regeneratorRuntime.async(function runAllCountSmaller$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase1))));case 2:_context2.next=4;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase2))));case 4:_context2.next=6;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase3))));case 6:_context2.next=8;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase4))));case 8:_context2.next=10;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase5))));case 10:_context2.next=12;return _regeneratorRuntime.awrap(runAlgorithm.apply(void 0,[countSmallerBIT,false].concat(_toConsumableArray(countSmallerCase7))));case 12:case\"end\":return _context2.stop();}}},null,null,null,Promise);};(function _callee(){return _regeneratorRuntime.async(function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:case\"end\":return _context3.stop();}}},null,null,null,Promise);})();var solution=function solution(isBadVersion){return function(n){var firstBad=n;var l=1;var r=n;while(l<=r){if(l===r){return l;}var mid=l+Math.floor((r-l)/2);var badInLeft=isBadVersion(mid);var firstInRight=mid+1;if(!badInLeft&&isBadVersion(firstInRight)){return firstInRight;}else{if(badInLeft){r=mid;}else{l=firstInRight;}}}return firstBad;};};function mySqrt(x){if(x===0){return 0;}if(x===1){return 1;}var l=1,r=x,ans=x;while(r-l>=1){var mid=l+Math.floor((r-l)/2);var midSquare=mid*mid;if(r-l===1){ans=l;break;}if(midSquare<x){l=mid;}else if(midSquare>x){r=mid;}else{ans=mid;break;}}return ans;}function minEatingSpeed(piles,h){var pilesCount=piles.length;var maxPile=1;for(var _iterator3=_createForOfIteratorHelperLoose(piles),_step3;!(_step3=_iterator3()).done;){var pile=_step3.value;maxPile=Math.max(pile,maxPile);}if(h===pilesCount){return maxPile;}var canFinish=function canFinish(k){var needTime=0;for(var _iterator4=_createForOfIteratorHelperLoose(piles),_step4;!(_step4=_iterator4()).done;){var _pile=_step4.value;needTime+=Math.ceil(_pile/k);}return needTime<=h;};var l=1,r=maxPile;var minK=maxPile;while(l<r){var mid=l+Math.floor((r-l)/2);if(canFinish(mid)){minK=mid;r=mid;}else{l=mid+1;}}return minK;}function searchInsert(nums,target){var l=0,r=nums.length;while(l<r){var mid=l+Math.floor((r-l)/2);var midNum=nums[mid];if(midNum===target){return mid;}else if(midNum>target){r=mid;}else{l=mid+1;}}return l;}function searchMatrix(matrix,target){var arr=[];for(var _iterator5=_createForOfIteratorHelperLoose(matrix),_step5;!(_step5=_iterator5()).done;){var arrI=_step5.value;arr=arr.concat(arrI);}var l=0,r=arr.length;while(l<=r){var mid=l+Math.floor((r-l)/2);var midVal=arr[mid];if(midVal===target){return true;}else if(midVal>target){r=mid-1;}else{l=mid+1;}}return false;}function kthSmallest(matrix,k){var arr=[];for(var _iterator6=_createForOfIteratorHelperLoose(matrix),_step6;!(_step6=_iterator6()).done;){var row=_step6.value;arr=arr.concat(row);}return arr.sort(function(a,b){return a-b;})[k-1];}function smallestDistancePair(nums,k){nums.sort(function(a,b){return a-b;});var min=Infinity,max=nums[nums.length-1]-nums[0];for(var i=0;i<nums.length-1;i++){min=Math.min(min,nums[i+1]-nums[i]);}function countLessThan(nums,target){var right=0,count=0;for(var _i4=0;_i4<nums.length;_i4++){while(nums[_i4]-nums[right]>target&&right<=_i4){right++;}count+=_i4-right;}return count;}while(min<max-1){var mid=Math.floor((min+max)/2);var count=countLessThan(nums,mid);if(count>countLessThan(nums,mid-1)&&count===k)return mid;if(count<k){min=mid;}else{max=mid;}}if(countLessThan(nums,min)>=k)return min;return max;}","map":null,"metadata":{},"sourceType":"module"}