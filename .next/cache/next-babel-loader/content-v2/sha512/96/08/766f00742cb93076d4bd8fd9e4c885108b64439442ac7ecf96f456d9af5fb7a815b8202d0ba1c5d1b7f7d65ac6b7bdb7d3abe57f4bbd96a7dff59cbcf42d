{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React,{Children,cloneElement,Component,createRef}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import View from\"react-native-web/dist/exports/View\";import{LightBoxOverlay}from\"./LightBoxOverlay\";var LightBox=function(_Component){_inherits(LightBox,_Component);var _super=_createSuper(LightBox);function LightBox(){var _this;_classCallCheck(this,LightBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this._root=createRef();_this.state={isOpen:false,origin:{x:0,y:0,width:0,height:0},layoutOpacity:new Animated.Value(1)};_this.getContent=function(){if(_this.props.renderContent){return _this.props.renderContent();}else if(_this.props.activeProps){return cloneElement(Children.only(_this.props.children),_this.props.activeProps);}return _this.props.children;};_this.getOverlayProps=function(){return{isOpen:_this.state.isOpen,origin:_this.state.origin,renderHeader:_this.props.renderHeader,swipeToDismiss:_this.props.swipeToDismiss,springConfig:_this.props.springConfig,backgroundColor:_this.props.backgroundColor,children:_this.getContent(),didOpen:_this.props.didOpen,willClose:_this.props.willClose,onClose:_this.onClose};};_this.open=function(){var _this$_root$current;(_this$_root$current=_this._root.current)==null?void 0:_this$_root$current.measure(function(ox,oy,width,height,px,py){_this.props.onOpen&&_this.props.onOpen();_this.setState({isOpen:!!_this.props.navigator,isAnimating:true,origin:{width:width,height:height,x:px,y:py}},function(){_this.props.didOpen==null?void 0:_this.props.didOpen();if(_this.props.navigator){var route={component:LightBoxOverlay,passProps:_this.getOverlayProps()};var routes=_this.props.navigator.getCurrentRoutes();routes.push(route);_this.props.navigator.immediatelyResetRouteStack(routes);}else{_this.setState({isOpen:true});}setTimeout(function(){_this._root&&_this.state.layoutOpacity.setValue(0);});});});};_this.close=function(){throw new Error('LightBox.close method is deprecated. Use renderHeader(close) prop instead.');};_this.onClose=function(){_this.state.layoutOpacity.setValue(1);_this.setState({isOpen:false},_this.props.onClose);if(_this.props.navigator){var routes=_this.props.navigator.getCurrentRoutes();routes.pop();_this.props.navigator.immediatelyResetRouteStack(routes);}};return _this;}_createClass(LightBox,[{key:\"render\",value:function render(){return React.createElement(View,{ref:this._root,style:this.props.style,onLayout:function onLayout(){}},React.createElement(Animated.View,{style:{opacity:this.state.layoutOpacity}},React.createElement(TouchableHighlight,{underlayColor:this.props.underlayColor,onPress:this.open,onLongPress:this.props.onLongPress},this.props.children)),this.props.navigator?false:React.createElement(LightBoxOverlay,this.getOverlayProps()));}}]);return LightBox;}(Component);LightBox.defaultProps={swipeToDismiss:true,onOpen:function onOpen(){},didOpen:function didOpen(){},willClose:function willClose(){},onClose:function onClose(){},onLongPress:function onLongPress(){}};export{LightBox as default};","map":null,"metadata":{},"sourceType":"module"}