{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/UserAlbumEditor/UserAlbumEditor.tsx\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect,useState}from'react';import{View}from\"../UI\";import{Col,Row}from\"../../containers\";import{ImageUploader}from\"../ImageUploader\";import{makeStyles}from\"./styles\";import{useFirestore,useFirestoreConnect}from'react-redux-firebase';import{useDispatch,useSelector}from'react-redux';import{collectSysError}from\"../../store/actions\";import{useBunnyKit}from\"../../hooks/bunny-kit\";export function UserAlbumEditor(props){var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,wp=_useBunnyKit.wp,user=_useBunnyKit.user;var styles=makeStyles(sizeLabor,themeLabor);var dispatch=useDispatch();var firebaseUser=user==null?void 0:user.firebaseUser;var userId='';if(firebaseUser){userId=firebaseUser.uid;}var _props$photoPath=props.photoPath,photoPath=_props$photoPath===void 0?\"usersWithPhotos/\"+userId:_props$photoPath;var firestore=useFirestore();useFirestoreConnect(photoPath);var usersWithPhotos=useSelector(function(state){return state.firestoreState.ordered.usersWithPhotos;});var _imageUploaderError=function _imageUploaderError(e){dispatch(collectSysError(e));};var _removePhoto=function _removePhoto(position,source){return _regeneratorRuntime.async(function _removePhoto$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(firestore.update(photoPath,_defineProperty({},position,{uri:''})));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);};var _savePhoto=function _savePhoto(position,photoUrl){return _regeneratorRuntime.async(function _savePhoto$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(photoUrl){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return _regeneratorRuntime.awrap(firestore.update(photoPath,_defineProperty({},position,{uri:photoUrl})));case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var _useState=useState(),_useState2=_slicedToArray(_useState,2),sources=_useState2[0],setSources=_useState2[1];useEffect(function(){if(usersWithPhotos&&usersWithPhotos.length>0){setSources(usersWithPhotos[0]);}},[usersWithPhotos]);useEffect(function(){(function _callee(){var doc;return _regeneratorRuntime.async(function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(firestore.get(photoPath));case 2:doc=_context3.sent;if(doc.exists){_context3.next=6;break;}_context3.next=6;return _regeneratorRuntime.awrap(firestore.set(photoPath,{'0':{uri:''},'1':{uri:''},'2':{uri:''},'3':{uri:''},'4':{uri:''},'5':{uri:''}}));case 6:case\"end\":return _context3.stop();}}},null,null,null,Promise);})();},[]);var userPhotosPath=\"/userPhotos/\"+userId;return React.createElement(View,{style:styles.albumContainer,__self:this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:9}},sources?React.createElement(View,{style:{height:wp(375),width:wp(375)},__self:this,__source:{fileName:_jsxFileName,lineNumber:83,columnNumber:23}},React.createElement(Row,{size:2,__self:this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:25}},React.createElement(Col,{size:2,__self:this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:29}},React.createElement(ImageUploader,{source:sources[0],path:userPhotosPath,isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee2(value){return _regeneratorRuntime.async(function _callee2$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(_savePhoto('0',value.uri));case 2:case\"end\":return _context4.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee3(needRemove){return _regeneratorRuntime.async(function _callee3$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(_removePhoto('0',needRemove));case 2:case\"end\":return _context5.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:33}})),React.createElement(Col,{size:1,style:{marginLeft:wp(2)},__self:this,__source:{fileName:_jsxFileName,lineNumber:101,columnNumber:29}},React.createElement(Row,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:33}},React.createElement(ImageUploader,{path:userPhotosPath,source:sources[1],isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee4(value){return _regeneratorRuntime.async(function _callee4$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(_savePhoto('1',value.uri));case 2:case\"end\":return _context6.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee5(needRemove){return _regeneratorRuntime.async(function _callee5$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return _regeneratorRuntime.awrap(_removePhoto('1',needRemove));case 2:case\"end\":return _context7.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:103,columnNumber:37}})),React.createElement(Row,{size:1,style:{marginTop:wp(2)},__self:this,__source:{fileName:_jsxFileName,lineNumber:118,columnNumber:33}},React.createElement(ImageUploader,{path:userPhotosPath,source:sources[2],isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee6(value){return _regeneratorRuntime.async(function _callee6$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _regeneratorRuntime.awrap(_savePhoto('2',value.uri));case 2:case\"end\":return _context8.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee7(needRemove){return _regeneratorRuntime.async(function _callee7$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _regeneratorRuntime.awrap(_removePhoto('2',needRemove));case 2:case\"end\":return _context9.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:119,columnNumber:37}})))),React.createElement(Row,{size:1,style:{marginTop:wp(2)},__self:this,__source:{fileName:_jsxFileName,lineNumber:136,columnNumber:25}},React.createElement(Col,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:137,columnNumber:29}},React.createElement(ImageUploader,{path:userPhotosPath,source:sources[3],isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee8(value){return _regeneratorRuntime.async(function _callee8$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return _regeneratorRuntime.awrap(_savePhoto('3',value.uri));case 2:case\"end\":return _context10.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee9(needRemove){return _regeneratorRuntime.async(function _callee9$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return _regeneratorRuntime.awrap(_removePhoto('3',needRemove));case 2:case\"end\":return _context11.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:138,columnNumber:33}})),React.createElement(Col,{size:1,style:{marginLeft:wp(2)},__self:this,__source:{fileName:_jsxFileName,lineNumber:153,columnNumber:29}},React.createElement(ImageUploader,{path:userPhotosPath,source:sources[4],isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee10(value){return _regeneratorRuntime.async(function _callee10$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return _regeneratorRuntime.awrap(_savePhoto('4',value.uri));case 2:case\"end\":return _context12.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee11(needRemove){return _regeneratorRuntime.async(function _callee11$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return _regeneratorRuntime.awrap(_removePhoto('4',needRemove));case 2:case\"end\":return _context13.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:154,columnNumber:33}})),React.createElement(Col,{size:1,style:{marginLeft:wp(2)},__self:this,__source:{fileName:_jsxFileName,lineNumber:169,columnNumber:29}},React.createElement(ImageUploader,{path:userPhotosPath,source:sources[5],isFullFill:true,isDeleteFromServerWhenRemove:true,isDeleteFromServerWhenUpload:true,onValueChanged:function _callee12(value){return _regeneratorRuntime.async(function _callee12$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return _regeneratorRuntime.awrap(_savePhoto('5',value.uri));case 2:case\"end\":return _context14.stop();}}},null,null,null,Promise);},onRemovePhoto:function _callee13(needRemove){return _regeneratorRuntime.async(function _callee13$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return _regeneratorRuntime.awrap(_removePhoto('5',needRemove));case 2:case\"end\":return _context15.stop();}}},null,null,null,Promise);},onError:_imageUploaderError,__self:this,__source:{fileName:_jsxFileName,lineNumber:170,columnNumber:33}})))):null);}","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/UserAlbumEditor/UserAlbumEditor.tsx"],"names":["sizeLabor","themeLabor","wp","user","useBunnyKit","styles","makeStyles","dispatch","useDispatch","firebaseUser","userId","photoPath","props","firestore","useFirestore","useFirestoreConnect","usersWithPhotos","useSelector","state","_imageUploaderError","collectSysError","_removePhoto","uri","_savePhoto","photoUrl","sources","setSources","useState","useEffect","doc","userPhotosPath","height","width","value","marginLeft","marginTop"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {View} from '../UI';\nimport {RootState} from '../../types';\nimport {Col, Row} from '../../containers';\nimport {ImageUploader} from '../ImageUploader';\nimport {makeStyles} from './styles';\nimport {ImageURISource} from 'react-native';\nimport {useFirestore, useFirestoreConnect} from 'react-redux-firebase';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {collectSysError} from '../../store/actions';\nimport {useBunnyKit} from '../../hooks/bunny-kit';\n\n\nexport interface UserAlbumEditorProps {\n    photoPath?: string;\n}\n\n\nexport function UserAlbumEditor(props: UserAlbumEditorProps) {\n    const {sizeLabor, themeLabor, wp, user} = useBunnyKit();\n\n    const styles = makeStyles(sizeLabor, themeLabor);\n    const dispatch = useDispatch();\n    const firebaseUser = user?.firebaseUser;\n    let userId = '';\n    if (firebaseUser) {\n        userId = firebaseUser.uid;\n    }\n    const {photoPath = `usersWithPhotos/${userId}`} = props;\n    const firestore = useFirestore();\n\n    useFirestoreConnect(photoPath);\n\n    const usersWithPhotos = useSelector((state: RootState) => state.firestoreState.ordered.usersWithPhotos);\n\n    const _imageUploaderError = (e: Error) => {\n        dispatch(collectSysError(e));\n    };\n\n    const _removePhoto = async (position: string, source?: ImageURISource) => {\n        await firestore.update(photoPath, {[position]: {uri: ''}});\n    };\n\n    const _savePhoto = async (position: string, photoUrl?: string) => {\n        if (!photoUrl) {\n            return;\n        }\n        await firestore.update(photoPath, {[position]: {uri: photoUrl}});\n    };\n\n    const [sources, setSources] = useState<{ [key: string]: ImageURISource }>();\n\n    useEffect(() => {\n        if (usersWithPhotos && usersWithPhotos.length > 0) {\n            // todo react-redux-firebase type issue\n            setSources(usersWithPhotos[0] as { [key: string]: ImageURISource });\n        }\n    }, [usersWithPhotos]);\n\n\n    useEffect(() => {\n        (async () => {\n            const doc = await firestore.get(photoPath);\n            if (!doc.exists) {\n                await firestore.set(photoPath, {\n                    '0': {uri: ''},\n                    '1': {uri: ''},\n                    '2': {uri: ''},\n                    '3': {uri: ''},\n                    '4': {uri: ''},\n                    '5': {uri: ''}\n                });\n            }\n        })();\n    }, []);\n    const userPhotosPath = `/userPhotos/${userId}`;\n\n    return (\n        <View style={styles.albumContainer}>\n            {\n                sources\n                    ? <View style={{height: wp(375), width: wp(375)}}>\n                        <Row size={2}>\n                            <Col size={2}>\n                                <ImageUploader\n                                    source={sources[0]}\n                                    path={userPhotosPath}\n                                    isFullFill\n                                    isDeleteFromServerWhenRemove\n                                    isDeleteFromServerWhenUpload\n                                    onValueChanged={async (value) => {\n                                        await _savePhoto('0', value.uri);\n                                    }}\n                                    onRemovePhoto={async (needRemove) => {\n                                        await _removePhoto('0', needRemove);\n                                    }}\n                                    onError={_imageUploaderError}\n                                />\n                            </Col>\n                            <Col size={1} style={{marginLeft: wp(2)}}>\n                                <Row size={1}>\n                                    <ImageUploader\n                                        path={userPhotosPath}\n                                        source={sources[1]}\n                                        isFullFill\n                                        isDeleteFromServerWhenRemove\n                                        isDeleteFromServerWhenUpload\n                                        onValueChanged={async (value) => {\n                                            await _savePhoto('1', value.uri);\n                                        }}\n                                        onRemovePhoto={async (needRemove) => {\n                                            await _removePhoto('1', needRemove);\n                                        }}\n                                        onError={_imageUploaderError}\n                                    />\n                                </Row>\n                                <Row size={1} style={{marginTop: wp(2)}}>\n                                    <ImageUploader\n                                        path={userPhotosPath}\n                                        source={sources[2]}\n                                        isFullFill\n                                        isDeleteFromServerWhenRemove\n                                        isDeleteFromServerWhenUpload\n                                        onValueChanged={async (value) => {\n                                            await _savePhoto('2', value.uri);\n                                        }}\n                                        onRemovePhoto={async (needRemove) => {\n                                            await _removePhoto('2', needRemove);\n                                        }}\n                                        onError={_imageUploaderError}\n                                    />\n                                </Row>\n                            </Col>\n                        </Row>\n                        <Row size={1} style={{marginTop: wp(2)}}>\n                            <Col size={1}>\n                                <ImageUploader\n                                    path={userPhotosPath}\n                                    source={sources[3]}\n                                    isFullFill\n                                    isDeleteFromServerWhenRemove\n                                    isDeleteFromServerWhenUpload\n                                    onValueChanged={async (value) => {\n                                        await _savePhoto('3', value.uri);\n                                    }}\n                                    onRemovePhoto={async (needRemove) => {\n                                        await _removePhoto('3', needRemove);\n                                    }}\n                                    onError={_imageUploaderError}\n                                />\n                            </Col>\n                            <Col size={1} style={{marginLeft: wp(2)}}>\n                                <ImageUploader\n                                    path={userPhotosPath}\n                                    source={sources[4]}\n                                    isFullFill\n                                    isDeleteFromServerWhenRemove\n                                    isDeleteFromServerWhenUpload\n                                    onValueChanged={async (value) => {\n                                        await _savePhoto('4', value.uri);\n                                    }}\n                                    onRemovePhoto={async (needRemove) => {\n                                        await _removePhoto('4', needRemove);\n                                    }}\n                                    onError={_imageUploaderError}\n                                />\n                            </Col>\n                            <Col size={1} style={{marginLeft: wp(2)}}>\n                                <ImageUploader\n                                    path={userPhotosPath}\n                                    source={sources[5]}\n                                    isFullFill\n                                    isDeleteFromServerWhenRemove\n                                    isDeleteFromServerWhenUpload\n                                    onValueChanged={async (value) => {\n                                        await _savePhoto('5', value.uri);\n                                    }}\n                                    onRemovePhoto={async (needRemove) => {\n                                        await _removePhoto('5', needRemove);\n                                    }}\n                                    onError={_imageUploaderError}\n                                />\n                            </Col>\n                        </Row>\n                    </View>\n                    : null\n            }\n        </View>\n    );\n}\n\n"]},"metadata":{},"sourceType":"module"}