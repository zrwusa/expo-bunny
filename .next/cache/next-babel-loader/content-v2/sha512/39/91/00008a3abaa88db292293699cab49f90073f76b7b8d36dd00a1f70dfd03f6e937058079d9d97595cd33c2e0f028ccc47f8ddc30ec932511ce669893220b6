{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/Message.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import ChatAvatar from\"./ChatAvatar\";import Bubble from\"./Bubble\";import SystemMessage from\"./SystemMessage\";import Day from\"./Day\";import{isSameUser}from\"./utils\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;return{left:StyleSheet.create({container:{flexDirection:'row',alignItems:'flex-end',justifyContent:'flex-start',marginLeft:wp(8),marginRight:0}}),right:StyleSheet.create({container:{flexDirection:'row',alignItems:'flex-end',justifyContent:'flex-end',marginLeft:0,marginRight:wp(8)}})};};var Message=function(_React$Component){_inherits(Message,_React$Component);var _super=_createSuper(Message);function Message(){_classCallCheck(this,Message);return _super.apply(this,arguments);}_createClass(Message,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps){var next=nextProps.currentMessage;var current=this.props.currentMessage;var _this$props=this.props,previousMessage=_this$props.previousMessage,nextMessage=_this$props.nextMessage;var nextPropsMessage=nextProps.nextMessage;var nextPropsPreviousMessage=nextProps.previousMessage;var shouldUpdate=this.props.shouldUpdateMessage&&this.props.shouldUpdateMessage(this.props,nextProps)||false;return next.sent!==current.sent||next.received!==current.received||next.pending!==current.pending||next.createdAt!==current.createdAt||next.text!==current.text||next.image!==current.image||next.sticker!==current.sticker||next.video!==current.video||next.audio!==current.audio||previousMessage!==nextPropsPreviousMessage||nextMessage!==nextPropsMessage||shouldUpdate;}},{key:\"renderDay\",value:function renderDay(){if(this.props.currentMessage&&this.props.currentMessage.createdAt){var _this$props2=this.props,currentMessage=_this$props2.currentMessage,previousMessage=_this$props2.previousMessage,nextMessage=_this$props2.nextMessage,dayContainerStyle=_this$props2.dayContainerStyle,dayWrapperStyle=_this$props2.dayWrapperStyle,dayTextStyle=_this$props2.dayTextStyle,dayTextProps=_this$props2.dayTextProps,dateFormat=_this$props2.dateFormat,isDebug=_this$props2.isDebug;var dayProps={currentMessage:currentMessage,previousMessage:previousMessage,nextMessage:nextMessage,dayContainerStyle:dayContainerStyle,dayWrapperStyle:dayWrapperStyle,dayTextStyle:dayTextStyle,dayTextProps:dayTextProps,dateFormat:dateFormat};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level3]Message dayProps',dayProps);if(this.props.renderDay){return this.props.renderDay(dayProps);}return React.createElement(Day,_extends({},dayProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:144,columnNumber:20}}));}return null;}},{key:\"renderBubble\",value:function renderBubble(){var _this$props3=this.props,audioProps=_this$props3.audioProps,audioStyle=_this$props3.audioStyle,audioContainerStyle=_this$props3.audioContainerStyle,bottomContainerStyle=_this$props3.bottomContainerStyle,bubbleContainerStyle=_this$props3.bubbleContainerStyle,bubbleWrapperStyle=_this$props3.bubbleWrapperStyle,currentMessage=_this$props3.currentMessage,quickRepliesColor=_this$props3.quickRepliesColor,containerToNextStyle=_this$props3.containerToNextStyle,containerToPreviousStyle=_this$props3.containerToPreviousStyle,customTextStyle=_this$props3.customTextStyle,isDebug=_this$props3.isDebug,imageContainerStyle=_this$props3.imageContainerStyle,imageProps=_this$props3.imageProps,imageStyle=_this$props3.imageStyle,isCustomViewBottom=_this$props3.isCustomViewBottom,keepReplies=_this$props3.keepReplies,lightBoxProps=_this$props3.lightBoxProps,linkStyle=_this$props3.linkStyle,messages=_this$props3.messages,nextMessage=_this$props3.nextMessage,onLongPress=_this$props3.onLongPress,onMessageLoad=_this$props3.onMessageLoad,onMessageLoadEnd=_this$props3.onMessageLoadEnd,onMessageLoadError=_this$props3.onMessageLoadError,onMessageLoadStart=_this$props3.onMessageLoadStart,onMessageReadyForDisplay=_this$props3.onMessageReadyForDisplay,onPress=_this$props3.onPress,onQuickReply=_this$props3.onQuickReply,textLongPressOptionTitles=_this$props3.textLongPressOptionTitles,phoneNumberOptionTitles=_this$props3.phoneNumberOptionTitles,parsePatterns=_this$props3.parsePatterns,position=_this$props3.position,previousMessage=_this$props3.previousMessage,quickReplyStyle=_this$props3.quickReplyStyle,renderCustomView=_this$props3.renderCustomView,renderMessageAudio=_this$props3.renderMessageAudio,renderMessageImage=_this$props3.renderMessageImage,renderMessageSticker=_this$props3.renderMessageSticker,renderMessageText=_this$props3.renderMessageText,renderMessageVideo=_this$props3.renderMessageVideo,renderQuickReplies=_this$props3.renderQuickReplies,renderQuickReplySend=_this$props3.renderQuickReplySend,renderTicks=_this$props3.renderTicks,renderTime=_this$props3.renderTime,renderUsernameOnMessage=_this$props3.renderUsernameOnMessage,stickerStyle=_this$props3.stickerStyle,sendText=_this$props3.sendText,stickerContainerStyle=_this$props3.stickerContainerStyle,stickerProps=_this$props3.stickerProps,textContainerStyle=_this$props3.textContainerStyle,textProps=_this$props3.textProps,textStyle=_this$props3.textStyle,tickStyle=_this$props3.tickStyle,timeContainerStyle=_this$props3.timeContainerStyle,timeFormat=_this$props3.timeFormat,timeTextStyle=_this$props3.timeTextStyle,touchableProps=_this$props3.touchableProps,usernameStyle=_this$props3.usernameStyle,user=_this$props3.user,videoProps=_this$props3.videoProps,videoContainerStyle=_this$props3.videoContainerStyle,videoStyle=_this$props3.videoStyle,audioProgressStyle=_this$props3.audioProgressStyle,audioPlayButtonStyle=_this$props3.audioPlayButtonStyle,audioProgressColor=_this$props3.audioProgressColor,audioRemainTimeStyle=_this$props3.audioRemainTimeStyle,audioPlayButtonIconStyle=_this$props3.audioPlayButtonIconStyle;var bubbleProps={audioProps:audioProps,audioStyle:audioStyle,audioContainerStyle:audioContainerStyle,bottomContainerStyle:bottomContainerStyle,bubbleContainerStyle:bubbleContainerStyle,bubbleWrapperStyle:bubbleWrapperStyle,currentMessage:currentMessage,quickRepliesColor:quickRepliesColor,containerToNextStyle:containerToNextStyle,containerToPreviousStyle:containerToPreviousStyle,customTextStyle:customTextStyle,isDebug:isDebug,imageContainerStyle:imageContainerStyle,imageProps:imageProps,imageStyle:imageStyle,isCustomViewBottom:isCustomViewBottom,keepReplies:keepReplies,lightBoxProps:lightBoxProps,linkStyle:linkStyle,messages:messages,nextMessage:nextMessage,onLongPress:onLongPress,onMessageLoad:onMessageLoad,onMessageLoadEnd:onMessageLoadEnd,onMessageLoadError:onMessageLoadError,onMessageLoadStart:onMessageLoadStart,onMessageReadyForDisplay:onMessageReadyForDisplay,onPress:onPress,onQuickReply:onQuickReply,textLongPressOptionTitles:textLongPressOptionTitles,phoneNumberOptionTitles:phoneNumberOptionTitles,parsePatterns:parsePatterns,position:position,previousMessage:previousMessage,quickReplyStyle:quickReplyStyle,renderCustomView:renderCustomView,renderMessageAudio:renderMessageAudio,renderMessageImage:renderMessageImage,renderMessageSticker:renderMessageSticker,renderMessageText:renderMessageText,renderMessageVideo:renderMessageVideo,renderQuickReplies:renderQuickReplies,renderQuickReplySend:renderQuickReplySend,renderTicks:renderTicks,renderTime:renderTime,renderUsernameOnMessage:renderUsernameOnMessage,stickerStyle:stickerStyle,sendText:sendText,stickerContainerStyle:stickerContainerStyle,stickerProps:stickerProps,textContainerStyle:textContainerStyle,textProps:textProps,textStyle:textStyle,tickStyle:tickStyle,timeContainerStyle:timeContainerStyle,timeFormat:timeFormat,timeTextStyle:timeTextStyle,touchableProps:touchableProps,usernameStyle:usernameStyle,user:user,videoProps:videoProps,videoContainerStyle:videoContainerStyle,videoStyle:videoStyle,audioProgressStyle:audioProgressStyle,audioPlayButtonStyle:audioPlayButtonStyle,audioProgressColor:audioProgressColor,audioRemainTimeStyle:audioRemainTimeStyle,audioPlayButtonIconStyle:audioPlayButtonIconStyle};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level3]Message bubbleProps',bubbleProps);if(this.props.renderBubble){return this.props.renderBubble(bubbleProps);}return React.createElement(Bubble,_extends({},bubbleProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:297,columnNumber:16}}));}},{key:\"renderSystemMessage\",value:function renderSystemMessage(){var _this$props4=this.props,currentMessage=_this$props4.currentMessage,systemMessageContainerStyle=_this$props4.systemMessageContainerStyle,systemMessageWrapperStyle=_this$props4.systemMessageWrapperStyle,systemTextStyle=_this$props4.systemTextStyle,isDebug=_this$props4.isDebug;var systemMessageProps={currentMessage:currentMessage,systemMessageContainerStyle:systemMessageContainerStyle,systemMessageWrapperStyle:systemMessageWrapperStyle,systemTextStyle:systemTextStyle};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level3]Message systemMessageProps',systemMessageProps);if(this.props.renderSystemMessage){return this.props.renderSystemMessage(systemMessageProps);}return React.createElement(SystemMessage,_extends({},systemMessageProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:320,columnNumber:16}}));}},{key:\"renderAvatar\",value:function renderAvatar(){var _this$props5=this.props,user=_this$props5.user,currentMessage=_this$props5.currentMessage,showUserAvatar=_this$props5.showUserAvatar;if(user&&user._id&&currentMessage&&currentMessage.user&&user._id===currentMessage.user._id&&!showUserAvatar){return null;}if(currentMessage&&currentMessage.user&&currentMessage.user.avatar===null){return null;}var _this$props6=this.props,renderAvatarOnTop=_this$props6.renderAvatarOnTop,showAvatarForEveryMessage=_this$props6.showAvatarForEveryMessage,position=_this$props6.position,previousMessage=_this$props6.previousMessage,nextMessage=_this$props6.nextMessage,avatarContainerStyle=_this$props6.avatarContainerStyle,avatarImageStyle=_this$props6.avatarImageStyle,onPressAvatar=_this$props6.onPressAvatar,onLongPressAvatar=_this$props6.onLongPressAvatar,isDebug=_this$props6.isDebug;var avatarProps={renderAvatarOnTop:renderAvatarOnTop,showAvatarForEveryMessage:showAvatarForEveryMessage,position:position,currentMessage:currentMessage,previousMessage:previousMessage,nextMessage:nextMessage,avatarContainerStyle:avatarContainerStyle,avatarImageStyle:avatarImageStyle,onPressAvatar:onPressAvatar,onLongPressAvatar:onLongPressAvatar};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level3]Message avatarProps',avatarProps);return React.createElement(ChatAvatar,_extends({},avatarProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:372,columnNumber:16}}));}},{key:\"render\",value:function render(){var _this$props7=this.props,currentMessage=_this$props7.currentMessage,onMessageLayout=_this$props7.onMessageLayout,nextMessage=_this$props7.nextMessage,position=_this$props7.position,messageContainerStyle=_this$props7.messageContainerStyle;if(currentMessage){var sameUser=isSameUser(currentMessage,nextMessage);var _this$props$bunnyKit=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{onLayout:onMessageLayout,__self:this,__source:{fileName:_jsxFileName,lineNumber:388,columnNumber:17}},this.renderDay(),currentMessage.system?this.renderSystemMessage():React.createElement(View,{style:[styles[position].container,{marginBottom:sameUser?2:10},!this.props.inverted&&{marginBottom:2},messageContainerStyle&&messageContainerStyle[position]],__self:this,__source:{fileName:_jsxFileName,lineNumber:393,columnNumber:25}},this.props.position==='left'?this.renderAvatar():null,this.renderBubble(),this.props.position==='right'?this.renderAvatar():null));}return null;}}]);return Message;}(React.Component);Message.defaultProps={messages:[],renderAvatar:undefined,renderBubble:undefined,renderDay:undefined,renderSystemMessage:undefined,position:'left',currentMessage:undefined,nextMessage:undefined,previousMessage:undefined,user:undefined,messageContainerStyle:{},showUserAvatar:false,inverted:true,shouldUpdateMessage:undefined,onMessageLayout:undefined};export default withBunnyKit(Message);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/Message.tsx"],"names":["makeStyles","wp","sizeLabor","left","container","flexDirection","alignItems","justifyContent","marginLeft","marginRight","right","Message","React","Component","defaultProps","messages","renderAvatar","renderBubble","renderDay","renderSystemMessage","position","currentMessage","nextMessage","previousMessage","user","messageContainerStyle","showUserAvatar","inverted","shouldUpdateMessage","onMessageLayout","undefined","next","nextProps","current","nextPropsMessage","nextPropsPreviousMessage","shouldUpdate","dayContainerStyle","dayWrapperStyle","dayTextStyle","dayTextProps","dateFormat","isDebug","dayProps","console","audioProps","audioStyle","audioContainerStyle","bottomContainerStyle","bubbleContainerStyle","bubbleWrapperStyle","quickRepliesColor","containerToNextStyle","containerToPreviousStyle","customTextStyle","imageContainerStyle","imageProps","imageStyle","isCustomViewBottom","keepReplies","lightBoxProps","linkStyle","onLongPress","onMessageLoad","onMessageLoadEnd","onMessageLoadError","onMessageLoadStart","onMessageReadyForDisplay","onPress","onQuickReply","textLongPressOptionTitles","phoneNumberOptionTitles","parsePatterns","quickReplyStyle","renderCustomView","renderMessageAudio","renderMessageImage","renderMessageSticker","renderMessageText","renderMessageVideo","renderQuickReplies","renderQuickReplySend","renderTicks","renderTime","renderUsernameOnMessage","stickerStyle","sendText","stickerContainerStyle","stickerProps","textContainerStyle","textProps","textStyle","tickStyle","timeContainerStyle","timeFormat","timeTextStyle","touchableProps","usernameStyle","videoProps","videoContainerStyle","videoStyle","audioProgressStyle","audioPlayButtonStyle","audioProgressColor","audioRemainTimeStyle","audioPlayButtonIconStyle","bubbleProps","systemMessageContainerStyle","systemMessageWrapperStyle","systemTextStyle","systemMessageProps","renderAvatarOnTop","showAvatarForEveryMessage","avatarContainerStyle","avatarImageStyle","onPressAvatar","onLongPressAvatar","avatarProps","sameUser","isSameUser","themeLabor","styles","marginBottom","withBunnyKit"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {LayoutChangeEvent, StyleSheet, View, ViewStyle} from 'react-native';\n\nimport ChatAvatar, {ChatAvatarProps} from './ChatAvatar';\nimport Bubble, {BubbleProps} from './Bubble';\nimport SystemMessage, {SystemMessageProps} from './SystemMessage';\nimport Day, {DayProps} from './Day';\n\nimport {isSameUser} from './utils';\nimport {IMessage, LeftRightStyle, PositionLeftOrRight, User} from './types';\nimport {WithBunnyKit, withBunnyKit} from '../../hooks/bunny-kit';\nimport {SizeLabor, ThemeLabor} from '../../types';\n\nconst makeStyles = (sizeLabor: SizeLabor, themeLabor: ThemeLabor) => {\n    const {wp} = sizeLabor.designsBasedOn.iphoneX;\n    return {\n        left: StyleSheet.create({\n            container: {\n                flexDirection: 'row',\n                alignItems: 'flex-end',\n                justifyContent: 'flex-start',\n                marginLeft: wp(8),\n                marginRight: 0,\n            },\n        }),\n        right: StyleSheet.create({\n            container: {\n                flexDirection: 'row',\n                alignItems: 'flex-end',\n                justifyContent: 'flex-end',\n                marginLeft: 0,\n                marginRight: wp(8),\n            },\n        }),\n    };\n};\n\nexport interface MessageProps<TMessage extends IMessage> extends BubbleProps<TMessage>,\n    DayProps<TMessage>,\n    ChatAvatarProps<TMessage>,\n    SystemMessageProps<TMessage> {\n    currentMessage?: TMessage;\n    previousMessage?: TMessage;\n    nextMessage?: TMessage;\n    position: PositionLeftOrRight;\n    messageContainerStyle?: LeftRightStyle<ViewStyle>;\n\n    shouldUpdateMessage?(\n        props: MessageProps<TMessage>,\n        nextProps: MessageProps<TMessage>,\n    ): boolean;\n\n    onMessageLayout?(event: LayoutChangeEvent): void;\n\n    renderDay?(props: DayProps<TMessage>): React.ReactNode;\n\n    renderBubble?(props: BubbleProps<TMessage>): React.ReactNode;\n\n    renderSystemMessage?(props: SystemMessageProps<TMessage>): React.ReactNode;\n\n    user?: User;\n    showUserAvatar?: boolean;\n    inverted?: boolean;\n    // TODO\n    key: any;\n}\n\nclass Message<TMessage extends IMessage> extends React.Component<MessageProps<TMessage> & WithBunnyKit> {\n    static defaultProps = {\n        messages: [],\n        renderAvatar: undefined,\n        renderBubble: undefined,\n        renderDay: undefined,\n        renderSystemMessage: undefined,\n        position: 'left' as PositionLeftOrRight,\n        currentMessage: undefined,\n        nextMessage: undefined,\n        previousMessage: undefined,\n        user: undefined,\n        messageContainerStyle: {},\n        showUserAvatar: false,\n        inverted: true,\n        shouldUpdateMessage: undefined,\n        onMessageLayout: undefined,\n    };\n\n    shouldComponentUpdate(nextProps: MessageProps<TMessage>) {\n        const next = nextProps.currentMessage!;\n        const current = this.props.currentMessage!;\n        const {previousMessage, nextMessage} = this.props;\n        const nextPropsMessage = nextProps.nextMessage;\n        const nextPropsPreviousMessage = nextProps.previousMessage;\n\n        const shouldUpdate =\n            (this.props.shouldUpdateMessage &&\n                this.props.shouldUpdateMessage(this.props, nextProps)) ||\n            false;\n\n        return (\n            next.sent !== current.sent ||\n            next.received !== current.received ||\n            next.pending !== current.pending ||\n            next.createdAt !== current.createdAt ||\n            next.text !== current.text ||\n            next.image !== current.image ||\n            next.sticker !== current.sticker ||\n            next.video !== current.video ||\n            next.audio !== current.audio ||\n            previousMessage !== nextPropsPreviousMessage ||\n            nextMessage !== nextPropsMessage ||\n            shouldUpdate\n        );\n    }\n\n    renderDay() {\n        if (this.props.currentMessage && this.props.currentMessage.createdAt) {\n            // const {messageContainerStyle, onMessageLayout, ...dayProps} = this.props\n            const {\n                currentMessage,\n                previousMessage,\n                nextMessage,\n                dayContainerStyle,\n                dayWrapperStyle,\n                dayTextStyle,\n                dayTextProps,\n                dateFormat,\n                isDebug\n            } = this.props;\n            const dayProps = {\n                currentMessage,\n                previousMessage,\n                nextMessage,\n                dayContainerStyle,\n                dayWrapperStyle,\n                dayTextStyle,\n                dayTextProps,\n                dateFormat\n            };\n\n            isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level3]Message dayProps', dayProps);\n            if (this.props.renderDay) {\n                return this.props.renderDay(dayProps);\n            }\n            return <Day<TMessage> {...dayProps} />;\n            // return <Day {...dayProps} />\n        }\n        return null;\n    }\n\n    renderBubble() {\n        // const {messageContainerStyle, onMessageLayout, ...props} = this.props\n        const {\n            audioProps,\n            audioStyle,\n            audioContainerStyle,\n            bottomContainerStyle,\n            bubbleContainerStyle,\n            bubbleWrapperStyle,\n            currentMessage,\n            quickRepliesColor,\n            containerToNextStyle,\n            containerToPreviousStyle,\n            customTextStyle,\n            isDebug,\n            imageContainerStyle,\n            imageProps,\n            imageStyle,\n            isCustomViewBottom,\n            keepReplies,\n            lightBoxProps,\n            linkStyle,\n            messages,\n            nextMessage,\n            onLongPress,\n            onMessageLoad,\n            onMessageLoadEnd,\n            onMessageLoadError,\n            onMessageLoadStart,\n            onMessageReadyForDisplay,\n            onPress,\n            onQuickReply,\n            textLongPressOptionTitles,\n            phoneNumberOptionTitles,\n            parsePatterns,\n            position,\n            previousMessage,\n            quickReplyStyle,\n            renderCustomView,\n            renderMessageAudio,\n            renderMessageImage,\n            renderMessageSticker,\n            renderMessageText,\n            renderMessageVideo,\n            renderQuickReplies,\n            renderQuickReplySend,\n            renderTicks,\n            renderTime,\n            renderUsernameOnMessage,\n            stickerStyle,\n            sendText,\n            stickerContainerStyle,\n            stickerProps,\n            textContainerStyle,\n            textProps,\n            textStyle,\n            tickStyle,\n            timeContainerStyle,\n            timeFormat,\n            timeTextStyle,\n            touchableProps,\n            usernameStyle,\n            user,\n            videoProps,\n            videoContainerStyle,\n            videoStyle,\n            audioProgressStyle,\n            audioPlayButtonStyle,\n            audioProgressColor,\n            audioRemainTimeStyle,\n            audioPlayButtonIconStyle,\n        } = this.props;\n        const bubbleProps = {\n            audioProps,\n            audioStyle,\n            audioContainerStyle,\n            bottomContainerStyle,\n            bubbleContainerStyle,\n            bubbleWrapperStyle,\n            currentMessage,\n            quickRepliesColor,\n            containerToNextStyle,\n            containerToPreviousStyle,\n            customTextStyle,\n            isDebug,\n            imageContainerStyle,\n            imageProps,\n            imageStyle,\n            isCustomViewBottom,\n            keepReplies,\n            lightBoxProps,\n            linkStyle,\n            messages,\n            nextMessage,\n            onLongPress,\n            onMessageLoad,\n            onMessageLoadEnd,\n            onMessageLoadError,\n            onMessageLoadStart,\n            onMessageReadyForDisplay,\n            onPress,\n            onQuickReply,\n            textLongPressOptionTitles,\n            phoneNumberOptionTitles,\n            parsePatterns,\n            position,\n            previousMessage,\n            quickReplyStyle,\n            renderCustomView,\n            renderMessageAudio,\n            renderMessageImage,\n            renderMessageSticker,\n            renderMessageText,\n            renderMessageVideo,\n            renderQuickReplies,\n            renderQuickReplySend,\n            renderTicks,\n            renderTime,\n            renderUsernameOnMessage,\n            stickerStyle,\n            sendText,\n            stickerContainerStyle,\n            stickerProps,\n            textContainerStyle,\n            textProps,\n            textStyle,\n            tickStyle,\n            timeContainerStyle,\n            timeFormat,\n            timeTextStyle,\n            touchableProps,\n            usernameStyle,\n            user,\n            videoProps,\n            videoContainerStyle,\n            videoStyle,\n            audioProgressStyle,\n            audioPlayButtonStyle,\n            audioProgressColor,\n            audioRemainTimeStyle,\n            audioPlayButtonIconStyle,\n        };\n        isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level3]Message bubbleProps', bubbleProps);\n\n        if (this.props.renderBubble) {\n            return this.props.renderBubble(bubbleProps);\n        }\n        return <Bubble<TMessage> {...bubbleProps} />;\n        // return <Bubble {...bubbleProps} />\n    }\n\n    renderSystemMessage() {\n        // const {messageContainerStyle, onMessageLayout, ...props} = this.props\n        const {\n            currentMessage,\n            systemMessageContainerStyle,\n            systemMessageWrapperStyle,\n            systemTextStyle,\n            isDebug\n        } = this.props;\n        const systemMessageProps = {\n            currentMessage,\n            systemMessageContainerStyle,\n            systemMessageWrapperStyle,\n            systemTextStyle\n        };\n        isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level3]Message systemMessageProps', systemMessageProps);\n        if (this.props.renderSystemMessage) {\n            return this.props.renderSystemMessage(systemMessageProps);\n        }\n        return <SystemMessage<TMessage> {...systemMessageProps} />;\n        // return <SystemMessage {...systemMessageProps} />\n    }\n\n    renderAvatar() {\n        const {user, currentMessage, showUserAvatar} = this.props;\n\n        if (\n            user &&\n            user._id &&\n            currentMessage &&\n            currentMessage.user &&\n            user._id === currentMessage.user._id &&\n            !showUserAvatar\n        ) {\n            return null;\n        }\n\n        if (\n            currentMessage &&\n            currentMessage.user &&\n            currentMessage.user.avatar === null\n        ) {\n            return null;\n        }\n\n        // const {messageContainerStyle, onMessageLayout, ...props} = this.props\n        const {\n            renderAvatarOnTop,\n            showAvatarForEveryMessage,\n            position,\n            previousMessage,\n            nextMessage,\n            avatarContainerStyle,\n            avatarImageStyle,\n            onPressAvatar,\n            onLongPressAvatar,\n            isDebug\n        } = this.props;\n        const avatarProps = {\n            renderAvatarOnTop,\n            showAvatarForEveryMessage,\n            position,\n            currentMessage,\n            previousMessage,\n            nextMessage,\n            avatarContainerStyle,\n            avatarImageStyle,\n            onPressAvatar,\n            onLongPressAvatar\n        };\n        isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level3]Message avatarProps', avatarProps);\n        return <ChatAvatar {...avatarProps} />;\n    }\n\n    render() {\n        const {\n            currentMessage,\n            onMessageLayout,\n            nextMessage,\n            position,\n            messageContainerStyle,\n        } = this.props;\n        if (currentMessage) {\n            const sameUser = isSameUser(currentMessage, nextMessage!);\n            const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n            const styles = makeStyles(sizeLabor, themeLabor);\n            return (\n                <View onLayout={onMessageLayout}>\n                    {this.renderDay()}\n                    {currentMessage.system ? (\n                        this.renderSystemMessage()\n                    ) : (\n                        <View\n                            style={[\n                                styles[position].container,\n                                {marginBottom: sameUser ? 2 : 10},\n                                !this.props.inverted && {marginBottom: 2},\n                                messageContainerStyle && messageContainerStyle[position],\n                            ]}\n                        >\n                            {this.props.position === 'left' ? this.renderAvatar() : null}\n                            {this.renderBubble()}\n                            {this.props.position === 'right' ? this.renderAvatar() : null}\n                        </View>\n                    )}\n                </View>\n            );\n        }\n        return null;\n    }\n}\n\nexport default withBunnyKit(Message);\n"]},"metadata":{},"sourceType":"module"}