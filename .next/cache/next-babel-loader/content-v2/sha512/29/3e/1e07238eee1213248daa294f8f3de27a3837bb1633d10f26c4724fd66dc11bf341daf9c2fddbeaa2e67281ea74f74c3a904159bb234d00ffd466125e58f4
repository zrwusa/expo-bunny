{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{ELanguage,ESys,EThemes}from\"../../constants\";import _ from'lodash';var initialState={isReady:false,errors:[],warns:[],themeName:EThemes.light,language:ELanguage.en,navInitialState:undefined,requestStatuses:[]};export function sysStateReducer(){var prevState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var _ref=arguments.length>1?arguments[1]:undefined,type=_ref.type,payload=_ref.payload;switch(type){case ESys.RESTORE_IS_READY:return _objectSpread(_objectSpread({},prevState),payload);case ESys.ERROR:prevState.errors.push(payload);return _objectSpread({},prevState);case ESys.CLEAR_ERRORS:var sysClearErrorPayload=payload;if(sysClearErrorPayload.all){prevState.errors=[];}else if(sysClearErrorPayload.top){prevState.errors.splice(0,sysClearErrorPayload.top);}else if(sysClearErrorPayload.last){prevState.errors.splice(prevState.errors.length-sysClearErrorPayload.last,sysClearErrorPayload.last);}return _objectSpread({},prevState);case ESys.WARN:var sysWarnPayload=payload;prevState.warns.push(sysWarnPayload.warn);return _objectSpread({},prevState);case ESys.RESTORE_NAV_INITIAL_STATE:return _objectSpread(_objectSpread({},prevState),payload);case ESys.REQUESTING:prevState.requestStatuses.push(_objectSpread(_objectSpread({},payload),{},{status:'LOADING'}));return _objectSpread({},prevState);case ESys.REQUEST_SUCCESS:var receivedPayload=payload;_.remove(prevState.requestStatuses,function(item){return item.url===receivedPayload.url&&item.method===receivedPayload.method&&item.params===receivedPayload.params;});return _objectSpread({},prevState);case ESys.REQUEST_FAILED:var requestFailedPayload=payload;_.remove(prevState.requestStatuses,function(item){return item.url===requestFailedPayload.url&&item.method===requestFailedPayload.method&&item.params===requestFailedPayload.params;});return _objectSpread({},prevState);default:return prevState;}}","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/store/reducers/sys.ts"],"names":["initialState","isReady","errors","warns","themeName","EThemes","language","ELanguage","navInitialState","requestStatuses","prevState","type","payload","ESys","sysClearErrorPayload","sysWarnPayload","status","receivedPayload","_","item","requestFailedPayload"],"mappings":"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","sourcesContent":["import {ELanguage, ESys, EThemes} from '../../constants';\nimport {\n    RequestConfig,\n    RequestFailedPayload,\n    RequestReceivedPayload,\n    RestoreIsReadyPayload,\n    RestoreNavInitialStatePayload,\n    SysClearErrorPayload,\n    SysState,\n    SysWarnPayload\n} from '../../types';\nimport {SysActions} from '../actions';\nimport _ from 'lodash';\n\nconst initialState: SysState = {\n    isReady: false,\n    errors: [],\n    warns: [],\n    themeName: EThemes.light,\n    language: ELanguage.en,\n    navInitialState: undefined,\n    requestStatuses: []\n};\n\nexport function sysStateReducer(prevState: SysState = initialState, {type, payload}: SysActions): SysState {\n    switch (type) {\n        case ESys.RESTORE_IS_READY:\n            return {\n                ...prevState,\n                ...<RestoreIsReadyPayload>payload,\n            };\n        case ESys.ERROR:\n            prevState.errors.push(<Error>payload);\n            return {\n                ...prevState,\n            };\n\n        case ESys.CLEAR_ERRORS:\n            const sysClearErrorPayload = payload as SysClearErrorPayload;\n            if (sysClearErrorPayload.all) {\n                prevState.errors = [];\n            } else if (sysClearErrorPayload.top) {\n                prevState.errors.splice(0, sysClearErrorPayload.top);\n            } else if (sysClearErrorPayload.last) {\n                prevState.errors.splice(prevState.errors.length - sysClearErrorPayload.last, sysClearErrorPayload.last);\n            }\n            return {...prevState};\n\n        case ESys.WARN:\n            const sysWarnPayload = payload as SysWarnPayload;\n            prevState.warns.push(sysWarnPayload.warn);\n            return {\n                ...prevState,\n            };\n\n        case ESys.RESTORE_NAV_INITIAL_STATE:\n            return {\n                ...prevState,\n                ...<RestoreNavInitialStatePayload>payload\n            };\n        case ESys.REQUESTING:\n            prevState.requestStatuses.push({...<RequestConfig>payload, status: 'LOADING'});\n            return {\n                ...prevState,\n            };\n        case ESys.REQUEST_SUCCESS:\n            const receivedPayload = payload as RequestReceivedPayload;\n            _.remove(prevState.requestStatuses, item => (item.url === receivedPayload.url && item.method === receivedPayload.method && item.params === receivedPayload.params));\n            return {\n                ...prevState,\n            };\n        case ESys.REQUEST_FAILED:\n            const requestFailedPayload = payload as RequestFailedPayload;\n            _.remove(prevState.requestStatuses, item => (item.url === requestFailedPayload.url && item.method === requestFailedPayload.method && item.params === requestFailedPayload.params));\n            return {\n                ...prevState,\n            };\n        default:\n            return prevState;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}