{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/screens/DemoSearch/DemoSearch.tsx\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect,useState}from'react';import{Text,View}from\"../../components/UI\";import{shortenTFunctionKey}from\"../../providers/i18n-labor\";import{makeContainerStyles}from\"../../containers\";import Animated from\"react-native-web/dist/exports/Animated\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import{randomText,wait}from\"../../utils\";import{FollowUpSearchBar}from\"../../components/FollowUpSearchBar\";import{makeStyles}from\"./styles\";import{collectBizLogicResult}from\"../../store/actions\";import{bizLogicError}from\"../../helpers\";import config from\"../../config\";import{useBunnyKit}from\"../../hooks/bunny-kit\";export function DemoSearchScreen(_ref){var _this=this;var route=_ref.route,navigation=_ref.navigation;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,t=_useBunnyKit.t;var st=shortenTFunctionKey(t,'screens.DemoSearch');var containerStyles=makeContainerStyles(sizeLabor,themeLabor);var styles=makeStyles(sizeLabor,themeLabor);var _useState=useState(new Animated.Value(0)),_useState2=_slicedToArray(_useState,1),scrollYValue=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var getDummyData=function getDummyData(){var dummyData=[];for(var i=0;i<10000;i++){dummyData.push({id:i,text:randomText(30)});}return dummyData;};useEffect(function(){},[]);var mockSearch=function mockSearch(keywordText){return _regeneratorRuntime.async(function mockSearch$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(resolve,reject){wait(1000).then(function(){var dummyData=getDummyData();var result=dummyData.filter(function(item){return item.text.includes(keywordText);});return Math.random()>0.1?resolve(result):reject(new Error('error when searching'));});}));case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);};return React.createElement(SafeAreaView,{style:containerStyles.Screen,__self:this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:9}},React.createElement(FollowUpSearchBar,{scrollYValue:scrollYValue,defaultKeywords:[],onSearch:function _callee(searchText){var searchResult;return _regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(mockSearch(searchText));case 3:searchResult=_context2.sent;setData(searchResult);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);collectBizLogicResult(bizLogicError(_context2.t0));case 10:case\"end\":return _context2.stop();}}},null,null,[[0,7]],Promise);},__self:this,__source:{fileName:_jsxFileName,lineNumber:65,columnNumber:13}}),React.createElement(Animated.FlatList,{data:data,showsVerticalScrollIndicator:false,style:styles.list,onScroll:Animated.event([{nativeEvent:{contentOffset:{y:scrollYValue}}}],{useNativeDriver:config.useNativeDriver}),keyExtractor:function keyExtractor(item){return item.id.toString();},contentInsetAdjustmentBehavior:\"automatic\",renderItem:function renderItem(_ref2){var item=_ref2.item;return React.createElement(View,{style:styles.item,__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:41}},React.createElement(View,{style:styles.itemBox,__self:_this,__source:{fileName:_jsxFileName,lineNumber:88,columnNumber:21}},React.createElement(Text,{style:styles.itemText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:89,columnNumber:25}},item.id),React.createElement(Text,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:90,columnNumber:25}},item.text)));},__self:this,__source:{fileName:_jsxFileName,lineNumber:76,columnNumber:13}}));}","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/screens/DemoSearch/DemoSearch.tsx"],"names":["route","navigation","sizeLabor","themeLabor","t","useBunnyKit","st","shortenTFunctionKey","containerStyles","makeContainerStyles","styles","makeStyles","scrollYValue","useState","Animated","data","setData","getDummyData","dummyData","i","id","text","randomText","useEffect","mockSearch","wait","result","item","Math","resolve","reject","searchResult","collectBizLogicResult","bizLogicError","nativeEvent","contentOffset","y","useNativeDriver","config"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {Text, View} from '../../components/UI';\nimport {RouteProp} from '@react-navigation/native';\nimport {DemoSearchDummyDatum, RootStackParam} from '../../types';\nimport {shortenTFunctionKey} from '../../providers/i18n-labor';\nimport {makeContainerStyles} from '../../containers';\nimport {Animated, SafeAreaView} from 'react-native';\nimport {randomText, wait} from '../../utils';\nimport {FollowUpSearchBar} from '../../components/FollowUpSearchBar';\nimport {makeStyles} from './styles';\nimport {collectBizLogicResult} from '../../store/actions';\nimport {bizLogicError} from '../../helpers';\nimport {StackNavigationProp} from '@react-navigation/stack';\nimport config from '../../config';\nimport {useBunnyKit} from '../../hooks/bunny-kit';\n\n\ntype DemoSearchRouteProp = RouteProp<RootStackParam, 'DemoSearch'>;\ntype DemoSearchNavigationProp = StackNavigationProp<RootStackParam, 'DemoSearch'>;\n\nexport interface DemoSearchProps {\n    route: DemoSearchRouteProp,\n    navigation: DemoSearchNavigationProp\n}\n\n\nexport function DemoSearchScreen({route, navigation}: DemoSearchProps) {\n    const {sizeLabor, themeLabor, t} = useBunnyKit();\n    const st = shortenTFunctionKey(t, 'screens.DemoSearch');\n    const containerStyles = makeContainerStyles(sizeLabor, themeLabor);\n\n    const styles = makeStyles(sizeLabor, themeLabor);\n\n    const [scrollYValue] = useState(new Animated.Value(0));\n    const [data, setData] = useState<DemoSearchDummyDatum[]>([]);\n\n\n    const getDummyData = () => {\n        const dummyData: DemoSearchDummyDatum[] = [];\n\n        for (let i = 0; i < 10000; i++) {\n            dummyData.push({id: i, text: randomText(30)});\n        }\n        return dummyData;\n    };\n\n    useEffect(() => {\n    }, []);\n\n\n    const mockSearch = async (keywordText: string) => {\n        return new Promise<DemoSearchDummyDatum[]>((resolve, reject) => {\n            wait(1000).then(() => {\n                const dummyData = getDummyData();\n                const result = dummyData.filter((item) => {\n                    return item.text.includes(keywordText);\n                });\n                return Math.random() > 0.1 ? resolve(result) : reject(new Error('error when searching'));\n            });\n        });\n    };\n    return (\n        <SafeAreaView style={containerStyles.Screen}>\n            <FollowUpSearchBar scrollYValue={scrollYValue}\n                               defaultKeywords={[]}\n                               onSearch={async (searchText) => {\n                                   try {\n                                       const searchResult = await mockSearch(searchText);\n                                       setData(searchResult);\n                                   } catch (e: any) {\n                                       collectBizLogicResult(bizLogicError(e));\n                                   }\n                               }}\n            />\n            <Animated.FlatList\n                data={data}\n                showsVerticalScrollIndicator={false}\n                style={styles.list}\n                onScroll={Animated.event(\n                    [{nativeEvent: {contentOffset: {y: scrollYValue}}}],\n                    {useNativeDriver: config.useNativeDriver},\n                )}\n                keyExtractor={item => item.id.toString()}\n                contentInsetAdjustmentBehavior=\"automatic\"\n                renderItem={({item}) => <View\n                    style={styles.item}>\n                    <View style={styles.itemBox}>\n                        <Text style={styles.itemText}>{item.id}</Text>\n                        <Text>{item.text}</Text>\n                    </View>\n                </View>}\n            />\n            {/*<Animated.ScrollView*/}\n            {/*    showsVerticalScrollIndicator={false}*/}\n            {/*    style={styles.list}*/}\n            {/*    onScroll={Animated.event(*/}\n            {/*        [{nativeEvent: {contentOffset: {y: scrollYValue}}}],*/}\n            {/*        {useNativeDriver: true},*/}\n            {/*    )}*/}\n            {/*    contentInsetAdjustmentBehavior=\"automatic\">*/}\n            {/*    {data.map(item => <View key={uuidV4()}*/}\n            {/*                            style={{height: 100, width: 375, padding: 10}}>*/}\n            {/*        <View style={{flexDirection: 'row'}}>*/}\n            {/*            <Text style={{marginRight: 10}}>{item.id}</Text>*/}\n            {/*            <Text>{item.text}</Text>*/}\n            {/*        </View>*/}\n            {/*    </View>)}*/}\n            {/*</Animated.ScrollView>*/}\n        </SafeAreaView>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}