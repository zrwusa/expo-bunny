{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageContainer.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import LoadEarlier from\"./LoadEarlier\";import Message from\"./Message\";import{warning}from\"./utils\";import TypingIndicator from\"./TypingIndicator\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var makeStyles=function makeStyles(sizeLabor,themeLabor){var ms=sizeLabor.ms;var wp=sizeLabor.designsBasedOn.iphoneX.wp;var colors=themeLabor.theme.colors;return StyleSheet.create({container:{flex:1},containerAlignTop:{flexDirection:'row',alignItems:'flex-start'},contentContainerStyle:{flexGrow:1,justifyContent:'flex-start'},emptyChatContainer:{flex:1,transform:[{scaleY:-1}]},headerWrapper:{flex:1},listStyle:{flex:1},scrollToBottomStyle:{opacity:0.8,position:'absolute',right:wp(10),bottom:wp(30),zIndex:999,height:wp(40),width:wp(40),borderRadius:wp(20),backgroundColor:colors.backdrop,alignItems:'center',justifyContent:'center',shadowColor:colors.shadow,shadowOpacity:0.5,shadowOffset:{width:0,height:0},shadowRadius:wp(1)},scrollToBottomButton:{fontSize:ms.fs.m,color:colors.text3}});};var MessageContainer=function(_React$PureComponent){_inherits(MessageContainer,_React$PureComponent);var _super=_createSuper(MessageContainer);function MessageContainer(props){var _this;_classCallCheck(this,MessageContainer);_this=_super.call(this,props);_this.state={showScrollBottom:false,hasScrolled:false};_this.renderTypingIndicator=function(){if(Platform.OS==='web'){return null;}return React.createElement(TypingIndicator,{isTyping:_this.props.isTyping||false,__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:154,columnNumber:16}});};_this.renderFooter=function(){if(_this.props.renderFooter){return _this.props.renderFooter(_this.props);}return _this.renderTypingIndicator();};_this.renderLoadEarlier=function(){if(_this.props.loadEarlier===true){var _this$props=_this.props,_onLoadEarlier=_this$props.onLoadEarlier,isLoadingEarlier=_this$props.isLoadingEarlier,loadEarlierLabel=_this$props.loadEarlierLabel,loadEarlierContainerStyle=_this$props.loadEarlierContainerStyle,loadEarlierWrapperStyle=_this$props.loadEarlierWrapperStyle,loadEarlierTextStyle=_this$props.loadEarlierTextStyle,activityIndicatorStyle=_this$props.activityIndicatorStyle,activityIndicatorColor=_this$props.activityIndicatorColor,activityIndicatorSize=_this$props.activityIndicatorSize,isDebug=_this$props.isDebug;var loadEarlierProps={onLoadEarlier:_onLoadEarlier,isLoadingEarlier:isLoadingEarlier,loadEarlierLabel:loadEarlierLabel,loadEarlierContainerStyle:loadEarlierContainerStyle,loadEarlierWrapperStyle:loadEarlierWrapperStyle,loadEarlierTextStyle:loadEarlierTextStyle,activityIndicatorStyle:activityIndicatorStyle,activityIndicatorColor:activityIndicatorColor,activityIndicatorSize:activityIndicatorSize};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level2]MessageContainer loadEarlierProps',loadEarlierProps);if(_this.props.renderLoadEarlier){return _this.props.renderLoadEarlier(loadEarlierProps);}return React.createElement(LoadEarlier,_extends({},loadEarlierProps,{__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:198,columnNumber:20}}));}return null;};_this.scrollToBottom=function(){var animated=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var inverted=_this.props.inverted;if(inverted){_this.scrollTo({offset:0,animated:animated});}else if(_this.props.forwardRef&&_this.props.forwardRef.current){_this.props.forwardRef.current.scrollToEnd({animated:animated});}};_this.handleOnScroll=function(event){var _event$nativeEvent=event.nativeEvent,contentOffsetY=_event$nativeEvent.contentOffset.y,contentSizeHeight=_event$nativeEvent.contentSize.height,layoutMeasurementHeight=_event$nativeEvent.layoutMeasurement.height;var scrollToBottomOffset=_this.props.scrollToBottomOffset;if(_this.props.inverted){if(contentOffsetY>scrollToBottomOffset){_this.setState({showScrollBottom:true,hasScrolled:true});}else{_this.setState({showScrollBottom:false,hasScrolled:true});}}else{if(contentOffsetY<scrollToBottomOffset&&contentSizeHeight-layoutMeasurementHeight>scrollToBottomOffset){_this.setState({showScrollBottom:true,hasScrolled:true});}else{_this.setState({showScrollBottom:false,hasScrolled:true});}}};_this.renderRow=function(_ref){var item=_ref.item,index=_ref.index;if(!item._id&&item._id!==0){warning('BunnyChat: `_id` is missing for message',JSON.stringify(item));}if(!item.user){if(!item.system){warning('BunnyChat: `user` is missing for message',JSON.stringify(item));}item.user={_id:0};}var _this$props2=_this.props,messages=_this$props2.messages,user=_this$props2.user,inverted=_this$props2.inverted;if(messages&&user){var previousMessage=(inverted?messages[index+1]:messages[index-1])||{};var nextMessage=(inverted?messages[index-1]:messages[index+1])||{};var _this$props3=_this.props,audioContainerStyle=_this$props3.audioContainerStyle,audioStyle=_this$props3.audioStyle,audioProps=_this$props3.audioProps,avatarContainerStyle=_this$props3.avatarContainerStyle,avatarImageStyle=_this$props3.avatarImageStyle,avatarTextStyle=_this$props3.avatarTextStyle,bubbleWrapperStyle=_this$props3.bubbleWrapperStyle,bubbleContainerStyle=_this$props3.bubbleContainerStyle,bottomContainerStyle=_this$props3.bottomContainerStyle,customTextStyle=_this$props3.customTextStyle,containerToPreviousStyle=_this$props3.containerToPreviousStyle,containerToNextStyle=_this$props3.containerToNextStyle,quickRepliesColor=_this$props3.quickRepliesColor,dateFormat=_this$props3.dateFormat,dayContainerStyle=_this$props3.dayContainerStyle,dayTextProps=_this$props3.dayTextProps,dayTextStyle=_this$props3.dayTextStyle,dayWrapperStyle=_this$props3.dayWrapperStyle,isCustomViewBottom=_this$props3.isCustomViewBottom,imageStyle=_this$props3.imageStyle,imageProps=_this$props3.imageProps,imageContainerStyle=_this$props3.imageContainerStyle,isDebug=_this$props3.isDebug,keepReplies=_this$props3.keepReplies,lightBoxProps=_this$props3.lightBoxProps,linkStyle=_this$props3.linkStyle,messageContainerStyle=_this$props3.messageContainerStyle,phoneNumberOptionTitles=_this$props3.phoneNumberOptionTitles,onLongPress=_this$props3.onLongPress,onMessageLoad=_this$props3.onMessageLoad,onMessageLoadEnd=_this$props3.onMessageLoadEnd,onMessageLoadError=_this$props3.onMessageLoadError,onMessageLoadStart=_this$props3.onMessageLoadStart,onMessageReadyForDisplay=_this$props3.onMessageReadyForDisplay,onPress=_this$props3.onPress,_onQuickReply=_this$props3.onQuickReply,onLongPressAvatar=_this$props3.onLongPressAvatar,onMessageLayout=_this$props3.onMessageLayout,onPressAvatar=_this$props3.onPressAvatar,parsePatterns=_this$props3.parsePatterns,quickReplyStyle=_this$props3.quickReplyStyle,renderCustomView=_this$props3.renderCustomView,renderMessageAudio=_this$props3.renderMessageAudio,renderMessageImage=_this$props3.renderMessageImage,renderMessageSticker=_this$props3.renderMessageSticker,renderMessageText=_this$props3.renderMessageText,renderMessageVideo=_this$props3.renderMessageVideo,renderQuickReplies=_this$props3.renderQuickReplies,renderQuickReplySend=_this$props3.renderQuickReplySend,renderTicks=_this$props3.renderTicks,renderTime=_this$props3.renderTime,renderUsernameOnMessage=_this$props3.renderUsernameOnMessage,renderAvatar=_this$props3.renderAvatar,renderAvatarOnTop=_this$props3.renderAvatarOnTop,renderBubble=_this$props3.renderBubble,renderDay=_this$props3.renderDay,renderSystemMessage=_this$props3.renderSystemMessage,stickerProps=_this$props3.stickerProps,stickerContainerStyle=_this$props3.stickerContainerStyle,sendText=_this$props3.sendText,stickerStyle=_this$props3.stickerStyle,shouldUpdateMessage=_this$props3.shouldUpdateMessage,showAvatarForEveryMessage=_this$props3.showAvatarForEveryMessage,showUserAvatar=_this$props3.showUserAvatar,systemMessageContainerStyle=_this$props3.systemMessageContainerStyle,systemMessageWrapperStyle=_this$props3.systemMessageWrapperStyle,systemTextStyle=_this$props3.systemTextStyle,touchableProps=_this$props3.touchableProps,timeTextStyle=_this$props3.timeTextStyle,timeFormat=_this$props3.timeFormat,timeContainerStyle=_this$props3.timeContainerStyle,tickStyle=_this$props3.tickStyle,textStyle=_this$props3.textStyle,textProps=_this$props3.textProps,textContainerStyle=_this$props3.textContainerStyle,usernameStyle=_this$props3.usernameStyle,videoContainerStyle=_this$props3.videoContainerStyle,videoStyle=_this$props3.videoStyle,videoProps=_this$props3.videoProps,audioProgressStyle=_this$props3.audioProgressStyle,audioPlayButtonStyle=_this$props3.audioPlayButtonStyle,audioProgressColor=_this$props3.audioProgressColor,audioRemainTimeStyle=_this$props3.audioRemainTimeStyle,audioPlayButtonIconStyle=_this$props3.audioPlayButtonIconStyle;var messageProps={audioContainerStyle:audioContainerStyle,audioStyle:audioStyle,audioProps:audioProps,avatarContainerStyle:avatarContainerStyle,avatarImageStyle:avatarImageStyle,avatarTextStyle:avatarTextStyle,bubbleWrapperStyle:bubbleWrapperStyle,bubbleContainerStyle:bubbleContainerStyle,bottomContainerStyle:bottomContainerStyle,customTextStyle:customTextStyle,containerToPreviousStyle:containerToPreviousStyle,containerToNextStyle:containerToNextStyle,quickRepliesColor:quickRepliesColor,dateFormat:dateFormat,dayContainerStyle:dayContainerStyle,dayTextProps:dayTextProps,dayTextStyle:dayTextStyle,dayWrapperStyle:dayWrapperStyle,isCustomViewBottom:isCustomViewBottom,imageStyle:imageStyle,imageProps:imageProps,imageContainerStyle:imageContainerStyle,isDebug:isDebug,keepReplies:keepReplies,lightBoxProps:lightBoxProps,linkStyle:linkStyle,messageContainerStyle:messageContainerStyle,nextMessage:nextMessage,phoneNumberOptionTitles:phoneNumberOptionTitles,onLongPress:onLongPress,onMessageLoad:onMessageLoad,onMessageLoadEnd:onMessageLoadEnd,onMessageLoadError:onMessageLoadError,onMessageLoadStart:onMessageLoadStart,onMessageReadyForDisplay:onMessageReadyForDisplay,onPress:onPress,onQuickReply:_onQuickReply,onLongPressAvatar:onLongPressAvatar,onMessageLayout:onMessageLayout,onPressAvatar:onPressAvatar,parsePatterns:parsePatterns,previousMessage:previousMessage,quickReplyStyle:quickReplyStyle,renderCustomView:renderCustomView,renderMessageAudio:renderMessageAudio,renderMessageImage:renderMessageImage,renderMessageSticker:renderMessageSticker,renderMessageText:renderMessageText,renderMessageVideo:renderMessageVideo,renderQuickReplies:renderQuickReplies,renderQuickReplySend:renderQuickReplySend,renderTicks:renderTicks,renderTime:renderTime,renderUsernameOnMessage:renderUsernameOnMessage,renderAvatar:renderAvatar,renderAvatarOnTop:renderAvatarOnTop,renderBubble:renderBubble,renderDay:renderDay,renderSystemMessage:renderSystemMessage,stickerProps:stickerProps,stickerContainerStyle:stickerContainerStyle,sendText:sendText,stickerStyle:stickerStyle,shouldUpdateMessage:shouldUpdateMessage,showAvatarForEveryMessage:showAvatarForEveryMessage,showUserAvatar:showUserAvatar,systemMessageContainerStyle:systemMessageContainerStyle,systemMessageWrapperStyle:systemMessageWrapperStyle,systemTextStyle:systemTextStyle,touchableProps:touchableProps,timeTextStyle:timeTextStyle,timeFormat:timeFormat,timeContainerStyle:timeContainerStyle,tickStyle:tickStyle,textStyle:textStyle,textProps:textProps,textContainerStyle:textContainerStyle,usernameStyle:usernameStyle,user:user,videoContainerStyle:videoContainerStyle,videoStyle:videoStyle,videoProps:videoProps,audioProgressStyle:audioProgressStyle,audioPlayButtonStyle:audioPlayButtonStyle,audioProgressColor:audioProgressColor,audioRemainTimeStyle:audioRemainTimeStyle,audioPlayButtonIconStyle:audioPlayButtonIconStyle,inverted:inverted,key:item._id,currentMessage:item,position:item.user._id===user._id?'right':'left'};isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level2]MessageContainer messageProps',messageProps);if(_this.props.renderMessage){return _this.props.renderMessage(messageProps);}return React.createElement(Message,_extends({},messageProps,{__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:449,columnNumber:20}}));}return null;};_this.renderChatEmpty=function(){var _this$props$bunnyKit=_this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);if(_this.props.renderChatEmpty){return _this.props.inverted?_this.props.renderChatEmpty():React.createElement(View,{style:styles.emptyChatContainer,__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:462,columnNumber:17}},_this.props.renderChatEmpty());}return React.createElement(View,{style:styles.container,__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:467,columnNumber:16}});};_this.renderHeaderWrapper=function(){var _this$props$bunnyKit2=_this.props.bunnyKit,sizeLabor=_this$props$bunnyKit2.sizeLabor,themeLabor=_this$props$bunnyKit2.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{style:styles.headerWrapper,__self:_assertThisInitialized(_this),__source:{fileName:_jsxFileName,lineNumber:474,columnNumber:13}},_this.renderLoadEarlier());};_this.onLayoutList=function(){if(!_this.props.inverted&&!!_this.props.messages&&_this.props.messages.length){setTimeout(function(){return _this.scrollToBottom&&_this.scrollToBottom(false);},15*_this.props.messages.length);}};_this.onEndReached=function(_ref2){var distanceFromEnd=_ref2.distanceFromEnd;var _this$props4=_this.props,loadEarlier=_this$props4.loadEarlier,onLoadEarlier=_this$props4.onLoadEarlier,infiniteScroll=_this$props4.infiniteScroll,isLoadingEarlier=_this$props4.isLoadingEarlier;if(infiniteScroll&&(_this.state.hasScrolled||distanceFromEnd>0)&&distanceFromEnd<=100&&loadEarlier&&onLoadEarlier&&!isLoadingEarlier&&Platform.OS!=='web'){onLoadEarlier();}};_this.keyExtractor=function(item){return\"\"+item._id;};return _this;}_createClass(MessageContainer,[{key:\"scrollTo\",value:function scrollTo(options){if(this.props.forwardRef&&this.props.forwardRef.current&&options){this.props.forwardRef.current.scrollToOffset(options);}}},{key:\"renderScrollBottomComponent\",value:function renderScrollBottomComponent(){var _this$props5=this.props,renderScrollToBottom=_this$props5.renderScrollToBottom,_this$props5$bunnyKit=_this$props5.bunnyKit,sizeLabor=_this$props5$bunnyKit.sizeLabor,themeLabor=_this$props5$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);if(renderScrollToBottom){return renderScrollToBottom();}return React.createElement(Text,{style:styles.scrollToBottomButton,__self:this,__source:{fileName:_jsxFileName,lineNumber:485,columnNumber:16}},\"v\");}},{key:\"renderScrollToBottomWrapper\",value:function renderScrollToBottomWrapper(){var _this2=this;var propsStyle=this.props.scrollToBottomStyle||{};var _this$props$bunnyKit3=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit3.sizeLabor,themeLabor=_this$props$bunnyKit3.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{style:[styles.scrollToBottomStyle,propsStyle],__self:this,__source:{fileName:_jsxFileName,lineNumber:493,columnNumber:13}},React.createElement(TouchableOpacity,{onPress:function onPress(){return _this2.scrollToBottom();},hitSlop:{top:5,left:5,right:5,bottom:5},__self:this,__source:{fileName:_jsxFileName,lineNumber:494,columnNumber:17}},this.renderScrollBottomComponent()));}},{key:\"render\",value:function render(){var _this$props6=this.props,inverted=_this$props6.inverted,_this$props6$bunnyKit=_this$props6.bunnyKit,sizeLabor=_this$props6$bunnyKit.sizeLabor,themeLabor=_this$props6$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{style:this.props.alignTop?styles.containerAlignTop:styles.container,__self:this,__source:{fileName:_jsxFileName,lineNumber:543,columnNumber:13}},this.state.showScrollBottom&&this.props.scrollToBottom?this.renderScrollToBottomWrapper():null,React.createElement(FlatList,_extends({ref:this.props.forwardRef,extraData:[this.props.extraData,this.props.isTyping],keyExtractor:this.keyExtractor,enableEmptySections:true,automaticallyAdjustContentInsets:false,inverted:inverted,data:this.props.messages,style:styles.listStyle,contentContainerStyle:styles.contentContainerStyle,renderItem:this.renderRow},this.props.invertibleScrollViewProps,{ListEmptyComponent:this.renderChatEmpty,ListFooterComponent:inverted?this.renderHeaderWrapper:this.renderFooter,ListHeaderComponent:inverted?this.renderFooter:this.renderHeaderWrapper,onScroll:this.handleOnScroll,scrollEventThrottle:100,onLayout:this.onLayoutList,onEndReached:this.onEndReached,onEndReachedThreshold:0.1},this.props.listViewProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:552,columnNumber:17}})));}}]);return MessageContainer;}(React.PureComponent);MessageContainer.defaultProps={messages:[],user:undefined,isTyping:false,renderChatEmpty:undefined,renderFooter:undefined,renderMessage:undefined,onLoadEarlier:function onLoadEarlier(){},onQuickReply:function onQuickReply(){},inverted:true,loadEarlier:false,listViewProps:{},invertibleScrollViewProps:{},extraData:null,scrollToBottom:false,scrollToBottomOffset:200,alignTop:false,scrollToBottomStyle:{},infiniteScroll:false,isLoadingEarlier:false};export default withBunnyKit(MessageContainer);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageContainer.tsx"],"names":["makeStyles","ms","sizeLabor","wp","colors","themeLabor","container","flex","containerAlignTop","flexDirection","alignItems","contentContainerStyle","flexGrow","justifyContent","emptyChatContainer","transform","scaleY","headerWrapper","listStyle","scrollToBottomStyle","opacity","position","right","bottom","zIndex","height","width","borderRadius","backgroundColor","shadowColor","shadowOpacity","shadowOffset","shadowRadius","scrollToBottomButton","fontSize","color","text3","MessageContainer","React","PureComponent","defaultProps","messages","user","isTyping","renderChatEmpty","renderFooter","renderMessage","onLoadEarlier","onQuickReply","inverted","loadEarlier","listViewProps","invertibleScrollViewProps","extraData","scrollToBottom","scrollToBottomOffset","alignTop","infiniteScroll","isLoadingEarlier","state","showScrollBottom","hasScrolled","Platform","loadEarlierLabel","loadEarlierContainerStyle","loadEarlierWrapperStyle","loadEarlierTextStyle","activityIndicatorStyle","activityIndicatorColor","activityIndicatorSize","isDebug","loadEarlierProps","console","animated","offset","contentOffsetY","contentSizeHeight","layoutMeasurementHeight","event","item","index","warning","JSON","_id","previousMessage","nextMessage","audioContainerStyle","audioStyle","audioProps","avatarContainerStyle","avatarImageStyle","avatarTextStyle","bubbleWrapperStyle","bubbleContainerStyle","bottomContainerStyle","customTextStyle","containerToPreviousStyle","containerToNextStyle","quickRepliesColor","dateFormat","dayContainerStyle","dayTextProps","dayTextStyle","dayWrapperStyle","isCustomViewBottom","imageStyle","imageProps","imageContainerStyle","keepReplies","lightBoxProps","linkStyle","messageContainerStyle","phoneNumberOptionTitles","onLongPress","onMessageLoad","onMessageLoadEnd","onMessageLoadError","onMessageLoadStart","onMessageReadyForDisplay","onPress","onLongPressAvatar","onMessageLayout","onPressAvatar","parsePatterns","quickReplyStyle","renderCustomView","renderMessageAudio","renderMessageImage","renderMessageSticker","renderMessageText","renderMessageVideo","renderQuickReplies","renderQuickReplySend","renderTicks","renderTime","renderUsernameOnMessage","renderAvatar","renderAvatarOnTop","renderBubble","renderDay","renderSystemMessage","stickerProps","stickerContainerStyle","sendText","stickerStyle","shouldUpdateMessage","showAvatarForEveryMessage","showUserAvatar","systemMessageContainerStyle","systemMessageWrapperStyle","systemTextStyle","touchableProps","timeTextStyle","timeFormat","timeContainerStyle","tickStyle","textStyle","textProps","textContainerStyle","usernameStyle","videoContainerStyle","videoStyle","videoProps","audioProgressStyle","audioPlayButtonStyle","audioProgressColor","audioRemainTimeStyle","audioPlayButtonIconStyle","messageProps","key","currentMessage","styles","renderScrollToBottom","propsStyle","top","left","setTimeout","distanceFromEnd","renderRow","withBunnyKit"],"mappings":"ovCAAA,MAAA,CAAA,KAAA,KAAA,OAAA,C,kXAiBA,MAAA,CAAA,WAAA,qBACA,MAAA,CAAA,OAAA,iBAEA,OAAA,OAAA,eACA,MAAA,CAAA,eAAA,yBACA,OAAA,YAAA,6BAGA,GAAMA,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAA,SAAA,CAAA,UAAA,CAAkD,CACjE,GAAOC,CAAAA,EAAP,CAAaC,SAAb,CAAA,EAAA,CACA,GAAOC,CAAAA,EAAP,CAAaD,SAAS,CAATA,cAAAA,CAAb,OAAaA,CAAb,EAAA,CACA,GAAeE,CAAAA,MAAf,CAA0BC,UAA1B,CAAA,KAA0BA,CAA1B,MAAA,CACA,MAAO,CAAA,UAAU,CAAV,MAAA,CAAkB,CACrBC,SAAS,CAAE,CACPC,IAAI,CAAE,CADC,CADU,CAIrBC,iBAAiB,CAAE,CACfC,aAAa,CADE,KAAA,CAEfC,UAAU,CAAE,YAFG,CAJE,CAQrBC,qBAAqB,CAAE,CACnBC,QAAQ,CADW,CAAA,CAEnBC,cAAc,CAAE,YAFG,CARF,CAYrBC,kBAAkB,CAAE,CAChBP,IAAI,CADY,CAAA,CAEhBQ,SAAS,CAAE,CAAC,CAACC,MAAM,CAAE,CAAC,CAAV,CAAD,CAFK,CAZC,CAgBrBC,aAAa,CAAE,CACXV,IAAI,CAAE,CADK,CAhBM,CAmBrBW,SAAS,CAAE,CACPX,IAAI,CAAE,CADC,CAnBU,CAsBrBY,mBAAmB,CAAE,CACjBC,OAAO,CADU,GAAA,CAEjBC,QAAQ,CAFS,UAAA,CAGjBC,KAAK,CAAEnB,EAAE,CAHQ,EAGR,CAHQ,CAIjBoB,MAAM,CAAEpB,EAAE,CAJO,EAIP,CAJO,CAKjBqB,MAAM,CALW,GAAA,CAMjBC,MAAM,CAAEtB,EAAE,CANO,EAMP,CANO,CAOjBuB,KAAK,CAAEvB,EAAE,CAPQ,EAOR,CAPQ,CAQjBwB,YAAY,CAAExB,EAAE,CARC,EAQD,CARC,CASjByB,eAAe,CAAExB,MAAM,CATN,QAAA,CAUjBM,UAAU,CAVO,QAAA,CAWjBG,cAAc,CAXG,QAAA,CAYjBgB,WAAW,CAAEzB,MAAM,CAZF,MAAA,CAajB0B,aAAa,CAbI,GAAA,CAcjBC,YAAY,CAAE,CAACL,KAAK,CAAN,CAAA,CAAWD,MAAM,CAAE,CAAnB,CAdG,CAejBO,YAAY,CAAE7B,EAAE,CAAA,CAAA,CAfC,CAtBA,CAuCrB8B,oBAAoB,CAAE,CAClBC,QAAQ,CAAEjC,EAAE,CAAFA,EAAAA,CADQ,CAAA,CAElBkC,KAAK,CAAE/B,MAAM,CAACgC,KAFI,CAvCD,CAAlB,CAAP,CAJJ,CAAA,C,GAyFMC,CAAAA,gB,2HA+BF,QAAA,CAAA,gBAAA,CAAA,KAAA,CAAmE,CAAA,GAAA,CAAA,KAAA,CAAA,eAAA,CAAA,IAAA,CAAA,gBAAA,CAAA,CAC/D,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAD+D,KAAA,CALnEsB,KAKmE,CAL3D,CACJC,gBAAgB,CADZ,KAAA,CAEJC,WAAW,CAAE,KAFT,CAK2D,CAAA,KAAA,CAAA,qBAAA,CAI3C,UAAM,CAC1B,GAAIC,QAAQ,CAARA,EAAAA,GAAJ,KAAA,CAA2B,CACvB,MAAA,KAAA,CACH,CACD,MAAO,CAAA,KAAA,CAAA,aAAA,CAAA,eAAA,CAAA,CAAiB,QAAQ,CAAE,KAAA,CAAA,KAAA,CAAA,QAAA,EAA3B,KAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAP,CAR+D,CAAA,CAAA,KAAA,CAAA,YAAA,CAWpD,UAAM,CACjB,GAAI,KAAA,CAAA,KAAA,CAAJ,YAAA,CAA6B,CACzB,MAAO,CAAA,KAAA,CAAA,KAAA,CAAA,YAAA,CAAwB,KAAA,CAA/B,KAAO,CAAP,CACH,CAED,MAAO,CAAA,KAAA,CAAP,qBAAO,EAAP,CAhB+D,CAAA,CAAA,KAAA,CAAA,iBAAA,CAmB/C,UAAM,CACtB,GAAI,KAAA,CAAA,KAAA,CAAA,WAAA,GAAJ,IAAA,CAAqC,CAIjC,GAAA,CAAA,WAAA,CAWI,KAAA,CAXJ,KAAA,CACIf,cADJ,CAAA,WAAA,CAAA,aAAA,CAEIW,gBAFJ,CAAA,WAAA,CAAA,gBAAA,CAGIK,gBAHJ,CAAA,WAAA,CAAA,gBAAA,CAIIC,yBAJJ,CAAA,WAAA,CAAA,yBAAA,CAKIC,uBALJ,CAAA,WAAA,CAAA,uBAAA,CAMIC,oBANJ,CAAA,WAAA,CAAA,oBAAA,CAOIC,sBAPJ,CAAA,WAAA,CAAA,sBAAA,CAQIC,sBARJ,CAAA,WAAA,CAAA,sBAAA,CASIC,qBATJ,CAAA,WAAA,CAAA,qBAAA,CAUIC,OAVJ,CAAA,WAAA,CAAA,OAAA,CAYA,GAAMC,CAAAA,gBAAgB,CAAG,CACrBxB,aAAa,CADQ,cAAA,CAErBW,gBAAgB,CAFK,gBAAA,CAGrBK,gBAAgB,CAHK,gBAAA,CAIrBC,yBAAyB,CAJJ,yBAAA,CAKrBC,uBAAuB,CALF,uBAAA,CAMrBC,oBAAoB,CANC,oBAAA,CAOrBC,sBAAsB,CAPD,sBAAA,CAQrBC,sBAAsB,CARD,sBAAA,CASrBC,qBAAqB,CAArBA,qBATqB,CAAzB,CAYAC,OAAO,EAAIE,OAAO,CAAPA,GAAAA,CAAAA,YAAAA,CAAAA,kCAAAA,CAAAA,2CAAAA,CAAXF,gBAAWE,CAAXF,CACA,GAAI,KAAA,CAAA,KAAA,CAAJ,iBAAA,CAAkC,CAC9B,MAAO,CAAA,KAAA,CAAA,KAAA,CAAA,iBAAA,CAAP,gBAAO,CAAP,CACH,CACD,MAAO,CAAA,KAAA,CAAA,aAAA,CAAA,WAAA,CAAA,QAAA,CAAA,EAAA,CAAA,gBAAA,CAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAP,CACH,CACD,MAAA,KAAA,CAtD+D,CAAA,CAAA,KAAA,CAAA,cAAA,CA+DlD,UAA8B,CAAA,GAA7BG,CAAAA,QAA6B,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA,CAAA,SAAA,CAAA,CAAA,CAAA,CAAT,IAAS,CAC3C,GAAOxB,CAAAA,QAAP,CAAmB,KAAA,CAAnB,KAAmB,CAAnB,QAAA,CACA,GAAA,QAAA,CAAc,CACV,KAAA,CAAA,QAAA,CAAc,CAACyB,MAAM,CAAP,CAAA,CAAYD,QAAQ,CAARA,QAAZ,CAAd,EADJ,CAAA,IAEO,IAAI,KAAA,CAAA,KAAA,CAAA,UAAA,EAAyB,KAAA,CAAA,KAAA,CAAA,UAAA,CAA7B,OAAA,CAA4D,CAC/D,KAAA,CAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,WAAA,CAA4C,CAACA,QAAQ,CAARA,QAAD,CAA5C,EACH,CArE8D,CAAA,CAAA,KAAA,CAAA,cAAA,CAwElD,SAAA,KAAA,CAAoD,CACjE,GAAA,CAAA,kBAAA,CAMIK,KANJ,CAAA,WAAA,CAE2BH,cAF3B,CAAA,kBAAA,CAAA,aAAA,CAAA,CAAA,CAG8BC,iBAH9B,CAAA,kBAAA,CAAA,WAAA,CAAA,MAAA,CAIoCC,uBAJpC,CAAA,kBAAA,CAAA,iBAAA,CAAA,MAAA,CAOA,GAAOtB,CAAAA,oBAAP,CAA+B,KAAA,CAA/B,KAA+B,CAA/B,oBAAA,CACA,GAAI,KAAA,CAAA,KAAA,CAAJ,QAAA,CAAyB,CACrB,GAAIoB,cAAc,CAAlB,oBAAA,CAA4C,CACxC,KAAA,CAAA,QAAA,CAAc,CAACf,gBAAgB,CAAjB,IAAA,CAAyBC,WAAW,CAAE,IAAtC,CAAd,EADJ,CAAA,IAEO,CACH,KAAA,CAAA,QAAA,CAAc,CAACD,gBAAgB,CAAjB,KAAA,CAA0BC,WAAW,CAAE,IAAvC,CAAd,EACH,CALL,CAAA,IAMO,CACH,GACIc,cAAc,CAAdA,oBAAAA,EACAC,iBAAiB,CAAjBA,uBAAAA,CAFJ,oBAAA,CAGE,CACE,KAAA,CAAA,QAAA,CAAc,CAAChB,gBAAgB,CAAjB,IAAA,CAAyBC,WAAW,CAAE,IAAtC,CAAd,EAJJ,CAAA,IAKO,CACH,KAAA,CAAA,QAAA,CAAc,CAACD,gBAAgB,CAAjB,KAAA,CAA0BC,WAAW,CAAE,IAAvC,CAAd,EACH,CACJ,CAhG8D,CAAA,CAAA,KAAA,CAAA,SAAA,CAmGvD,SAAA,IAAA,CAAiD,CAAA,GAA/CkB,CAAAA,IAA+C,CAAA,IAAA,CAA/CA,IAA+C,CAAzCC,KAAyC,CAAA,IAAA,CAAzCA,KAAyC,CACzD,GAAI,CAACD,IAAI,CAAL,GAAA,EAAaA,IAAI,CAAJA,GAAAA,GAAjB,CAAA,CAAiC,CAC7BE,OAAO,CAAA,yCAAA,CAA4CC,IAAI,CAAJA,SAAAA,CAAnDD,IAAmDC,CAA5C,CAAPD,CACH,CACD,GAAI,CAACF,IAAI,CAAT,IAAA,CAAgB,CACZ,GAAI,CAACA,IAAI,CAAT,MAAA,CAAkB,CACdE,OAAO,CAAA,0CAAA,CAEHC,IAAI,CAAJA,SAAAA,CAFJD,IAEIC,CAFG,CAAPD,CAIH,CACDF,IAAI,CAAJA,IAAAA,CAAY,CAACI,GAAG,CAAE,CAAN,CAAZJ,CACH,CACD,GAAA,CAAA,YAAA,CAAmC,KAAA,CAAnC,KAAA,CAAOtC,QAAP,CAAA,YAAA,CAAA,QAAA,CAAiBC,IAAjB,CAAA,YAAA,CAAA,IAAA,CAAuBO,QAAvB,CAAA,YAAA,CAAA,QAAA,CACA,GAAIR,QAAQ,EAAZ,IAAA,CAAsB,CAClB,GAAM2C,CAAAA,eAAe,CACjB,CAACnC,QAAQ,CAAGR,QAAQ,CAACuC,KAAK,CAAjB,CAAW,CAAX,CAAyBvC,QAAQ,CAACuC,KAAK,CAAhD,CAA0C,CAA1C,GADJ,EAAA,CAEA,GAAMK,CAAAA,WAAW,CACb,CAACpC,QAAQ,CAAGR,QAAQ,CAACuC,KAAK,CAAjB,CAAW,CAAX,CAAyBvC,QAAQ,CAACuC,KAAK,CAAhD,CAA0C,CAA1C,GADJ,EAAA,CAEA,GAAA,CAAA,YAAA,CAqFI,KAAA,CArFJ,KAAA,CACIM,mBADJ,CAAA,YAAA,CAAA,mBAAA,CAEIC,UAFJ,CAAA,YAAA,CAAA,UAAA,CAGIC,UAHJ,CAAA,YAAA,CAAA,UAAA,CAIIC,oBAJJ,CAAA,YAAA,CAAA,oBAAA,CAKIC,gBALJ,CAAA,YAAA,CAAA,gBAAA,CAMIC,eANJ,CAAA,YAAA,CAAA,eAAA,CAOIC,kBAPJ,CAAA,YAAA,CAAA,kBAAA,CAQIC,oBARJ,CAAA,YAAA,CAAA,oBAAA,CASIC,oBATJ,CAAA,YAAA,CAAA,oBAAA,CAUIC,eAVJ,CAAA,YAAA,CAAA,eAAA,CAWIC,wBAXJ,CAAA,YAAA,CAAA,wBAAA,CAYIC,oBAZJ,CAAA,YAAA,CAAA,oBAAA,CAaIC,iBAbJ,CAAA,YAAA,CAAA,iBAAA,CAcIC,UAdJ,CAAA,YAAA,CAAA,UAAA,CAeIC,iBAfJ,CAAA,YAAA,CAAA,iBAAA,CAgBIC,YAhBJ,CAAA,YAAA,CAAA,YAAA,CAiBIC,YAjBJ,CAAA,YAAA,CAAA,YAAA,CAkBIC,eAlBJ,CAAA,YAAA,CAAA,eAAA,CAmBIC,kBAnBJ,CAAA,YAAA,CAAA,kBAAA,CAoBIC,UApBJ,CAAA,YAAA,CAAA,UAAA,CAqBIC,UArBJ,CAAA,YAAA,CAAA,UAAA,CAsBIC,mBAtBJ,CAAA,YAAA,CAAA,mBAAA,CAuBIrC,OAvBJ,CAAA,YAAA,CAAA,OAAA,CAwBIsC,WAxBJ,CAAA,YAAA,CAAA,WAAA,CAyBIC,aAzBJ,CAAA,YAAA,CAAA,aAAA,CA0BIC,SA1BJ,CAAA,YAAA,CAAA,SAAA,CA2BIC,qBA3BJ,CAAA,YAAA,CAAA,qBAAA,CA4BIC,uBA5BJ,CAAA,YAAA,CAAA,uBAAA,CA6BIC,WA7BJ,CAAA,YAAA,CAAA,WAAA,CA8BIC,aA9BJ,CAAA,YAAA,CAAA,aAAA,CA+BIC,gBA/BJ,CAAA,YAAA,CAAA,gBAAA,CAgCIC,kBAhCJ,CAAA,YAAA,CAAA,kBAAA,CAiCIC,kBAjCJ,CAAA,YAAA,CAAA,kBAAA,CAkCIC,wBAlCJ,CAAA,YAAA,CAAA,wBAAA,CAmCIC,OAnCJ,CAAA,YAAA,CAAA,OAAA,CAoCIvE,aApCJ,CAAA,YAAA,CAAA,YAAA,CAqCIwE,iBArCJ,CAAA,YAAA,CAAA,iBAAA,CAsCIC,eAtCJ,CAAA,YAAA,CAAA,eAAA,CAuCIC,aAvCJ,CAAA,YAAA,CAAA,aAAA,CAwCIC,aAxCJ,CAAA,YAAA,CAAA,aAAA,CAyCIC,eAzCJ,CAAA,YAAA,CAAA,eAAA,CA0CIC,gBA1CJ,CAAA,YAAA,CAAA,gBAAA,CA2CIC,kBA3CJ,CAAA,YAAA,CAAA,kBAAA,CA4CIC,kBA5CJ,CAAA,YAAA,CAAA,kBAAA,CA6CIC,oBA7CJ,CAAA,YAAA,CAAA,oBAAA,CA8CIC,iBA9CJ,CAAA,YAAA,CAAA,iBAAA,CA+CIC,kBA/CJ,CAAA,YAAA,CAAA,kBAAA,CAgDIC,kBAhDJ,CAAA,YAAA,CAAA,kBAAA,CAiDIC,oBAjDJ,CAAA,YAAA,CAAA,oBAAA,CAkDIC,WAlDJ,CAAA,YAAA,CAAA,WAAA,CAmDIC,UAnDJ,CAAA,YAAA,CAAA,UAAA,CAoDIC,uBApDJ,CAAA,YAAA,CAAA,uBAAA,CAqDIC,YArDJ,CAAA,YAAA,CAAA,YAAA,CAsDIC,iBAtDJ,CAAA,YAAA,CAAA,iBAAA,CAuDIC,YAvDJ,CAAA,YAAA,CAAA,YAAA,CAwDIC,SAxDJ,CAAA,YAAA,CAAA,SAAA,CAyDIC,mBAzDJ,CAAA,YAAA,CAAA,mBAAA,CA0DIC,YA1DJ,CAAA,YAAA,CAAA,YAAA,CA2DIC,qBA3DJ,CAAA,YAAA,CAAA,qBAAA,CA4DIC,QA5DJ,CAAA,YAAA,CAAA,QAAA,CA6DIC,YA7DJ,CAAA,YAAA,CAAA,YAAA,CA8DIC,mBA9DJ,CAAA,YAAA,CAAA,mBAAA,CA+DIC,yBA/DJ,CAAA,YAAA,CAAA,yBAAA,CAgEIC,cAhEJ,CAAA,YAAA,CAAA,cAAA,CAiEIC,2BAjEJ,CAAA,YAAA,CAAA,2BAAA,CAkEIC,yBAlEJ,CAAA,YAAA,CAAA,yBAAA,CAmEIC,eAnEJ,CAAA,YAAA,CAAA,eAAA,CAoEIC,cApEJ,CAAA,YAAA,CAAA,cAAA,CAqEIC,aArEJ,CAAA,YAAA,CAAA,aAAA,CAsEIC,UAtEJ,CAAA,YAAA,CAAA,UAAA,CAuEIC,kBAvEJ,CAAA,YAAA,CAAA,kBAAA,CAwEIC,SAxEJ,CAAA,YAAA,CAAA,SAAA,CAyEIC,SAzEJ,CAAA,YAAA,CAAA,SAAA,CA0EIC,SA1EJ,CAAA,YAAA,CAAA,SAAA,CA2EIC,kBA3EJ,CAAA,YAAA,CAAA,kBAAA,CA4EIC,aA5EJ,CAAA,YAAA,CAAA,aAAA,CA6EIC,mBA7EJ,CAAA,YAAA,CAAA,mBAAA,CA8EIC,UA9EJ,CAAA,YAAA,CAAA,UAAA,CA+EIC,UA/EJ,CAAA,YAAA,CAAA,UAAA,CAgFIC,kBAhFJ,CAAA,YAAA,CAAA,kBAAA,CAiFIC,oBAjFJ,CAAA,YAAA,CAAA,oBAAA,CAkFIC,kBAlFJ,CAAA,YAAA,CAAA,kBAAA,CAmFIC,oBAnFJ,CAAA,YAAA,CAAA,oBAAA,CAoFIC,wBApFJ,CAAA,YAAA,CAAA,wBAAA,CAuFA,GAAMC,CAAAA,YAAY,CAAG,CACjBlF,mBAAmB,CADF,mBAAA,CAEjBC,UAAU,CAFO,UAAA,CAGjBC,UAAU,CAHO,UAAA,CAIjBC,oBAAoB,CAJH,oBAAA,CAKjBC,gBAAgB,CALC,gBAAA,CAMjBC,eAAe,CANE,eAAA,CAOjBC,kBAAkB,CAPD,kBAAA,CAQjBC,oBAAoB,CARH,oBAAA,CASjBC,oBAAoB,CATH,oBAAA,CAUjBC,eAAe,CAVE,eAAA,CAWjBC,wBAAwB,CAXP,wBAAA,CAYjBC,oBAAoB,CAZH,oBAAA,CAajBC,iBAAiB,CAbA,iBAAA,CAcjBC,UAAU,CAdO,UAAA,CAejBC,iBAAiB,CAfA,iBAAA,CAgBjBC,YAAY,CAhBK,YAAA,CAiBjBC,YAAY,CAjBK,YAAA,CAkBjBC,eAAe,CAlBE,eAAA,CAmBjBC,kBAAkB,CAnBD,kBAAA,CAoBjBC,UAAU,CApBO,UAAA,CAqBjBC,UAAU,CArBO,UAAA,CAsBjBC,mBAAmB,CAtBF,mBAAA,CAuBjBrC,OAAO,CAvBU,OAAA,CAwBjBsC,WAAW,CAxBM,WAAA,CAyBjBC,aAAa,CAzBI,aAAA,CA0BjBC,SAAS,CA1BQ,SAAA,CA2BjBC,qBAAqB,CA3BJ,qBAAA,CA4BjB1B,WAAW,CA5BM,WAAA,CA6BjB2B,uBAAuB,CA7BN,uBAAA,CA8BjBC,WAAW,CA9BM,WAAA,CA+BjBC,aAAa,CA/BI,aAAA,CAgCjBC,gBAAgB,CAhCC,gBAAA,CAiCjBC,kBAAkB,CAjCD,kBAAA,CAkCjBC,kBAAkB,CAlCD,kBAAA,CAmCjBC,wBAAwB,CAnCP,wBAAA,CAoCjBC,OAAO,CApCU,OAAA,CAqCjBvE,YAAY,CArCK,aAAA,CAsCjBwE,iBAAiB,CAtCA,iBAAA,CAuCjBC,eAAe,CAvCE,eAAA,CAwCjBC,aAAa,CAxCI,aAAA,CAyCjBC,aAAa,CAzCI,aAAA,CA0CjBvC,eAAe,CA1CE,eAAA,CA2CjBwC,eAAe,CA3CE,eAAA,CA4CjBC,gBAAgB,CA5CC,gBAAA,CA6CjBC,kBAAkB,CA7CD,kBAAA,CA8CjBC,kBAAkB,CA9CD,kBAAA,CA+CjBC,oBAAoB,CA/CH,oBAAA,CAgDjBC,iBAAiB,CAhDA,iBAAA,CAiDjBC,kBAAkB,CAjDD,kBAAA,CAkDjBC,kBAAkB,CAlDD,kBAAA,CAmDjBC,oBAAoB,CAnDH,oBAAA,CAoDjBC,WAAW,CApDM,WAAA,CAqDjBC,UAAU,CArDO,UAAA,CAsDjBC,uBAAuB,CAtDN,uBAAA,CAuDjBC,YAAY,CAvDK,YAAA,CAwDjBC,iBAAiB,CAxDA,iBAAA,CAyDjBC,YAAY,CAzDK,YAAA,CA0DjBC,SAAS,CA1DQ,SAAA,CA2DjBC,mBAAmB,CA3DF,mBAAA,CA4DjBC,YAAY,CA5DK,YAAA,CA6DjBC,qBAAqB,CA7DJ,qBAAA,CA8DjBC,QAAQ,CA9DS,QAAA,CA+DjBC,YAAY,CA/DK,YAAA,CAgEjBC,mBAAmB,CAhEF,mBAAA,CAiEjBC,yBAAyB,CAjER,yBAAA,CAkEjBC,cAAc,CAlEG,cAAA,CAmEjBC,2BAA2B,CAnEV,2BAAA,CAoEjBC,yBAAyB,CApER,yBAAA,CAqEjBC,eAAe,CArEE,eAAA,CAsEjBC,cAAc,CAtEG,cAAA,CAuEjBC,aAAa,CAvEI,aAAA,CAwEjBC,UAAU,CAxEO,UAAA,CAyEjBC,kBAAkB,CAzED,kBAAA,CA0EjBC,SAAS,CA1EQ,SAAA,CA2EjBC,SAAS,CA3EQ,SAAA,CA4EjBC,SAAS,CA5EQ,SAAA,CA6EjBC,kBAAkB,CA7ED,kBAAA,CA8EjBC,aAAa,CA9EI,aAAA,CA+EjBrH,IAAI,CA/Ea,IAAA,CAgFjBsH,mBAAmB,CAhFF,mBAAA,CAiFjBC,UAAU,CAjFO,UAAA,CAkFjBC,UAAU,CAlFO,UAAA,CAmFjBC,kBAAkB,CAnFD,kBAAA,CAoFjBC,oBAAoB,CApFH,oBAAA,CAqFjBC,kBAAkB,CArFD,kBAAA,CAsFjBC,oBAAoB,CAtFH,oBAAA,CAuFjBC,wBAAwB,CAvFP,wBAAA,CAyFjBtH,QAAQ,CAzFS,QAAA,CA0FjBwH,GAAG,CAAE1F,IAAI,CA1FQ,GAAA,CA2FjB2F,cAAc,CA3FG,IAAA,CA4FjBrJ,QAAQ,CAAE0D,IAAI,CAAJA,IAAAA,CAAAA,GAAAA,GAAkBrC,IAAI,CAAtBqC,GAAAA,CAAAA,OAAAA,CAAuC,MA5FhC,CAArB,CA8FAT,OAAO,EAAIE,OAAO,CAAPA,GAAAA,CAAAA,YAAAA,CAAAA,kCAAAA,CAAAA,uCAAAA,CAAXF,YAAWE,CAAXF,CACA,GAAI,KAAA,CAAA,KAAA,CAAJ,aAAA,CAA8B,CAC1B,MAAO,CAAA,KAAA,CAAA,KAAA,CAAA,aAAA,CAAP,YAAO,CAAP,CACH,CACD,MAAO,CAAA,KAAA,CAAA,aAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,YAAA,CAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAP,CAEH,CACD,MAAA,KAAA,CAlT+D,CAAA,CAAA,KAAA,CAAA,eAAA,CAqTjD,UAAM,CACpB,GAAA,CAAA,oBAAA,CAA4C,KAAA,CAA5C,KAA4C,CAA5C,QAAA,CAAkBpE,SAAlB,CAAA,oBAAA,CAAA,SAAA,CAA6BG,UAA7B,CAAA,oBAAA,CAAA,UAAA,CACA,GAAMsK,CAAAA,MAAM,CAAG3K,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,GAAI,KAAA,CAAA,KAAA,CAAJ,eAAA,CAAgC,CAC5B,MAAO,CAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CACH,KAAA,CAAA,KAAA,CADG,eACH,EADG,CAGH,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAM,KAAK,CAAE2K,MAAM,CAAnB,kBAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CACK,KAAA,CAAA,KAAA,CAJT,eAIS,EADL,CAHJ,CAOH,CACD,MAAO,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAM,KAAK,CAAEA,MAAM,CAAnB,SAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAP,CAjU+D,CAAA,CAAA,KAAA,CAAA,mBAAA,CAoU7C,UAAM,CACxB,GAAA,CAAA,qBAAA,CAA4C,KAAA,CAA5C,KAA4C,CAA5C,QAAA,CAAkBzK,SAAlB,CAAA,qBAAA,CAAA,SAAA,CAA6BG,UAA7B,CAAA,qBAAA,CAAA,UAAA,CACA,GAAMsK,CAAAA,MAAM,CAAG3K,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,MACI,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAM,KAAK,CAAE2K,MAAM,CAAnB,aAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAoC,KAAA,CADxC,iBACwC,EAApC,CADJ,CAvU+D,CAAA,CAAA,KAAA,CAAA,YAAA,CAsWpD,UAAM,CACjB,GACI,CAAC,KAAA,CAAA,KAAA,CAAD,QAAA,EACA,CAAC,CAAC,KAAA,CAAA,KAAA,CADF,QAAA,EAEA,KAAA,CAAA,KAAA,CAAA,QAAA,CAHJ,MAAA,CAIE,CACEK,UAAU,CACN,UAAA,CAAA,MAAM,CAAA,KAAA,CAAA,cAAA,EAAuB,KAAA,CAAA,cAAA,CAA7B,KAA6B,CAA7B,CADM,CAAA,CAEN,GAAK,KAAA,CAAA,KAAA,CAAA,QAAA,CAFTA,MAAU,CAAVA,CAIH,CAhX8D,CAAA,CAAA,KAAA,CAAA,YAAA,CAmXpD,SAAA,KAAA,CAAoD,CAAA,GAAlDC,CAAAA,eAAkD,CAAA,KAAA,CAAlDA,eAAkD,CAC/D,GAAA,CAAA,YAAA,CAKI,KAAA,CALJ,KAAA,CACI/H,WADJ,CAAA,YAAA,CAAA,WAAA,CAEIH,aAFJ,CAAA,YAAA,CAAA,aAAA,CAGIU,cAHJ,CAAA,YAAA,CAAA,cAAA,CAIIC,gBAJJ,CAAA,YAAA,CAAA,gBAAA,CAMA,GACID,cAAc,GACb,KAAA,CAAA,KAAA,CAAA,WAAA,EAA0BwH,eAAe,CAD1CxH,CAAc,CAAdA,EAEAwH,eAAe,EAFfxH,GAAAA,EAAAA,WAAAA,EAAAA,aAAAA,EAKA,CALAA,gBAAAA,EAMAK,QAAQ,CAARA,EAAAA,GAPJ,KAAA,CAQE,CACEf,aAAa,GAChB,CApY8D,CAAA,CAAA,KAAA,CAAA,YAAA,CAuYpD,SAAA,IAAA,CAAA,CAAA,MAAA,GAAuBgC,IAAI,CAA3B,GAAA,CAvYoD,CAAA,CAAA,MAAA,CAAA,KAAA,CAElE,C,qDAuDD,QAAA,CAAA,QAAA,CAAA,OAAA,CAA0D,CACtD,GAAI,KAAA,KAAA,CAAA,UAAA,EAAyB,KAAA,KAAA,CAAA,UAAA,CAAzB,OAAA,EAAJ,OAAA,CAAuE,CACnE,KAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,cAAA,CAAA,OAAA,EACH,CACJ,C,2CA+QD,QAAA,CAAA,2BAAA,EAA8B,CAC1B,GAAA,CAAA,YAAA,CAAkE,KAAlE,KAAA,CAAO6F,oBAAP,CAAA,YAAA,CAAA,oBAAA,CAAA,qBAAA,CAAA,YAAA,CAAA,QAAA,CAAwC1K,SAAxC,CAAA,qBAAA,CAAA,SAAA,CAAmDG,UAAnD,CAAA,qBAAA,CAAA,UAAA,CACA,GAAMsK,CAAAA,MAAM,CAAG3K,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,GAAA,oBAAA,CAA0B,CACtB,MAAO4K,CAAAA,oBAAP,EAAA,CACH,CAED,MAAO,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAM,KAAK,CAAED,MAAM,CAAnB,oBAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAP,GAAO,CAAP,CACH,C,2CAED,QAAA,CAAA,2BAAA,EAA8B,CAAA,GAAA,CAAA,MAAA,CAAA,IAAA,CAC1B,GAAME,CAAAA,UAAU,CAAG,KAAA,KAAA,CAAA,mBAAA,EAAnB,EAAA,CACA,GAAA,CAAA,qBAAA,CAA4C,KAA5C,KAA4C,CAA5C,QAAA,CAAkB3K,SAAlB,CAAA,qBAAA,CAAA,SAAA,CAA6BG,UAA7B,CAAA,qBAAA,CAAA,UAAA,CACA,GAAMsK,CAAAA,MAAM,CAAG3K,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,MACI,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CAAM,KAAK,CAAE,CAAC2K,MAAM,CAAP,mBAAA,CAAb,UAAa,CAAb,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CACI,KAAA,CAAA,aAAA,CAAA,gBAAA,CAAA,CACI,OAAO,CAAE,QAAA,CAAA,OAAA,EAAA,CAAA,MAAM,CAAA,MAAI,CAAV,cAAM,EAAN,CADb,CAAA,CAEI,OAAO,CAAE,CAACG,GAAG,CAAJ,CAAA,CAASC,IAAI,CAAb,CAAA,CAAkBzJ,KAAK,CAAvB,CAAA,CAA4BC,MAAM,CAAE,CAApC,CAFb,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAIK,KANb,2BAMa,EAJL,CADJ,CADJ,CAUH,C,sBAqCD,QAAA,CAAA,MAAA,EAAS,CACL,GAAA,CAAA,YAAA,CAAsD,KAAtD,KAAA,CAAO0B,QAAP,CAAA,YAAA,CAAA,QAAA,CAAA,qBAAA,CAAA,YAAA,CAAA,QAAA,CAA4B/C,SAA5B,CAAA,qBAAA,CAAA,SAAA,CAAuCG,UAAvC,CAAA,qBAAA,CAAA,UAAA,CACA,GAAMsK,CAAAA,MAAM,CAAG3K,UAAU,CAAA,SAAA,CAAzB,UAAyB,CAAzB,CACA,MACI,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CACI,KAAK,CACD,KAAA,KAAA,CAAA,QAAA,CAAsB2K,MAAM,CAA5B,iBAAA,CAAiDA,MAAM,CAF/D,SAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAKK,KAAA,KAAA,CAAA,gBAAA,EAA+B,KAAA,KAAA,CAA/B,cAAA,CACK,KADL,2BACK,EADL,CALL,IAAA,CASI,KAAA,CAAA,aAAA,CAAA,QAAA,CAAA,QAAA,CAAA,CACI,GAAG,CAAE,KAAA,KAAA,CADT,UAAA,CAEI,SAAS,CAAE,CAAC,KAAA,KAAA,CAAD,SAAA,CAAuB,KAAA,KAAA,CAFtC,QAEe,CAFf,CAGI,YAAY,CAAE,KAHlB,YAAA,CAII,mBAAmB,CAJvB,IAAA,CAKI,gCAAgC,CALpC,KAAA,CAMI,QAAQ,CANZ,QAAA,CAOI,IAAI,CAAE,KAAA,KAAA,CAPV,QAAA,CAQI,KAAK,CAAEA,MAAM,CARjB,SAAA,CASI,qBAAqB,CAAEA,MAAM,CATjC,qBAAA,CAUI,UAAU,CAAE,KAAKO,SAVrB,CAAA,CAWQ,KAAA,KAAA,CAXR,yBAAA,CAAA,CAYI,kBAAkB,CAAE,KAZxB,eAAA,CAaI,mBAAmB,CACfjI,QAAQ,CAAG,KAAH,mBAAA,CAA8B,KAd9C,YAAA,CAgBI,mBAAmB,CACfA,QAAQ,CAAG,KAAH,YAAA,CAAuB,KAjBvC,mBAAA,CAmBI,QAAQ,CAAE,KAnBd,cAAA,CAoBI,mBAAmB,CApBvB,GAAA,CAqBI,QAAQ,CAAE,KArBd,YAAA,CAsBI,YAAY,CAAE,KAtBlB,YAAA,CAuBI,qBAAqB,CAAE,GAvB3B,CAAA,CAwBQ,KAAA,KAAA,CAxBR,aAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,YAAA,CAAA,UAAA,CAAA,GAAA,CAAA,YAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CATJ,CADJ,CAsCH,C,8BAjdgEX,KAAK,CAACC,a,EAArEF,gB,CACKG,YADLH,CACoB,CAClBI,QAAQ,CADU,EAAA,CAElBC,IAAI,CAFc,SAAA,CAGlBC,QAAQ,CAHU,KAAA,CAIlBC,eAAe,CAJG,SAAA,CAKlBC,YAAY,CALM,SAAA,CAMlBC,aAAa,CANK,SAAA,CAOlBC,aAAa,CAAE,QAAA,CAAA,aAAA,EAAM,CAPH,CAAA,CASlBC,YAAY,CAAE,QAAA,CAAA,YAAA,EAAM,CATF,CAAA,CAWlBC,QAAQ,CAXU,IAAA,CAYlBC,WAAW,CAZO,KAAA,CAclBC,aAAa,CAdK,EAAA,CAelBC,yBAAyB,CAfP,EAAA,CAgBlBC,SAAS,CAhBS,IAAA,CAiBlBC,cAAc,CAjBI,KAAA,CAkBlBC,oBAAoB,CAlBF,GAAA,CAmBlBC,QAAQ,CAnBU,KAAA,CAoBlBrC,mBAAmB,CApBD,EAAA,CAqBlBsC,cAAc,CArBI,KAAA,CAsBlBC,gBAAgB,CAAE,KAtBA,CADpBrB,CAodN,cAAe8I,CAAAA,YAAY,CAA3B,gBAA2B,CAA3B","sourcesContent":["import React, {RefObject} from 'react';\n\nimport {\n    FlatList,\n    ListRenderItemInfo,\n    ListViewProps,\n    NativeScrollEvent,\n    NativeSyntheticEvent,\n    Platform,\n    StyleProp,\n    StyleSheet,\n    Text,\n    TouchableOpacity,\n    View,\n    ViewStyle,\n} from 'react-native';\n\nimport LoadEarlier, {LoadEarlierProps} from './LoadEarlier';\nimport Message, {MessageProps} from './Message';\nimport {IMessage, PositionLeftOrRight, Reply, User} from './types';\nimport {warning} from './utils';\nimport TypingIndicator from './TypingIndicator';\nimport {withBunnyKit, WithBunnyKit} from '../../hooks/bunny-kit';\nimport {SizeLabor, ThemeLabor} from '../../types';\n\nconst makeStyles = (sizeLabor: SizeLabor, themeLabor: ThemeLabor) => {\n    const {ms} = sizeLabor;\n    const {wp} = sizeLabor.designsBasedOn.iphoneX;\n    const {theme: {colors}} = themeLabor;\n    return StyleSheet.create({\n        container: {\n            flex: 1,\n        },\n        containerAlignTop: {\n            flexDirection: 'row',\n            alignItems: 'flex-start',\n        },\n        contentContainerStyle: {\n            flexGrow: 1,\n            justifyContent: 'flex-start',\n        },\n        emptyChatContainer: {\n            flex: 1,\n            transform: [{scaleY: -1}],\n        },\n        headerWrapper: {\n            flex: 1,\n        },\n        listStyle: {\n            flex: 1,\n        },\n        scrollToBottomStyle: {\n            opacity: 0.8,\n            position: 'absolute',\n            right: wp(10),\n            bottom: wp(30),\n            zIndex: 999,\n            height: wp(40),\n            width: wp(40),\n            borderRadius: wp(20),\n            backgroundColor: colors.backdrop,\n            alignItems: 'center',\n            justifyContent: 'center',\n            shadowColor: colors.shadow,\n            shadowOpacity: 0.5,\n            shadowOffset: {width: 0, height: 0},\n            shadowRadius: wp(1),\n        },\n        scrollToBottomButton: {\n            fontSize: ms.fs.m,\n            color: colors.text3\n        }\n    });\n};\n\n\nexport interface MessageContainerProps<TMessage extends IMessage> extends Omit<MessageProps<TMessage>, 'key' | 'position' | 'currentMessage' | 'showActionSheetWithOptions'>, LoadEarlierProps {\n\n    forwardRef?: RefObject<FlatList<TMessage>>;\n    isTyping?: boolean;\n    inverted?: boolean;\n    scrollToBottomOffset?: number;\n    messages?: TMessage[];\n    scrollToBottomStyle?: StyleProp<ViewStyle>;\n    user?: User;\n    infiniteScroll?: boolean;\n    isLoadingEarlier?: boolean;\n    loadEarlier?: boolean;\n    alignTop?: boolean;\n    scrollToBottom?: boolean;\n    extraData?: any;\n    invertibleScrollViewProps?: any;\n    listViewProps?: Partial<ListViewProps>;\n\n    renderFooter?(props: MessageContainerProps<TMessage>): React.ReactNode;\n\n    renderLoadEarlier?(props: LoadEarlierProps): React.ReactNode;\n\n    renderMessage?(props: MessageProps<TMessage>): React.ReactNode;\n\n    renderChatEmpty?(): React.ReactNode;\n\n    renderScrollToBottom?(): React.ReactNode;\n\n    onLoadEarlier?(): void;\n\n    onQuickReply?(replies: Reply[]): void;\n}\n\ninterface MessageContainerState {\n    showScrollBottom: boolean,\n    hasScrolled: boolean\n}\n\nclass MessageContainer<TMessage extends IMessage = IMessage> extends React.PureComponent<MessageContainerProps<TMessage> & WithBunnyKit, MessageContainerState> {\n    static defaultProps = {\n        messages: [],\n        user: undefined,\n        isTyping: false,\n        renderChatEmpty: undefined,\n        renderFooter: undefined,\n        renderMessage: undefined,\n        onLoadEarlier: () => {\n        },\n        onQuickReply: () => {\n        },\n        inverted: true,\n        loadEarlier: false,\n        // TODO if({}) return true,this may cause issues\n        listViewProps: {},\n        invertibleScrollViewProps: {},\n        extraData: null,\n        scrollToBottom: false,\n        scrollToBottomOffset: 200,\n        alignTop: false,\n        scrollToBottomStyle: {},\n        infiniteScroll: false,\n        isLoadingEarlier: false,\n    };\n\n    state = {\n        showScrollBottom: false,\n        hasScrolled: false,\n    };\n\n    constructor(props: MessageContainerProps<TMessage> & WithBunnyKit) {\n        super(props);\n    }\n\n    renderTypingIndicator = () => {\n        if (Platform.OS === 'web') {\n            return null;\n        }\n        return <TypingIndicator isTyping={this.props.isTyping || false}/>;\n    };\n\n    renderFooter = () => {\n        if (this.props.renderFooter) {\n            return this.props.renderFooter(this.props);\n        }\n\n        return this.renderTypingIndicator();\n    };\n\n    renderLoadEarlier = () => {\n        if (this.props.loadEarlier === true) {\n            // const loadEarlierProps = {\n            //     ...this.props,\n            // }\n            const {\n                onLoadEarlier,\n                isLoadingEarlier,\n                loadEarlierLabel,\n                loadEarlierContainerStyle,\n                loadEarlierWrapperStyle,\n                loadEarlierTextStyle,\n                activityIndicatorStyle,\n                activityIndicatorColor,\n                activityIndicatorSize,\n                isDebug\n            } = this.props;\n            const loadEarlierProps = {\n                onLoadEarlier,\n                isLoadingEarlier,\n                loadEarlierLabel,\n                loadEarlierContainerStyle,\n                loadEarlierWrapperStyle,\n                loadEarlierTextStyle,\n                activityIndicatorStyle,\n                activityIndicatorColor,\n                activityIndicatorSize\n            };\n\n            isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level2]MessageContainer loadEarlierProps', loadEarlierProps);\n            if (this.props.renderLoadEarlier) {\n                return this.props.renderLoadEarlier(loadEarlierProps);\n            }\n            return <LoadEarlier {...loadEarlierProps} />;\n        }\n        return null;\n    };\n\n    scrollTo(options: { animated?: boolean; offset: number }) {\n        if (this.props.forwardRef && this.props.forwardRef.current && options) {\n            this.props.forwardRef.current.scrollToOffset(options);\n        }\n    }\n\n    scrollToBottom = (animated: boolean = true) => {\n        const {inverted} = this.props;\n        if (inverted) {\n            this.scrollTo({offset: 0, animated});\n        } else if (this.props.forwardRef && this.props.forwardRef.current) {\n            this.props.forwardRef!.current!.scrollToEnd({animated});\n        }\n    };\n\n    handleOnScroll = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n        const {\n            nativeEvent: {\n                contentOffset: {y: contentOffsetY},\n                contentSize: {height: contentSizeHeight},\n                layoutMeasurement: {height: layoutMeasurementHeight},\n            },\n        } = event;\n        const {scrollToBottomOffset} = this.props;\n        if (this.props.inverted) {\n            if (contentOffsetY > scrollToBottomOffset!) {\n                this.setState({showScrollBottom: true, hasScrolled: true});\n            } else {\n                this.setState({showScrollBottom: false, hasScrolled: true});\n            }\n        } else {\n            if (\n                contentOffsetY < scrollToBottomOffset! &&\n                contentSizeHeight - layoutMeasurementHeight > scrollToBottomOffset!\n            ) {\n                this.setState({showScrollBottom: true, hasScrolled: true});\n            } else {\n                this.setState({showScrollBottom: false, hasScrolled: true});\n            }\n        }\n    };\n\n    renderRow = ({item, index}: ListRenderItemInfo<TMessage>) => {\n        if (!item._id && item._id !== 0) {\n            warning('BunnyChat: `_id` is missing for message', JSON.stringify(item));\n        }\n        if (!item.user) {\n            if (!item.system) {\n                warning(\n                    'BunnyChat: `user` is missing for message',\n                    JSON.stringify(item),\n                );\n            }\n            item.user = {_id: 0};\n        }\n        const {messages, user, inverted} = this.props;\n        if (messages && user) {\n            const previousMessage =\n                (inverted ? messages[index + 1] : messages[index - 1]) || {};\n            const nextMessage =\n                (inverted ? messages[index - 1] : messages[index + 1]) || {};\n            const {\n                audioContainerStyle,\n                audioStyle,\n                audioProps,\n                avatarContainerStyle,\n                avatarImageStyle,\n                avatarTextStyle,\n                bubbleWrapperStyle,\n                bubbleContainerStyle,\n                bottomContainerStyle,\n                customTextStyle,\n                containerToPreviousStyle,\n                containerToNextStyle,\n                quickRepliesColor,\n                dateFormat,\n                dayContainerStyle,\n                dayTextProps,\n                dayTextStyle,\n                dayWrapperStyle,\n                isCustomViewBottom,\n                imageStyle,\n                imageProps,\n                imageContainerStyle,\n                isDebug,\n                keepReplies,\n                lightBoxProps,\n                linkStyle,\n                messageContainerStyle,\n                phoneNumberOptionTitles,\n                onLongPress,\n                onMessageLoad,\n                onMessageLoadEnd,\n                onMessageLoadError,\n                onMessageLoadStart,\n                onMessageReadyForDisplay,\n                onPress,\n                onQuickReply,\n                onLongPressAvatar,\n                onMessageLayout,\n                onPressAvatar,\n                parsePatterns,\n                quickReplyStyle,\n                renderCustomView,\n                renderMessageAudio,\n                renderMessageImage,\n                renderMessageSticker,\n                renderMessageText,\n                renderMessageVideo,\n                renderQuickReplies,\n                renderQuickReplySend,\n                renderTicks,\n                renderTime,\n                renderUsernameOnMessage,\n                renderAvatar,\n                renderAvatarOnTop,\n                renderBubble,\n                renderDay,\n                renderSystemMessage,\n                stickerProps,\n                stickerContainerStyle,\n                sendText,\n                stickerStyle,\n                shouldUpdateMessage,\n                showAvatarForEveryMessage,\n                showUserAvatar,\n                systemMessageContainerStyle,\n                systemMessageWrapperStyle,\n                systemTextStyle,\n                touchableProps,\n                timeTextStyle,\n                timeFormat,\n                timeContainerStyle,\n                tickStyle,\n                textStyle,\n                textProps,\n                textContainerStyle,\n                usernameStyle,\n                videoContainerStyle,\n                videoStyle,\n                videoProps,\n                audioProgressStyle,\n                audioPlayButtonStyle,\n                audioProgressColor,\n                audioRemainTimeStyle,\n                audioPlayButtonIconStyle,\n            } = this.props;\n\n            const messageProps = {\n                audioContainerStyle,\n                audioStyle,\n                audioProps,\n                avatarContainerStyle,\n                avatarImageStyle,\n                avatarTextStyle,\n                bubbleWrapperStyle,\n                bubbleContainerStyle,\n                bottomContainerStyle,\n                customTextStyle,\n                containerToPreviousStyle,\n                containerToNextStyle,\n                quickRepliesColor,\n                dateFormat,\n                dayContainerStyle,\n                dayTextProps,\n                dayTextStyle,\n                dayWrapperStyle,\n                isCustomViewBottom,\n                imageStyle,\n                imageProps,\n                imageContainerStyle,\n                isDebug,\n                keepReplies,\n                lightBoxProps,\n                linkStyle,\n                messageContainerStyle,\n                nextMessage,\n                phoneNumberOptionTitles,\n                onLongPress,\n                onMessageLoad,\n                onMessageLoadEnd,\n                onMessageLoadError,\n                onMessageLoadStart,\n                onMessageReadyForDisplay,\n                onPress,\n                onQuickReply,\n                onLongPressAvatar,\n                onMessageLayout,\n                onPressAvatar,\n                parsePatterns,\n                previousMessage,\n                quickReplyStyle,\n                renderCustomView,\n                renderMessageAudio,\n                renderMessageImage,\n                renderMessageSticker,\n                renderMessageText,\n                renderMessageVideo,\n                renderQuickReplies,\n                renderQuickReplySend,\n                renderTicks,\n                renderTime,\n                renderUsernameOnMessage,\n                renderAvatar,\n                renderAvatarOnTop,\n                renderBubble,\n                renderDay,\n                renderSystemMessage,\n                stickerProps,\n                stickerContainerStyle,\n                sendText,\n                stickerStyle,\n                shouldUpdateMessage,\n                showAvatarForEveryMessage,\n                showUserAvatar,\n                systemMessageContainerStyle,\n                systemMessageWrapperStyle,\n                systemTextStyle,\n                touchableProps,\n                timeTextStyle,\n                timeFormat,\n                timeContainerStyle,\n                tickStyle,\n                textStyle,\n                textProps,\n                textContainerStyle,\n                usernameStyle,\n                user,\n                videoContainerStyle,\n                videoStyle,\n                videoProps,\n                audioProgressStyle,\n                audioPlayButtonStyle,\n                audioProgressColor,\n                audioRemainTimeStyle,\n                audioPlayButtonIconStyle,\n\n                inverted,\n                key: item._id,\n                currentMessage: item,\n                position: item.user._id === user._id ? 'right' : 'left' as PositionLeftOrRight,\n            };\n            isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level2]MessageContainer messageProps', messageProps);\n            if (this.props.renderMessage) {\n                return this.props.renderMessage(messageProps);\n            }\n            return <Message<TMessage> {...messageProps} />;\n            // return <Message {...messageProps} />\n        }\n        return null;\n    };\n\n    renderChatEmpty = () => {\n        const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        if (this.props.renderChatEmpty) {\n            return this.props.inverted ? (\n                this.props.renderChatEmpty()\n            ) : (\n                <View style={styles.emptyChatContainer}>\n                    {this.props.renderChatEmpty()}\n                </View>\n            );\n        }\n        return <View style={styles.container}/>;\n    };\n\n    renderHeaderWrapper = () => {\n        const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        return (\n            <View style={styles.headerWrapper}>{this.renderLoadEarlier()}</View>\n        );\n    };\n\n    renderScrollBottomComponent() {\n        const {renderScrollToBottom, bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        if (renderScrollToBottom) {\n            return renderScrollToBottom();\n        }\n\n        return <Text style={styles.scrollToBottomButton}>v</Text>;\n    }\n\n    renderScrollToBottomWrapper() {\n        const propsStyle = this.props.scrollToBottomStyle || {};\n        const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        return (\n            <View style={[styles.scrollToBottomStyle, propsStyle]}>\n                <TouchableOpacity\n                    onPress={() => this.scrollToBottom()}\n                    hitSlop={{top: 5, left: 5, right: 5, bottom: 5}}\n                >\n                    {this.renderScrollBottomComponent()}\n                </TouchableOpacity>\n            </View>\n        );\n    }\n\n    onLayoutList = () => {\n        if (\n            !this.props.inverted &&\n            !!this.props.messages &&\n            this.props.messages!.length\n        ) {\n            setTimeout(\n                () => this.scrollToBottom && this.scrollToBottom(false),\n                15 * this.props.messages!.length,\n            );\n        }\n    };\n\n    onEndReached = ({distanceFromEnd}: { distanceFromEnd: number }) => {\n        const {\n            loadEarlier,\n            onLoadEarlier,\n            infiniteScroll,\n            isLoadingEarlier,\n        } = this.props;\n        if (\n            infiniteScroll &&\n            (this.state.hasScrolled || distanceFromEnd > 0) &&\n            distanceFromEnd <= 100 &&\n            loadEarlier &&\n            onLoadEarlier &&\n            !isLoadingEarlier &&\n            Platform.OS !== 'web'\n        ) {\n            onLoadEarlier();\n        }\n    };\n\n    keyExtractor = (item: TMessage) => `${item._id}`;\n\n    render() {\n        const {inverted, bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        return (\n            <View\n                style={\n                    this.props.alignTop ? styles.containerAlignTop : styles.container\n                }\n            >\n                {this.state.showScrollBottom && this.props.scrollToBottom\n                    ? this.renderScrollToBottomWrapper()\n                    : null}\n                {/*<FlatList<TMessage>*/}\n                <FlatList\n                    ref={this.props.forwardRef}\n                    extraData={[this.props.extraData, this.props.isTyping]}\n                    keyExtractor={this.keyExtractor}\n                    enableEmptySections\n                    automaticallyAdjustContentInsets={false}\n                    inverted={inverted}\n                    data={this.props.messages}\n                    style={styles.listStyle}\n                    contentContainerStyle={styles.contentContainerStyle}\n                    renderItem={this.renderRow}\n                    {...this.props.invertibleScrollViewProps}\n                    ListEmptyComponent={this.renderChatEmpty}\n                    ListFooterComponent={\n                        inverted ? this.renderHeaderWrapper : this.renderFooter\n                    }\n                    ListHeaderComponent={\n                        inverted ? this.renderFooter : this.renderHeaderWrapper\n                    }\n                    onScroll={this.handleOnScroll}\n                    scrollEventThrottle={100}\n                    onLayout={this.onLayoutList}\n                    onEndReached={this.onEndReached}\n                    onEndReachedThreshold={0.1}\n                    {...this.props.listViewProps}\n                />\n            </View>\n        );\n    }\n}\n\nexport default withBunnyKit(MessageContainer);\n"]},"metadata":{},"sourceType":"module"}