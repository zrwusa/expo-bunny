{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{InButtonText,LinearGradientButton,Text,TextButton,TextInputIcon,View}from\"../UI\";import*as React from'react';import{useState}from'react';import{Col,InputCard,Row}from\"../../containers\";import{collectBizLogicResult,collectSysError}from\"../../store/actions\";import{shortenTFunctionKey}from\"../../providers/i18n-labor\";import{makeStyles}from\"./styles\";import{useAuthLabor}from\"../../providers/auth-labor\";import{useDispatch}from'react-redux';import{LinearGradientIcon}from\"../LinearGradientIcon\";import{bizLogicError}from\"../../helpers\";import{useBunnyKit}from\"../../hooks/bunny-kit\";export var ForgotPassword=function ForgotPassword(_ref){var route=_ref.route,navigation=_ref.navigation,onSent=_ref.onSent,onCancel=_ref.onCancel,email=_ref.email;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,t=_useBunnyKit.t,wp=_useBunnyKit.wp;var st=shortenTFunctionKey(t,'screens.Auth');var styles=makeStyles(sizeLabor,themeLabor);var _useAuthLabor=useAuthLabor(),authFunctions=_useAuthLabor.authFunctions;var dispatch=useDispatch();var _useState=useState(email),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSent=_useState4[0],setIsSent=_useState4[1];var navToReference=function navToReference(){var referenceRoute;if(route.params&&route.params.reference){referenceRoute=JSON.parse(route.params.reference);navigation.navigate(referenceRoute);}else{navigation.navigate('Home');}};var navToLogin=function navToLogin(){var referenceRoute;if(route.params&&route.params.reference){referenceRoute=JSON.parse(route.params.reference);navigation.navigate(referenceRoute);}else{navigation.navigate('Home');}};var forgotPassword=function forgotPassword(){var result;return _regeneratorRuntime.async(function forgotPassword$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!username){_context.next=8;break;}_context.next=4;return _regeneratorRuntime.awrap(authFunctions.firebaseResetPassword(username));case 4:result=_context.sent;if(result.success){setIsSent(true);}else{dispatch(collectBizLogicResult(result));}_context.next=9;break;case 8:dispatch(collectBizLogicResult(bizLogicError('Please enter email')));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);dispatch(collectSysError(_context.t0));case 14:case\"end\":return _context.stop();}}},null,null,[[0,11]],Promise);};return React.createElement(View,{style:styles.container},React.createElement(InputCard,{title:st(\"email\")},React.createElement(TextInputIcon,{placeholder:t(\"placeholders.email\"),textContentType:\"emailAddress\",value:username,onChangeText:function onChangeText(value){setUsername(value);},autoCapitalize:\"none\",renderIcon:function renderIcon(){return React.createElement(LinearGradientIcon,{name:\"mail\",size:wp(20)});}})),React.createElement(Row,{style:styles.row},React.createElement(Col,{size:6},React.createElement(LinearGradientButton,{onPress:forgotPassword},React.createElement(InButtonText,null,st(\"resetPassword\")))),React.createElement(Col,{size:1}),React.createElement(Col,{size:6},React.createElement(TextButton,{onPress:function onPress(){if(onCancel)onCancel();}},React.createElement(Text,null,st(\"goToLogin\"))))),isSent?React.createElement(React.Fragment,null,React.createElement(Row,{style:styles.row},React.createElement(Text,null,st(\"checkYourEmail\"))),React.createElement(Row,{style:styles.row},React.createElement(LinearGradientButton,{onPress:function onPress(){if(onSent)onSent();}},React.createElement(InButtonText,null,st(\"goToLogin\"))))):null);};","map":null,"metadata":{},"sourceType":"module"}