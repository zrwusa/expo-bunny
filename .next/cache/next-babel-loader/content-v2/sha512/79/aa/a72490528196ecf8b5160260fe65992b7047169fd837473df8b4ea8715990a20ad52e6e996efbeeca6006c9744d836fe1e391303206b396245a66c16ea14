{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{call,put,takeEvery}from'redux-saga/effects';import{bunnyAPI}from\"../../helpers/bunny-api\";import{collectBizLogicResult,collectSysError,receiveGetCurrentPrice,receiveGetDemoSagas,requestFailed,requesting,requestSuccess}from\"../actions\";import{EBizLogicMsg,EDemoCryptoCurrency,EDemoSaga,EDemoSagaFirebase}from\"../../constants\";import{bizLogicSuccess}from\"../../helpers\";import{firebase}from\"../../firebase\";export var sagasGenerator=_regeneratorRuntime.mark(function sagasGenerator(){return _regeneratorRuntime.wrap(function sagasGenerator$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return takeEvery(EDemoSaga.GET_DEMO_SAGAS,_regeneratorRuntime.mark(function _callee(action){var payload,url,method,config,_yield$call,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=action.payload;url='/api/example-saga-items';method='GET';config={url:url,method:method,params:payload};_context.prev=4;_context.next=7;return put(requesting(config));case 7:_context.next=9;return call(function(){return bunnyAPI.request(config);});case 9:_yield$call=_context.sent;data=_yield$call.data.data;_context.next=13;return put(collectBizLogicResult(bizLogicSuccess(data,EBizLogicMsg.GET_DEMO_SAGAS_SUCCESS,false)));case 13:_context.next=15;return put(receiveGetDemoSagas(data.items));case 15:_context.next=17;return put(requestSuccess(config));case 17:_context.next=25;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](4);_context.next=23;return put(collectSysError(_context.t0));case 23:_context.next=25;return put(requestFailed(config));case 25:case\"end\":return _context.stop();}}},_callee,null,[[4,19]]);}));case 2:_context6.next=4;return takeEvery(EDemoCryptoCurrency.SAVE_QUICK_ALERT_SETTINGS,_regeneratorRuntime.mark(function _callee2(action){var payload,url,method,config,_yield$call2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=action.payload;url='/api/push-service/alert-quick-settings';method='POST';config={url:url,method:method,data:payload};_context2.prev=4;_context2.next=7;return put(requesting(config));case 7:_context2.next=9;return call(function(){return bunnyAPI.request(config);});case 9:_yield$call2=_context2.sent;data=_yield$call2.data;_context2.next=13;return put(collectBizLogicResult(bizLogicSuccess(data,EBizLogicMsg.SAVE_QUICK_ALERT_SETTINGS_SUCCESS)));case 13:_context2.next=15;return put(requestSuccess(config));case 15:_context2.next=23;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](4);_context2.next=21;return put(collectSysError(_context2.t0));case 21:_context2.next=23;return put(requestFailed(config));case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[4,17]]);}));case 4:_context6.next=6;return takeEvery(EDemoCryptoCurrency.CANCEL_ALL_ALERT_SETTINGS,_regeneratorRuntime.mark(function _callee3(action){var payload,url,method,config,_yield$call3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=action.payload;url='/api/push-service/alert-settings';method='DELETE';config={url:url,method:method,params:payload};_context3.prev=4;_context3.next=7;return put(requesting(config));case 7:_context3.next=9;return call(function(){return bunnyAPI.request(config);});case 9:_yield$call3=_context3.sent;data=_yield$call3.data;_context3.next=13;return put(collectBizLogicResult(bizLogicSuccess(data,EBizLogicMsg.CANCEL_ALL_ALERT_SETTINGS_SUCCESS)));case 13:_context3.next=15;return put(requestSuccess(config));case 15:_context3.next=23;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](4);_context3.next=21;return put(collectSysError(_context3.t0));case 21:_context3.next=23;return put(requestFailed(config));case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[4,17]]);}));case 6:_context6.next=8;return takeEvery(EDemoCryptoCurrency.GET_CURRENT_PRICE,_regeneratorRuntime.mark(function _callee4(){var url,method,config,_yield$call4,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:url='/api/crypto-currency-prices';method='GET';config={url:url,method:method};_context4.prev=3;_context4.next=6;return put(requesting(config));case 6:_context4.next=8;return call(function(){return bunnyAPI.request(config);});case 8:_yield$call4=_context4.sent;data=_yield$call4.data.data;_context4.next=12;return put(receiveGetCurrentPrice({currentPrice:data}));case 12:_context4.next=14;return put(collectBizLogicResult(bizLogicSuccess(data,EBizLogicMsg.GET_CURRENT_PRICE_SUCCESS,false)));case 14:_context4.next=16;return put(requestSuccess(config));case 16:_context4.next=24;break;case 18:_context4.prev=18;_context4.t0=_context4[\"catch\"](3);_context4.next=22;return put(collectSysError(_context4.t0));case 22:_context4.next=24;return put(requestFailed(config));case 24:case\"end\":return _context4.stop();}}},_callee4,null,[[3,18]]);}));case 8:_context6.next=10;return takeEvery(EDemoSagaFirebase.SAVE_DEMO_SAGA_FIREBASE_TODO,_regeneratorRuntime.mark(function _callee5(action){var payload,url,method,config;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:payload=action.payload;url='/todoList';method='POST';config={url:url,method:method,data:payload};_context5.prev=4;_context5.next=7;return put(requesting(config));case 7:_context5.next=9;return call(function(){return firebase.database().ref(url).push(payload);});case 9:_context5.next=11;return put(requestSuccess(config));case 11:_context5.next=19;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](4);_context5.next=17;return put(collectSysError(_context5.t0));case 17:_context5.next=19;return put(requestFailed(config));case 19:case\"end\":return _context5.stop();}}},_callee5,null,[[4,13]]);}));case 10:case\"end\":return _context6.stop();}}},sagasGenerator);});","map":null,"metadata":{},"sourceType":"module"}