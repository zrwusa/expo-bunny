{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useEffect,useMemo,useState}from'react';import{shortenTFunctionKey}from\"../../../providers/i18n-labor\";import{makeContainerStyles}from\"../../../containers\";import{makeStyles}from\"./styles\";import Animated from\"react-native-web/dist/exports/Animated\";import Platform from\"react-native-web/dist/exports/Platform\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import{uuid4}from'@sentry/utils';import{Masonry}from\"../../../components/Masonry/Masonry\";import{FollowUpSearchBar}from\"../../../components/FollowUpSearchBar\";import{useSelector}from'react-redux';import{isLoaded,useFirebase,useFirestoreConnect}from'react-redux-firebase';import config from\"../../../config\";import{Preparing}from\"../../../components/Preparing\";import{useBunnyKit}from\"../../../hooks/bunny-kit\";export function SocialMediaSearchScreen(_ref){var route=_ref.route,navigation=_ref.navigation;var _useBunnyKit=useBunnyKit(),sizeLabor=_useBunnyKit.sizeLabor,themeLabor=_useBunnyKit.themeLabor,wp=_useBunnyKit.wp,t=_useBunnyKit.t;var firebase=useFirebase();var getSocialMediaImages=function getSocialMediaImages(){return _regeneratorRuntime.async(function getSocialMediaImages$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(firebase.watchEvent('value','socialMediaImages','socialMediaImages'));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);};useFirestoreConnect([{collection:'socialMediaImages'}]);var socialMediaImages=useSelector(function(rootState){return rootState.firestoreState.ordered.socialMediaImages;});var st=shortenTFunctionKey(t,'screens.SocialMediaSearch');var containerStyles=makeContainerStyles(sizeLabor,themeLabor);var styles=makeStyles(sizeLabor,themeLabor);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),MasonryData=_useState2[0],setMasonryData=_useState2[1];var memoizedSocialMediaImages=useMemo(function(){if(!socialMediaImages){return[];}return socialMediaImages.map(function(item){return item;});},[socialMediaImages]);useEffect(function(){getSocialMediaImages().then();},[]);useEffect(function(){if(!socialMediaImages){return;}var column1=[],column2=[],column3=[];var manyBricks=memoizedSocialMediaImages;for(var _i=0;_i<1;_i++){manyBricks=manyBricks.concat(memoizedSocialMediaImages);}var i=0;while(i<manyBricks.length){column1.push(manyBricks[i++]);if(i<manyBricks.length){column2.push(manyBricks[i++]);}if(i<manyBricks.length){column3.push(manyBricks[i++]);}}var newMasonryData=[];for(var _i2=0;_i2<10;_i2++){newMasonryData.push({id:uuid4(),column1:column1,column2:column2,column3:column3});}setMasonryData(newMasonryData);},[socialMediaImages]);var imageWidth=wp(375/3-1);var getItem=function getItem(data,index){return data[index];};var getItemCount=function getItemCount(data){return data.length;};var _useState3=useState(new Animated.Value(0)),_useState4=_slicedToArray(_useState3,1),scrollYValue=_useState4[0];var handleSearch=function handleSearch(key){var column1=[],column2=[],column3=[];var manyBricks=[];for(var _i3=0;_i3<1;_i3++){manyBricks=manyBricks.concat(memoizedSocialMediaImages.filter(function(brick){return brick.text.includes(key);}));}var i=0;while(i<manyBricks.length){column1.push(manyBricks[i++]);if(i<manyBricks.length){column2.push(manyBricks[i++]);}if(i<manyBricks.length){column3.push(manyBricks[i++]);}}var newMasonryData=[];for(var _i4=0;_i4<10;_i4++){newMasonryData.push({id:uuid4(),column1:column1,column2:column2,column3:column3});}setMasonryData(newMasonryData);};return React.createElement(SafeAreaView,{style:containerStyles.Screen},React.createElement(FollowUpSearchBar,{scrollYValue:scrollYValue,onSearch:handleSearch}),isLoaded(socialMediaImages)?React.createElement(Animated.FlatList,{data:MasonryData,renderItem:function renderItem(_ref2){var item=_ref2.item;return React.createElement(Masonry,{data:item});},keyExtractor:function keyExtractor(item){return item.id;},initialNumToRender:1,windowSize:3,removeClippedSubviews:Platform.OS==='android',maxToRenderPerBatch:10,updateCellsBatchingPeriod:50,onScroll:Animated.event([{nativeEvent:{contentOffset:{y:scrollYValue}}}],{useNativeDriver:config.useNativeDriver})}):React.createElement(Preparing,null));}","map":null,"metadata":{},"sourceType":"module"}