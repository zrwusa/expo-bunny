{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageVideo.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import{Video}from\"../../../packages/expo-av/src\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;return StyleSheet.create({container:{},video:{width:wp(240),height:wp(160),borderRadius:wp(13),margin:wp(3),resizeMode:'cover'}});};var MessageVideo=function(_Component){_inherits(MessageVideo,_Component);var _super=_createSuper(MessageVideo);function MessageVideo(){_classCallCheck(this,MessageVideo);return _super.apply(this,arguments);}_createClass(MessageVideo,[{key:\"render\",value:function render(){var _this=this;var _this$props=this.props,videoContainerStyle=_this$props.videoContainerStyle,videoProps=_this$props.videoProps,videoStyle=_this$props.videoStyle,currentMessage=_this$props.currentMessage,isDebug=_this$props.isDebug;isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level4]MessageVideo props',this.props);var _this$props$bunnyKit=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{style:[styles.container,videoContainerStyle],__self:this,__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:13}},currentMessage?currentMessage.video?React.createElement(Video,_extends({style:[styles.video,videoStyle],useNativeControls:true,resizeMode:\"contain\",source:{uri:currentMessage.video},onLoad:function onLoad(){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageVideo onLoad');_this.props.onMessageLoad==null?void 0:_this.props.onMessageLoad(currentMessage);},onLoadStart:function onLoadStart(){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageVideo onLoadStart');_this.props.onMessageLoadStart==null?void 0:_this.props.onMessageLoadStart(currentMessage);},onReadyForDisplay:function onReadyForDisplay(){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageVideo onReadyForDisplay');_this.props.onMessageLoadEnd==null?void 0:_this.props.onMessageLoadEnd(currentMessage);isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageVideo onMessageReadyForDisplay');_this.props.onMessageReadyForDisplay==null?void 0:_this.props.onMessageReadyForDisplay(currentMessage);},onError:function onError(e){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageVideo onError',e);_this.props.onMessageLoadError==null?void 0:_this.props.onMessageLoadError(new Error(e),currentMessage);}},videoProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:72,columnNumber:31}})):React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:97,columnNumber:31}},'currentMessage.video is undefined'):React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:98,columnNumber:27}},'currentMessage is undefined'));}}]);return MessageVideo;}(Component);MessageVideo.defaultProps={currentMessage:undefined,videoContainerStyle:{},videoStyle:{},videoProps:{},onMessageLoad:undefined,onMessageLoadStart:undefined,onMessageLoadEnd:undefined,onMessageReadyForDisplay:undefined,onMessageLoadError:undefined,isDebug:false};export default withBunnyKit(MessageVideo);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageVideo.tsx"],"names":["makeStyles","wp","sizeLabor","container","video","width","height","borderRadius","margin","resizeMode","MessageVideo","Component","defaultProps","currentMessage","videoContainerStyle","videoStyle","videoProps","onMessageLoad","onMessageLoadStart","onMessageLoadEnd","onMessageReadyForDisplay","onMessageLoadError","isDebug","console","themeLabor","styles","uri","withBunnyKit"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {StyleProp, StyleSheet, Text, View, ViewStyle} from 'react-native';\n// TODO: support web\nimport {IMessage} from './types';\nimport {Video, VideoProps} from '../../../packages/expo-av/src';\nimport {SizeLabor, ThemeLabor} from '../../types';\nimport {withBunnyKit, WithBunnyKit} from '../../hooks/bunny-kit';\n\nconst makeStyles = (sizeLabor: SizeLabor, themeLabor: ThemeLabor) => {\n    const {wp} = sizeLabor.designsBasedOn.iphoneX;\n    return StyleSheet.create({\n        container: {},\n        video: {\n            width: wp(240),\n            height: wp(160),\n            borderRadius: wp(13),\n            margin: wp(3),\n            resizeMode: 'cover',\n        }\n    });\n};\n\nexport interface MessageVideoProps<TMessage extends IMessage> {\n    currentMessage?: TMessage;\n    videoContainerStyle?: StyleProp<ViewStyle>;\n    videoStyle?: StyleProp<ViewStyle>;\n    videoProps?: VideoProps;\n    isDebug?: boolean;\n\n    onMessageLoad?(currentMessage: TMessage): void;\n\n    onMessageLoadStart?(currentMessage: TMessage): void;\n\n    onMessageLoadEnd?(currentMessage: TMessage): void;\n\n    onMessageReadyForDisplay?(currentMessage: TMessage): void;\n\n    onMessageLoadError?(e: Error, currentMessage: TMessage): void;\n}\n\nclass MessageVideo<TMessage extends IMessage> extends Component<MessageVideoProps<TMessage> & WithBunnyKit> {\n    static defaultProps = {\n        currentMessage: undefined,\n        videoContainerStyle: {},\n        videoStyle: {},\n        videoProps: {},\n        onMessageLoad: undefined,\n        onMessageLoadStart: undefined,\n        onMessageLoadEnd: undefined,\n        onMessageReadyForDisplay: undefined,\n        onMessageLoadError: undefined,\n\n        isDebug: false,\n    };\n\n    render() {\n        const {\n            videoContainerStyle,\n            videoProps,\n            videoStyle,\n            currentMessage,\n            isDebug,\n        } = this.props;\n        isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level4]MessageVideo props', this.props);\n        const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        return (\n            <View style={[styles.container, videoContainerStyle]}>\n                {\n                    currentMessage ?\n                        currentMessage.video\n                            ? <Video\n                                style={[styles.video, videoStyle]}\n                                useNativeControls\n                                resizeMode=\"contain\"\n                                source={{uri: currentMessage.video}}\n                                onLoad={() => {\n                                    isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageVideo onLoad');\n                                    this.props.onMessageLoad?.(currentMessage);\n                                }}\n                                onLoadStart={() => {\n                                    isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageVideo onLoadStart');\n                                    this.props.onMessageLoadStart?.(currentMessage);\n                                }}\n                                onReadyForDisplay={() => {\n                                    isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageVideo onReadyForDisplay');\n                                    this.props.onMessageLoadEnd?.(currentMessage);\n                                    isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageVideo onMessageReadyForDisplay');\n                                    this.props.onMessageReadyForDisplay?.(currentMessage);\n                                }}\n                                onError={(e) => {\n                                    isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageVideo onError', e);\n                                    this.props.onMessageLoadError?.(new Error(e), currentMessage);\n                                }}\n                                {...videoProps}\n                            />\n                            : <Text>{'currentMessage.video is undefined'}</Text>\n                        : <Text>{'currentMessage is undefined'}</Text>\n                }\n\n            </View>\n        );\n    }\n}\n\nexport default withBunnyKit(MessageVideo);\n"]},"metadata":{},"sourceType":"module"}