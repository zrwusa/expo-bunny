{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/Video/Video.tsx\";var _excluded=[\"bunnyKit\",\"onPlaybackStatusUpdate\",\"shouldShowButton\",\"shouldShowStatus\"];function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import*as React from'react';import{createRef}from'react';import{Video}from\"../../../packages/expo-av/src\";import{Button,Text,View}from\"../UI\";import{makeStyles}from\"./styles\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var ShowVideoInner=function(_React$PureComponent){_inherits(ShowVideoInner,_React$PureComponent);var _super=_createSuper(ShowVideoInner);function ShowVideoInner(props){var _this;_classCallCheck(this,ShowVideoInner);_this=_super.call(this,props);_this.video=createRef();_this._isMounted=false;_this.state={isPlaying:false,playbackStatus:undefined};return _this;}_createClass(ShowVideoInner,[{key:\"componentDidMount\",value:function componentDidMount(){this._isMounted=true;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isPlaying=_this$state.isPlaying,playbackStatus=_this$state.playbackStatus;var _this$props=this.props,bunnyKit=_this$props.bunnyKit,onPlaybackStatusUpdate=_this$props.onPlaybackStatusUpdate,shouldShowButton=_this$props.shouldShowButton,shouldShowStatus=_this$props.shouldShowStatus,rest=_objectWithoutProperties(_this$props,_excluded);var sizeLabor=bunnyKit.sizeLabor,themeLabor=bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{__self:this,__source:{fileName:_jsxFileName,lineNumber:45,columnNumber:13}},React.createElement(Video,_extends({ref:this.video,style:styles.video,useNativeControls:true,resizeMode:\"contain\",isLooping:true,onPlaybackStatusUpdate:function onPlaybackStatusUpdate(playbackStatus){if(!_this2._isMounted){return;}if(!playbackStatus.isLoaded){if(playbackStatus.error){console.log(\"Encountered a fatal error during playback: \"+playbackStatus.error);}}else{if(playbackStatus.isPlaying){}else{}if(playbackStatus.isBuffering){}if(playbackStatus.didJustFinish&&!playbackStatus.isLooping){}}}},rest,{__self:this,__source:{fileName:_jsxFileName,lineNumber:46,columnNumber:17}})),shouldShowButton?React.createElement(View,{style:styles.buttons,__self:this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:23}},React.createElement(Button,{title:isPlaying?'Pause':'Play',onPress:function onPress(){if(_this2.video.current){return isPlaying?_this2.video.current.pauseAsync():_this2.video.current.playAsync();}},__self:this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:25}})):null,shouldShowStatus?React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:97,columnNumber:23}},JSON.stringify(playbackStatus)):null);}}]);return ShowVideoInner;}(React.PureComponent);export var ShowVideo=withBunnyKit(ShowVideoInner);","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/Video/Video.tsx"],"names":["ShowVideoInner","React","PureComponent","video","createRef","_isMounted","isPlaying","playbackStatus","undefined","bunnyKit","onPlaybackStatusUpdate","shouldShowButton","shouldShowStatus","rest","sizeLabor","themeLabor","styles","makeStyles","console","JSON","ShowVideo","withBunnyKit"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {createRef} from 'react';\nimport {AVPlaybackStatus, Video, VideoProps} from '../../../packages/expo-av/src';\nimport {Button, Text, View} from '../UI';\nimport {makeStyles} from './styles';\nimport {WithBunnyKit, withBunnyKit} from '../../hooks/bunny-kit';\n\ninterface ShowVideoState {\n    isPlaying: boolean,\n    playbackStatus?: AVPlaybackStatus\n}\n\nexport interface ShowVideoProps extends VideoProps, WithBunnyKit {\n    shouldShowStatus?: boolean,\n    shouldShowButton?: boolean\n}\n\nclass ShowVideoInner extends React.PureComponent<ShowVideoProps, ShowVideoState> {\n    private video = createRef<Video>();\n    private _isMounted = false;\n\n    constructor(props: ShowVideoProps) {\n        super(props);\n\n        this.state = {\n            isPlaying: false,\n            playbackStatus: undefined,\n        };\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        const {isPlaying, playbackStatus} = this.state;\n        const {bunnyKit, onPlaybackStatusUpdate, shouldShowButton, shouldShowStatus, ...rest} = this.props;\n        const {sizeLabor, themeLabor} = bunnyKit;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        return (\n            <View>\n                <Video\n                    ref={this.video}\n                    style={styles.video}\n                    useNativeControls\n                    resizeMode=\"contain\"\n                    isLooping\n                    onPlaybackStatusUpdate={playbackStatus => {\n                        if (!this._isMounted) {\n                            return;\n                        }\n                        if (!playbackStatus.isLoaded) {\n                            // Update your UI for the unloaded state\n                            if (playbackStatus.error) {\n                                console.log(`Encountered a fatal error during playback: ${playbackStatus.error}`);\n                                // Send Expo team the error on Slack or the forums so we can help you debug!\n                            }\n                        } else {\n                            // Update your UI for the loaded state\n                            if (playbackStatus.isPlaying) {\n                                // Update your UI for the playing state\n                            } else {\n                                // Update your UI for the paused state\n                            }\n                            // todo Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.\n                            // this.setState({isPlaying: playbackStatus.isPlaying})\n                            if (playbackStatus.isBuffering) {\n                                // Update your UI for the buffering state\n                            }\n                            if (playbackStatus.didJustFinish && !playbackStatus.isLooping) {\n                                // The player has just finished playing and will stop. Maybe you want to play something else?\n                            }\n                        }\n                        // todo Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.\n                        // this.setState({playbackStatus: playbackStatus})\n                    }}\n                    {...rest}\n                />\n                {shouldShowButton\n                    ? <View style={styles.buttons}>\n                        <Button\n                            title={isPlaying ? 'Pause' : 'Play'}\n                            onPress={() => {\n                                if (this.video.current) {\n                                    return isPlaying ? this.video.current.pauseAsync() : this.video.current.playAsync();\n                                }\n                            }}\n                        />\n                    </View>\n                    : null}\n\n                {shouldShowStatus\n                    ? <Text>{JSON.stringify(playbackStatus)}</Text>\n                    : null}\n            </View>\n        );\n    }\n}\n\nexport const ShowVideo = withBunnyKit(ShowVideoInner);\n\n"]},"metadata":{},"sourceType":"module"}