{"ast":null,"code":"\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _defineProperty2=_interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}it=o[Symbol.iterator]();return it.next.bind(it);}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}exports.__esModule=true;exports.pathToRegexp=exports.default=exports.customRouteMatcherOptions=exports.matcherOptions=void 0;var pathToRegexp=_interopRequireWildcard(require(\"next/dist/compiled/path-to-regexp\"));exports.pathToRegexp=pathToRegexp;function _getRequireWildcardCache(){if(typeof WeakMap!==\"function\")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var matcherOptions={sensitive:false,delimiter:'/'};exports.matcherOptions=matcherOptions;var customRouteMatcherOptions=_objectSpread(_objectSpread({},matcherOptions),{},{strict:true});exports.customRouteMatcherOptions=customRouteMatcherOptions;var _default=function _default(){var customRoute=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return function(path){var keys=[];var matcherRegex=pathToRegexp.pathToRegexp(path,keys,customRoute?customRouteMatcherOptions:matcherOptions);var matcher=pathToRegexp.regexpToFunction(matcherRegex,keys);return function(pathname,params){var res=pathname==null?false:matcher(pathname);if(!res){return false;}if(customRoute){for(var _iterator=_createForOfIteratorHelperLoose(keys),_step;!(_step=_iterator()).done;){var key=_step.value;if(typeof key.name==='number'){delete res.params[key.name];}}}return _objectSpread(_objectSpread({},params),res.params);};};};exports.default=_default;","map":{"version":3,"sources":["../../../../../next-server/lib/router/utils/path-match.ts"],"names":["matcherOptions","sensitive","delimiter","customRouteMatcherOptions","strict","customRoute","path","keys","matcherRegex","pathToRegexp","matcher","res","pathname","key"],"mappings":"+oEAAA,GAAA,CAAA,YAAA,CAAA,uBAAA,CAAA,OAAA,CAAA,mCAAA,CAAA,CAAA,C,+2BAIO,IAAMA,CAAAA,cACc,CAAG,CAC5BC,SAAS,CADmB,KAAA,CAE5BC,SAAS,CAHJ,GACuB,CADvB,C,sCAMA,GAAMC,CAAAA,yBACc,gCAAG,cAAH,MAEzBC,MAAM,CAHD,IACoB,EADpB,C,yEAMQ,Q,SAAA,EAAyB,IAAxBC,CAAAA,WAAwB,2DAAzB,KAAyB,CACtC,MAAQC,UAAAA,IAAD,CAAkB,CACvB,GAAMC,CAAAA,IAAwB,CAA9B,EAAA,CACA,GAAMC,CAAAA,YAAY,CAAGC,YAAY,CAAZA,YAAAA,CAAAA,IAAAA,CAAAA,IAAAA,CAGnBJ,WAAW,CAAA,yBAAA,CAHb,cAAqBI,CAArB,CAKA,GAAMC,CAAAA,OAAO,CAAGD,YAAY,CAAZA,gBAAAA,CAAAA,YAAAA,CAAhB,IAAgBA,CAAhB,CAEA,MAAO,UAAA,QAAA,CAAA,MAAA,CAAuD,CAC5D,GAAME,CAAAA,GAAG,CAAGC,QAAQ,EAARA,IAAAA,CAAAA,KAAAA,CAA2BF,OAAO,CAA9C,QAA8C,CAA9C,CACA,GAAI,CAAJ,GAAA,CAAU,CACR,MAAA,MAAA,CAGF,IAAA,WAAA,CAAiB,CACf,kDAAA,IAAA,mCAAwB,IAAxB,CAAA,GAAwB,aAGtB,GAAI,MAAOG,CAAAA,GAAG,CAAV,IAAA,GAAJ,QAAA,CAAkC,CAChC,MAAQF,CAAAA,GAAG,CAAJ,MAACA,CAAmBE,GAAG,CAA9B,IAAQF,CAAR,CAEH,CACF,CAED,uCAAO,MAAP,EAAuBA,GAAG,CAA1B,MAAA,EAhBF,CAAA,CATF,CAAA,C","sourcesContent":["import * as pathToRegexp from 'next/dist/compiled/path-to-regexp'\n\nexport { pathToRegexp }\n\nexport const matcherOptions: pathToRegexp.TokensToRegexpOptions &\n  pathToRegexp.ParseOptions = {\n  sensitive: false,\n  delimiter: '/',\n}\n\nexport const customRouteMatcherOptions: pathToRegexp.TokensToRegexpOptions &\n  pathToRegexp.ParseOptions = {\n  ...matcherOptions,\n  strict: true,\n}\n\nexport default (customRoute = false) => {\n  return (path: string) => {\n    const keys: pathToRegexp.Key[] = []\n    const matcherRegex = pathToRegexp.pathToRegexp(\n      path,\n      keys,\n      customRoute ? customRouteMatcherOptions : matcherOptions\n    )\n    const matcher = pathToRegexp.regexpToFunction(matcherRegex, keys)\n\n    return (pathname: string | null | undefined, params?: any) => {\n      const res = pathname == null ? false : matcher(pathname)\n      if (!res) {\n        return false\n      }\n\n      if (customRoute) {\n        for (const key of keys) {\n          // unnamed params should be removed as they\n          // are not allowed to be used in the destination\n          if (typeof key.name === 'number') {\n            delete (res.params as any)[key.name]\n          }\n        }\n      }\n\n      return { ...params, ...res.params }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}