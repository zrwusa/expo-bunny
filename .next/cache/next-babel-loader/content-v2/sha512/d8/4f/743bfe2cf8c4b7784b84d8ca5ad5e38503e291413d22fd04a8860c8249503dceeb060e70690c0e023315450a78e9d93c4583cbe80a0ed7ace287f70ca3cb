{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/screens/DemoSocialMedia/Home/Home.tsx\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import _regeneratorRuntime from\"@babel/runtime/regenerator\";import*as React from'react';import{useCallback,useEffect,useMemo,useState}from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import Platform from\"react-native-web/dist/exports/Platform\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import SafeAreaView from\"react-native-web/dist/exports/SafeAreaView\";import{IncrementId}from\"../../../utils\";import{SocialMediaVideoCard}from\"../../../components/SocialMediaVideoCard\";import{isLoaded,useFirebase,useFirestoreConnect}from'react-redux-firebase';import{useSelector}from'react-redux';import{Preparing}from\"../../../components/Preparing\";export function SocialMediaHomeScreen(){var _this=this;var firebase=useFirebase();useFirestoreConnect([{collection:'socialMediaVideos'}]);var socialMediaVideos=useSelector(function(rootState){return rootState.firestoreState.ordered.socialMediaVideos;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mannyCardData=_useState2[0],setMannyCardData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),refreshing=_useState4[0],setRefreshing=_useState4[1];var onRefresh=useCallback(function _callee(){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setRefreshing(true);return _context.abrupt(\"return\",setRefreshing(false));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);},[]);var memoizedSocialMediaVideos=useMemo(function(){if(socialMediaVideos&&socialMediaVideos.length>0){return socialMediaVideos.map(function(item){return item;});}return[];},[socialMediaVideos]);useEffect(function(){},[]);useEffect(function(){var cardData5Items=memoizedSocialMediaVideos;var mannyCardData=[];var cardIncrementId=new IncrementId('card-');var commentIncrementId=new IncrementId('comment-');for(var i=0;i<10;i++){for(var _iterator=_createForOfIteratorHelperLoose(cardData5Items),_step;!(_step=_iterator()).done;){var card=_step.value;var newCard=_objectSpread(_objectSpread({},card),{},{comments:[],id:cardIncrementId.getId()});for(var _iterator2=_createForOfIteratorHelperLoose(card.comments),_step2;!(_step2=_iterator2()).done;){var comment=_step2.value;var newComment=_objectSpread(_objectSpread({},comment),{},{id:commentIncrementId.getId()});newCard.comments.push(newComment);}mannyCardData.push(newCard);}}setMannyCardData(mannyCardData);},[memoizedSocialMediaVideos]);return React.createElement(SafeAreaView,{style:{flex:1},__self:this,__source:{fileName:_jsxFileName,lineNumber:64,columnNumber:9}},isLoaded(socialMediaVideos)?React.createElement(FlatList,{data:mannyCardData,renderItem:function renderItem(_ref){var item=_ref.item;return React.createElement(SocialMediaVideoCard,{card:item,__self:_this,__source:{fileName:_jsxFileName,lineNumber:68,columnNumber:57}});},keyExtractor:function keyExtractor(item){return item.id;},refreshControl:React.createElement(RefreshControl,{refreshing:refreshing,onRefresh:onRefresh,__self:this,__source:{fileName:_jsxFileName,lineNumber:71,columnNumber:37}}),initialNumToRender:3,windowSize:5,removeClippedSubviews:Platform.OS==='android',onEndReached:function onEndReached(){console.log('onEndReached');},__self:this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:23}}):React.createElement(Preparing,{__self:this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:23}}));}","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/screens/DemoSocialMedia/Home/Home.tsx"],"names":["firebase","useFirebase","useFirestoreConnect","collection","socialMediaVideos","useSelector","rootState","mannyCardData","setMannyCardData","useState","refreshing","setRefreshing","onRefresh","useCallback","memoizedSocialMediaVideos","useMemo","useEffect","cardData5Items","cardIncrementId","commentIncrementId","i","card","newCard","comments","id","comment","newComment","flex","item","Platform","console"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useCallback, useEffect, useMemo, useState} from 'react';\nimport {FlatList, Platform, RefreshControl, SafeAreaView} from 'react-native';\nimport {IncrementId} from '../../../utils';\nimport {RootState, SocialMediaMainDatum} from '../../../types';\nimport {SocialMediaVideoCard} from '../../../components/SocialMediaVideoCard';\nimport {isLoaded, useFirebase, useFirestoreConnect} from 'react-redux-firebase';\nimport {useSelector} from 'react-redux';\nimport {Preparing} from '../../../components/Preparing';\n\nexport function SocialMediaHomeScreen() {\n    const firebase = useFirebase();\n    useFirestoreConnect([\n        {collection: 'socialMediaVideos'}\n    ]);\n    const socialMediaVideos = useSelector((rootState: RootState) => rootState.firestoreState.ordered.socialMediaVideos);\n    const [mannyCardData, setMannyCardData] = useState<SocialMediaMainDatum[]>([]);\n    const [refreshing, setRefreshing] = useState(false);\n\n    // const getSocialMediaVideos = async () => {\n    //     await firebase.watchEvent('value', 'socialMediaVideos', 'socialMediaVideos')\n    // }\n\n    const onRefresh = useCallback(async () => {\n        setRefreshing(true);\n        // await getSocialMediaVideos()\n        return setRefreshing(false);\n    }, []);\n\n    const memoizedSocialMediaVideos = useMemo(() => {\n        if (socialMediaVideos && socialMediaVideos.length > 0) {\n            return socialMediaVideos.map((item) => {\n                return item;\n            });\n        }\n        return [];\n    }, [socialMediaVideos]);\n\n    useEffect(() => {\n        // getSocialMediaVideos().then()\n    }, []);\n\n    useEffect(() => {\n        const cardData5Items: SocialMediaMainDatum[] = memoizedSocialMediaVideos;\n        let mannyCardData: SocialMediaMainDatum[] = [];\n\n        const cardIncrementId = new IncrementId('card-');\n        const commentIncrementId = new IncrementId('comment-');\n\n        for (let i = 0; i < 10; i++) {\n            for (let card of cardData5Items) {\n                let newCard: SocialMediaMainDatum = {...card, comments: [], id: cardIncrementId.getId()};\n                for (let comment of card.comments) {\n                    let newComment = {...comment, id: commentIncrementId.getId()};\n                    newCard.comments.push(newComment);\n                }\n                mannyCardData.push(newCard);\n            }\n        }\n        setMannyCardData(mannyCardData);\n    }, [memoizedSocialMediaVideos]);\n\n    return (\n        <SafeAreaView style={{flex: 1}}>\n            {\n                isLoaded(socialMediaVideos)\n                    ? <FlatList data={mannyCardData}\n                                renderItem={({item}) => <SocialMediaVideoCard card={item}/>}\n                                keyExtractor={item => item.id}\n                                refreshControl={\n                                    <RefreshControl\n                                        refreshing={refreshing}\n                                        onRefresh={onRefresh}\n                                    />\n                                }\n                                initialNumToRender={3} // * times viewport,first render,keep in memory\n                                windowSize={5} // * times viewport,keep in memory\n                        // /**\n                        //  * Enabling this prop on Android greatly improves scrolling performance with no known issues.\n                        //  * The alternative is that scrolling on Android is unusably bad. Enabling it on iOS has a few\n                        //  * known issues.\n                        //  */\n                                removeClippedSubviews={Platform.OS === 'android'}\n                        // maxToRenderPerBatch={10}\n                        // updateCellsBatchingPeriod={50}\n\n\n                                onEndReached={() => {\n                                    console.log('onEndReached');\n                                }}\n                    />\n                    : <Preparing/>\n            }\n        </SafeAreaView>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}