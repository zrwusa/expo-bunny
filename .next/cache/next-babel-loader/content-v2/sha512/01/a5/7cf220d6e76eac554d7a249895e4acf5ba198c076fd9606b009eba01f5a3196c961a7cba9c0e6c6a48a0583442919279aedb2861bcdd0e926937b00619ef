{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _jsxFileName=\"/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageText.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import Linking from\"react-native-web/dist/exports/Linking\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ParsedText from'react-native-parsed-text';import Communications from'react-native-communications';import{withBunnyKit}from\"../../hooks/bunny-kit\";import{connectActionSheet}from\"../../../packages/react-native-action-sheet/src\";var WWW_URL_PATTERN=/^www\\./i;var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;var colors=themeLabor.theme.colors;var textStyle={fontSize:wp(16),lineHeight:wp(20),marginTop:wp(5),marginBottom:wp(5),marginLeft:wp(10),marginRight:wp(10)};return{left:StyleSheet.create({container:{},text:_objectSpread({color:colors.textA},textStyle),link:{color:colors.textA,textDecorationLine:'underline'}}),right:StyleSheet.create({container:{},text:_objectSpread({color:colors.textB},textStyle),link:{color:colors.textB,textDecorationLine:'underline'}})};};var DEFAULT_OPTION_TITLES=['Call','Text','Cancel'];var MessageText=function(_React$Component){_inherits(MessageText,_React$Component);var _super=_createSuper(MessageText);function MessageText(){var _this;_classCallCheck(this,MessageText);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onUrlPress=function(url){if(WWW_URL_PATTERN.test(url)){_this.onUrlPress(\"http://\"+url);}else{Linking.canOpenURL(url).then(function(supported){if(!supported){console.error('No handler for URL:',url);}else{Linking.openURL(url);}});}};_this.onPhonePress=function(phone){var phoneNumberOptionTitles=_this.props.phoneNumberOptionTitles;var options=phoneNumberOptionTitles&&phoneNumberOptionTitles.length>0?phoneNumberOptionTitles.slice(0,3):DEFAULT_OPTION_TITLES;var cancelButtonIndex=options.length-1;_this.props.showActionSheetWithOptions({options:options,cancelButtonIndex:cancelButtonIndex},function(buttonIndex){switch(buttonIndex){case 0:Communications.phonecall(phone,true);break;case 1:Communications.text(phone);break;default:break;}});};_this.onEmailPress=function(email){return Communications.email([email],null,null,null,null);};return _this;}_createClass(MessageText,[{key:\"render\",value:function render(){var _this2=this;var _this$props$bunnyKit=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);var linkStyle=[styles[this.props.position].link,this.props.linkStyle&&this.props.linkStyle[this.props.position]];var _this$props=this.props,currentMessage=_this$props.currentMessage,isDebug=_this$props.isDebug;isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','[level4]MessageText props',this.props);return React.createElement(View,{style:[styles[this.props.position].container,this.props.textContainerStyle&&this.props.textContainerStyle[this.props.position]],__self:this,__source:{fileName:_jsxFileName,lineNumber:164,columnNumber:13}},currentMessage?currentMessage.text?React.createElement(ParsedText,{style:[styles[this.props.position].text,this.props.textStyle&&this.props.textStyle[this.props.position],this.props.customTextStyle],parse:[].concat(_toConsumableArray(this.props.parsePatterns(linkStyle)),[{type:'url',style:linkStyle,onPress:this.onUrlPress},{type:'phone',style:linkStyle,onPress:this.onPhonePress},{type:'email',style:linkStyle,onPress:this.onEmailPress}]),childrenProps:_objectSpread({},this.props.textProps),onLayout:function onLayout(){isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageText onLayout');_this2.props.onMessageLoad==null?void 0:_this2.props.onMessageLoad(currentMessage);_this2.props.onMessageLoadStart==null?void 0:_this2.props.onMessageLoadStart(currentMessage);_this2.props.onMessageLoadEnd==null?void 0:_this2.props.onMessageLoadEnd(currentMessage);isDebug&&console.log('%c[ chat ]','background: #555; color: #bada55','MessageText onMessageReadyForDisplay');_this2.props.onMessageReadyForDisplay==null?void 0:_this2.props.onMessageReadyForDisplay(currentMessage);},__self:this,__source:{fileName:_jsxFileName,lineNumber:173,columnNumber:27}},this.props.currentMessage.text):React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:198,columnNumber:27}},'currentMessage.text is undefined'):React.createElement(Text,{__self:this,__source:{fileName:_jsxFileName,lineNumber:199,columnNumber:23}},'currentMessage is undefined'));}}]);return MessageText;}(React.Component);MessageText.defaultProps={position:'left',phoneNumberOptionTitles:DEFAULT_OPTION_TITLES,currentMessage:undefined,textContainerStyle:{},textStyle:{},linkStyle:{},customTextStyle:{},textProps:{},parsePatterns:function parsePatterns(){return[];},onMessageLoad:undefined,onMessageLoadStart:undefined,onMessageLoadEnd:undefined,onMessageReadyForDisplay:undefined,onMessageLoadError:undefined,isDebug:false};export default withBunnyKit(connectActionSheet(MessageText));","map":{"version":3,"sources":["/Users/revone/projects/expo-react-bunny/src/components/BunnyChat/MessageText.tsx"],"names":["WWW_URL_PATTERN","makeStyles","wp","sizeLabor","colors","themeLabor","textStyle","fontSize","lineHeight","marginTop","marginBottom","marginLeft","marginRight","left","container","text","color","textA","link","textDecorationLine","right","textB","DEFAULT_OPTION_TITLES","MessageText","React","Component","defaultProps","position","phoneNumberOptionTitles","currentMessage","textContainerStyle","linkStyle","customTextStyle","textProps","parsePatterns","onMessageLoad","onMessageLoadStart","onMessageLoadEnd","onMessageReadyForDisplay","onMessageLoadError","isDebug","onUrlPress","Linking","console","onPhonePress","options","cancelButtonIndex","Communications","onEmailPress","styles","type","style","onPress","withBunnyKit","connectActionSheet"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Linking, StyleProp, StyleSheet, Text, TextProps, TextStyle, View, ViewStyle} from 'react-native';\nimport ParsedText from 'react-native-parsed-text';\nimport Communications from 'react-native-communications';\nimport {IMessage, LeftRightStyle, PositionLeftOrRight} from './types';\nimport {WithBunnyKit, withBunnyKit} from '../../hooks/bunny-kit';\nimport {ActionSheetProps, connectActionSheet} from '../../../packages/react-native-action-sheet/src';\nimport {SizeLabor, ThemeLabor} from '../../types';\n\nconst WWW_URL_PATTERN = /^www\\./i;\n\n\nconst makeStyles = (sizeLabor: SizeLabor, themeLabor: ThemeLabor) => {\n    const {wp} = sizeLabor.designsBasedOn.iphoneX;\n    const {theme: {colors}} = themeLabor;\n    // TODO not responsive\n    const textStyle = {\n        fontSize: wp(16),\n        lineHeight: wp(20),\n        marginTop: wp(5),\n        marginBottom: wp(5),\n        marginLeft: wp(10),\n        marginRight: wp(10),\n    };\n\n    return {\n        left: StyleSheet.create({\n            container: {},\n            text: {\n                color: colors.textA,\n                ...textStyle,\n            },\n            link: {\n                color: colors.textA,\n                textDecorationLine: 'underline',\n            },\n        }),\n        right: StyleSheet.create({\n            container: {},\n            text: {\n                color: colors.textB,\n                ...textStyle,\n            },\n            link: {\n                color: colors.textB,\n                textDecorationLine: 'underline',\n            },\n        }),\n    };\n};\n\nconst DEFAULT_OPTION_TITLES = ['Call', 'Text', 'Cancel'];\n\nexport interface MessageTextProps<TMessage extends IMessage> {\n    position: PositionLeftOrRight;\n    phoneNumberOptionTitles?: string[];\n    currentMessage?: TMessage;\n    textContainerStyle?: LeftRightStyle<ViewStyle>;\n    textStyle?: LeftRightStyle<TextStyle>;\n    linkStyle?: LeftRightStyle<TextStyle>;\n    textProps?: TextProps;\n    customTextStyle?: StyleProp<TextStyle>;\n    isDebug?: boolean;\n\n    parsePatterns?(linkStyle: TextStyle): any;\n\n    onMessageLoad?(currentMessage: TMessage): void;\n\n    onMessageLoadStart?(currentMessage: TMessage): void;\n\n    onMessageLoadEnd?(currentMessage: TMessage): void;\n\n    onMessageReadyForDisplay?(currentMessage: TMessage): void;\n\n    onMessageLoadError?(e: Error, currentMessage: TMessage): void;\n}\n\nclass MessageText<TMessage extends IMessage> extends React.Component<MessageTextProps<TMessage> & WithBunnyKit & ActionSheetProps> {\n\n    static defaultProps = {\n        position: 'left' as PositionLeftOrRight,\n        phoneNumberOptionTitles: DEFAULT_OPTION_TITLES,\n        currentMessage: undefined,\n        textContainerStyle: {},\n        textStyle: {},\n        linkStyle: {},\n        customTextStyle: {},\n        textProps: {},\n        parsePatterns: () => [],\n        onMessageLoad: undefined,\n        onMessageLoadStart: undefined,\n        onMessageLoadEnd: undefined,\n        onMessageReadyForDisplay: undefined,\n        onMessageLoadError: undefined,\n        isDebug: false,\n    };\n\n    // TODO is this necessary\n    // shouldComponentUpdate(nextProps: MessageTextProps<TMessage>) {\n    //     return (\n    //         !!this.props.currentMessage &&\n    //         !!nextProps.currentMessage &&\n    //         this.props.currentMessage.text !== nextProps.currentMessage.text\n    //     )\n    // }\n\n    onUrlPress = (url: string) => {\n        // When someone sends a message that includes a website address beginning with \"www.\" (omitting the scheme),\n        // react-native-parsed-text recognizes it as a valid url, but Linking fails to open due to the missing scheme.\n        if (WWW_URL_PATTERN.test(url)) {\n            this.onUrlPress(`http://${url}`);\n        } else {\n            Linking.canOpenURL(url).then(supported => {\n                if (!supported) {\n                    console.error('No handler for URL:', url);\n                } else {\n                    Linking.openURL(url);\n                }\n            });\n        }\n    };\n\n    onPhonePress = (phone: string) => {\n        const {phoneNumberOptionTitles} = this.props;\n        // TODO confusing\n        const options =\n            phoneNumberOptionTitles && phoneNumberOptionTitles.length > 0\n                ? phoneNumberOptionTitles.slice(0, 3)\n                : DEFAULT_OPTION_TITLES;\n        const cancelButtonIndex = options.length - 1;\n        this.props.showActionSheetWithOptions(\n            {\n                options,\n                cancelButtonIndex,\n            },\n            (buttonIndex: number) => {\n                switch (buttonIndex) {\n                    case 0:\n                        Communications.phonecall(phone, true);\n                        break;\n                    case 1:\n                        Communications.text(phone);\n                        break;\n                    default:\n                        break;\n                }\n            },\n        );\n    };\n\n    onEmailPress = (email: string) =>\n        Communications.email([email], null, null, null, null);\n\n    render() {\n        const {bunnyKit: {sizeLabor, themeLabor}} = this.props;\n        const styles = makeStyles(sizeLabor, themeLabor);\n        const linkStyle = [\n            styles[this.props.position].link,\n            this.props.linkStyle && this.props.linkStyle[this.props.position],\n        ];\n        const {currentMessage, isDebug} = this.props;\n        isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', '[level4]MessageText props', this.props);\n        return (\n            <View\n                style={[\n                    styles[this.props.position].container,\n                    this.props.textContainerStyle &&\n                    this.props.textContainerStyle[this.props.position],\n                ]}\n            >{\n                currentMessage ?\n                    currentMessage.text\n                        ? <ParsedText\n                            style={[\n                                styles[this.props.position].text,\n                                this.props.textStyle && this.props.textStyle[this.props.position],\n                                this.props.customTextStyle,\n                            ]}\n                            parse={[\n                                ...this.props.parsePatterns!(linkStyle as TextStyle),\n                                {type: 'url', style: linkStyle, onPress: this.onUrlPress},\n                                {type: 'phone', style: linkStyle, onPress: this.onPhonePress},\n                                {type: 'email', style: linkStyle, onPress: this.onEmailPress},\n                            ]}\n                            childrenProps={{...this.props.textProps}}\n\n                            onLayout={() => {\n                                isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageText onLayout');\n                                this.props.onMessageLoad?.(currentMessage);\n                                this.props.onMessageLoadStart?.(currentMessage);\n                                this.props.onMessageLoadEnd?.(currentMessage);\n                                isDebug && console.log('%c[ chat ]', 'background: #555; color: #bada55', 'MessageText onMessageReadyForDisplay');\n                                this.props.onMessageReadyForDisplay?.(currentMessage);\n                            }}\n                        >\n                            {this.props.currentMessage!.text}\n                        </ParsedText>\n                        : <Text>{'currentMessage.text is undefined'}</Text>\n                    : <Text>{'currentMessage is undefined'}</Text>\n            }\n\n            </View>\n        );\n    }\n}\n\nexport default withBunnyKit(connectActionSheet(MessageText));\n"]},"metadata":{},"sourceType":"module"}