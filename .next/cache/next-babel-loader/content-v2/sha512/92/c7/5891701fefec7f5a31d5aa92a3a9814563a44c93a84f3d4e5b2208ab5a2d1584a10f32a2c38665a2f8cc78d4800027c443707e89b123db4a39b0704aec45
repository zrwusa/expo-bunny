{"ast":null,"code":"import _ from'lodash';import{AuthAPIError,BunnyAPIError,NomicsAPIError}from\"../utils\";import{collectSysError}from\"../store/actions/sys\";import{EBizLogicMsg}from\"../constants\";import store from\"../store/store\";var dispatch=store.dispatch;export var checkCommonAPIProtocol=function checkCommonAPIProtocol(data,PErrorClass){var dataKeys;try{dataKeys=Object.keys(data);}catch(err){throw new PErrorClass(err.message,err.stack);}var isDataKeysEqual=_.isEqual(dataKeys.sort(),['time_spent','data','http_extra','business_logic','server_error'].sort());if(!isDataKeysEqual){return false;}var business_logic=data.business_logic,http_extra=data.http_extra,server_error=data.server_error;var blKeys=Object.keys(business_logic);var isBLKeysEqual=_.isEqual(blKeys.sort(),['code','message','description','error_code','error_message','error_description','error_stack'].sort());if(!isBLKeysEqual){dispatch(collectSysError(new PErrorClass(EBizLogicMsg.NOT_CONFORM_TO_API_RESPONSE_BL_STRUCTURE)));return false;}var httpExtraKeys=Object.keys(http_extra);var isHttpExtraKeysEqual=_.isEqual(httpExtraKeys.sort(),['code','message','description'].sort());if(!isHttpExtraKeysEqual){dispatch(collectSysError(new PErrorClass(EBizLogicMsg.NOT_CONFORM_TO_API_RESPONSE_EXTRA_STRUCTURE)));return false;}var serverErrorKeys=Object.keys(server_error);var isServerErrorKeysEqual=_.isEqual(serverErrorKeys.sort(),['code','message','stack'].sort());if(!isServerErrorKeysEqual){dispatch(collectSysError(new PErrorClass(EBizLogicMsg.NOT_CONFORM_TO_API_RESPONSE_SERVER_STRUCTURE)));return false;}return true;};export var checkAuthAPIProtocol=function checkAuthAPIProtocol(data){return checkCommonAPIProtocol(data,AuthAPIError);};export var checkBunnyAPIProtocol=function checkBunnyAPIProtocol(data){return checkCommonAPIProtocol(data,BunnyAPIError);};export var checkNomicsAPIProtocol=function checkNomicsAPIProtocol(data){return checkCommonAPIProtocol(data,NomicsAPIError);};","map":null,"metadata":{},"sourceType":"module"}