{"ast":null,"code":"\"use strict\";var _interopRequireDefault2=require(\"@babel/runtime/helpers/interopRequireDefault\");var _defineProperty2=_interopRequireDefault2(require(\"@babel/runtime/helpers/defineProperty\"));var _classCallCheck2=_interopRequireDefault2(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault2(require(\"@babel/runtime/helpers/createClass\"));var _extends2=_interopRequireDefault2(require(\"@babel/runtime/helpers/extends\"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createForOfIteratorHelperLoose(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}it=o[Symbol.iterator]();return it.next.bind(it);}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}exports.__esModule=true;exports.default=void 0;var _react=_interopRequireDefault(require(\"react\"));var _useSubscription=require(\"use-subscription\");var _loadableContext=require(\"./loadable-context\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var ALL_INITIALIZERS=[];var READY_INITIALIZERS=[];var initialized=false;function load(loader){var promise=loader();var state={loading:true,loaded:null,error:null};state.promise=promise.then(function(loaded){state.loading=false;state.loaded=loaded;return loaded;}).catch(function(err){state.loading=false;state.error=err;throw err;});return state;}function loadMap(obj){var state={loading:false,loaded:{},error:null};var promises=[];try{Object.keys(obj).forEach(function(key){var result=load(obj[key]);if(!result.loading){state.loaded[key]=result.loaded;state.error=result.error;}else{state.loading=true;}promises.push(result.promise);result.promise.then(function(res){state.loaded[key]=res;}).catch(function(err){state.error=err;});});}catch(err){state.error=err;}state.promise=Promise.all(promises).then(function(res){state.loading=false;return res;}).catch(function(err){state.loading=false;throw err;});return state;}function resolve(obj){return obj&&obj.__esModule?obj.default:obj;}function render(loaded,props){return _react.default.createElement(resolve(loaded),props);}function createLoadableComponent(loadFn,options){var opts=(0,_extends2.default)({loader:null,loading:null,delay:200,timeout:null,render:render,webpack:null,modules:null},options);var subscription=null;function init(){if(!subscription){var sub=new LoadableSubscription(loadFn,opts);subscription={getCurrentValue:sub.getCurrentValue.bind(sub),subscribe:sub.subscribe.bind(sub),retry:sub.retry.bind(sub),promise:sub.promise.bind(sub)};}return subscription.promise();}if(false){ALL_INITIALIZERS.push(init);}if(!initialized&&true&&typeof opts.webpack==='function'){var moduleIds=opts.webpack();READY_INITIALIZERS.push(function(ids){for(var _iterator=_createForOfIteratorHelperLoose(moduleIds),_step;!(_step=_iterator()).done;){var moduleId=_step.value;if(ids.indexOf(moduleId)!==-1){return init();}}});}var LoadableComponent=function LoadableComponent(props,ref){init();var context=_react.default.useContext(_loadableContext.LoadableContext);var state=(0,_useSubscription.useSubscription)(subscription);_react.default.useImperativeHandle(ref,function(){return{retry:subscription.retry};},[]);if(context&&Array.isArray(opts.modules)){opts.modules.forEach(function(moduleName){context(moduleName);});}return _react.default.useMemo(function(){if(state.loading||state.error){return _react.default.createElement(opts.loading,{isLoading:state.loading,pastDelay:state.pastDelay,timedOut:state.timedOut,error:state.error,retry:subscription.retry});}else if(state.loaded){return opts.render(state.loaded,props);}else{return null;}},[props,state]);};LoadableComponent.preload=function(){return init();};LoadableComponent.displayName='LoadableComponent';return _react.default.forwardRef(LoadableComponent);}var LoadableSubscription=function(){function LoadableSubscription(loadFn,opts){(0,_classCallCheck2.default)(this,LoadableSubscription);this._loadFn=loadFn;this._opts=opts;this._callbacks=new Set();this._delay=null;this._timeout=null;this.retry();}(0,_createClass2.default)(LoadableSubscription,[{key:\"promise\",value:function promise(){return this._res.promise;}},{key:\"retry\",value:function retry(){var _this=this;this._clearTimeouts();this._res=this._loadFn(this._opts.loader);this._state={pastDelay:false,timedOut:false};var res=this._res,opts=this._opts;if(res.loading){if(typeof opts.delay==='number'){if(opts.delay===0){this._state.pastDelay=true;}else{this._delay=setTimeout(function(){_this._update({pastDelay:true});},opts.delay);}}if(typeof opts.timeout==='number'){this._timeout=setTimeout(function(){_this._update({timedOut:true});},opts.timeout);}}this._res.promise.then(function(){_this._update({});_this._clearTimeouts();}).catch(function(_err){_this._update({});_this._clearTimeouts();});this._update({});}},{key:\"_update\",value:function _update(partial){this._state=_objectSpread(_objectSpread({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},partial);this._callbacks.forEach(function(callback){return callback();});}},{key:\"_clearTimeouts\",value:function _clearTimeouts(){clearTimeout(this._delay);clearTimeout(this._timeout);}},{key:\"getCurrentValue\",value:function getCurrentValue(){return this._state;}},{key:\"subscribe\",value:function subscribe(callback){var _this2=this;this._callbacks.add(callback);return function(){_this2._callbacks.delete(callback);};}}]);return LoadableSubscription;}();function Loadable(opts){return createLoadableComponent(load,opts);}function LoadableMap(opts){if(typeof opts.render!=='function'){throw new Error('LoadableMap requires a `render(loaded, props)` function');}return createLoadableComponent(loadMap,opts);}Loadable.Map=LoadableMap;function flushInitializers(initializers,ids){var promises=[];while(initializers.length){var init=initializers.pop();promises.push(init(ids));}return Promise.all(promises).then(function(){if(initializers.length){return flushInitializers(initializers,ids);}});}Loadable.preloadAll=function(){return new Promise(function(resolveInitializers,reject){flushInitializers(ALL_INITIALIZERS).then(resolveInitializers,reject);});};Loadable.preloadReady=function(){var ids=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return new Promise(function(resolvePreload){var res=function res(){initialized=true;return resolvePreload();};flushInitializers(READY_INITIALIZERS,ids).then(res,res);});};if(true){window.__NEXT_PRELOADREADY=Loadable.preloadReady;}var _default=Loadable;exports.default=_default;","map":null,"metadata":{},"sourceType":"script"}