{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{warning}from\"./utils\";import{withBunnyKit}from\"../../hooks/bunny-kit\";var makeStyles=function makeStyles(sizeLabor,themeLabor){var wp=sizeLabor.designsBasedOn.iphoneX.wp;var colors=themeLabor.theme.colors;return StyleSheet.create({container:{flexDirection:'row',flexWrap:'wrap',maxWidth:wp(300)},quickReply:{justifyContent:'center',alignItems:'center',borderWidth:wp(1),maxWidth:wp(200),paddingVertical:wp(7),paddingHorizontal:wp(12),minHeight:wp(50),borderRadius:wp(13),margin:wp(3)},quickReplyText:{overflow:'visible'},sendLink:{borderWidth:0},sendLinkText:{color:colors.accent,fontWeight:'600',fontSize:wp(17)}});};var sameReply=function sameReply(currentReply){return function(reply){return currentReply.value===reply.value;};};var diffReply=function diffReply(currentReply){return function(reply){return currentReply.value!==reply.value;};};var QuickReplies=function(_Component){_inherits(QuickReplies,_Component);var _super=_createSuper(QuickReplies);function QuickReplies(){var _this;_classCallCheck(this,QuickReplies);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={replies:[]};_this.handlePress=function(reply){return function(){var currentMessage=_this.props.currentMessage;var replies=_this.state.replies;if(currentMessage){var _ref=currentMessage.quickReplies,type=_ref.type;switch(type){case'radio':{_this.handleSend([reply])();return;}case'checkbox':{if(replies.find(sameReply(reply))){_this.setState({replies:_this.state.replies.filter(diffReply(reply))});}else{_this.setState({replies:[].concat(_toConsumableArray(_this.state.replies),[reply])});}return;}default:{warning(\"onQuickReply unknown type: \"+type);return;}}}};};_this.handleSend=function(replies){return function(){var currentMessage=_this.props.currentMessage;if(_this.props.onQuickReply){_this.props.onQuickReply(replies.map(function(reply){return _objectSpread(_objectSpread({},reply),{},{messageId:currentMessage._id});}));}};};_this.shouldComponentDisplay=function(){var _this$props=_this.props,currentMessage=_this$props.currentMessage,nextMessage=_this$props.nextMessage;var hasReplies=!!currentMessage&&!!currentMessage.quickReplies;var hasNext=!!nextMessage&&!!nextMessage._id;var keepIt=currentMessage.quickReplies.keepIt;if(hasReplies&&!hasNext){return true;}if(hasReplies&&hasNext&&keepIt){return true;}return false;};_this.renderQuickReplySend=function(){var replies=_this.state.replies;var _this$props2=_this.props,sendText=_this$props2.sendText,customSend=_this$props2.renderQuickReplySend;var _this$props$bunnyKit=_this.props.bunnyKit,sizeLabor=_this$props$bunnyKit.sizeLabor,themeLabor=_this$props$bunnyKit.themeLabor;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(TouchableOpacity,{style:[styles.quickReply,styles.sendLink],onPress:_this.handleSend(replies)},customSend?customSend():React.createElement(Text,{style:styles.sendLinkText},sendText));};return _this;}_createClass(QuickReplies,[{key:\"render\",value:function render(){var _this2=this;var _this$props3=this.props,currentMessage=_this$props3.currentMessage,quickRepliesColor=_this$props3.quickRepliesColor,quickReplyStyle=_this$props3.quickReplyStyle;var replies=this.state.replies;if(!this.shouldComponentDisplay()){return null;}var _ref2=currentMessage.quickReplies,type=_ref2.type;var _this$props$bunnyKit2=this.props.bunnyKit,sizeLabor=_this$props$bunnyKit2.sizeLabor,themeLabor=_this$props$bunnyKit2.themeLabor,colors=_this$props$bunnyKit2.colors;var styles=makeStyles(sizeLabor,themeLabor);return React.createElement(View,{style:styles.container},currentMessage.quickReplies.values.map(function(reply,index){var selected=type==='checkbox'&&replies.find(sameReply(reply));return React.createElement(TouchableOpacity,{onPress:_this2.handlePress(reply),style:[styles.quickReply,quickReplyStyle,{borderColor:quickRepliesColor},selected&&{backgroundColor:quickRepliesColor}],key:reply.value+\"-\"+index},React.createElement(Text,{numberOfLines:10,ellipsizeMode:'tail',style:[styles.quickReplyText,{color:selected?colors.text:quickRepliesColor}]},reply.title));}),replies.length>0&&this.renderQuickReplySend());}}]);return QuickReplies;}(Component);QuickReplies.defaultProps={currentMessage:undefined,nextMessage:undefined,onQuickReply:function onQuickReply(){},quickRepliesColor:'#3498db',sendText:'Send',keepReplies:false,renderQuickReplySend:undefined,quickReplyStyle:undefined};export default withBunnyKit(QuickReplies);","map":null,"metadata":{},"sourceType":"module"}