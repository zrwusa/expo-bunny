{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useEffect,useState}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import View from\"react-native-web/dist/exports/View\";import{PanGestureHandler,State}from'react-native-gesture-handler';import{useBunnyKit}from\"../../../src/hooks/bunny-kit\";var osRtl=I18nManager.isRTL;var SMALL_SIZE=24;var MEDIUM_SIZE=34;var LARGE_SIZE=44;export var Slider=function Slider(props){var _useBunnyKit=useBunnyKit(),colors=_useBunnyKit.colors;var min=props.min,max=props.max,valueOnChange=props.valueOnChange,_props$step=props.step,step=_props$step===void 0?1:_props$step,_props$styleSize=props.styleSize,styleSize=_props$styleSize===void 0?'medium':_props$styleSize,_props$knobColor=props.knobColor,knobColor=_props$knobColor===void 0?colors.primary:_props$knobColor,_props$inRangeBarColo=props.inRangeBarColor,inRangeBarColor=_props$inRangeBarColo===void 0?colors.primary:_props$inRangeBarColo,_props$outOfRangeBarC=props.outOfRangeBarColor,outOfRangeBarColor=_props$outOfRangeBarC===void 0?colors.divider:_props$outOfRangeBarC,_props$valueLabelsTex=props.valueLabelsTextColor,valueLabelsTextColor=_props$valueLabelsTex===void 0?colors.text2:_props$valueLabelsTex,_props$valueLabelsBac=props.valueLabelsBackgroundColor,valueLabelsBackgroundColor=_props$valueLabelsBac===void 0?'#3a4766':_props$valueLabelsBac,_props$rangeLabelsTex=props.rangeLabelsTextColor,rangeLabelsTextColor=_props$rangeLabelsTex===void 0?'rgb(60,60,60)':_props$rangeLabelsTex,_props$showRangeLabel=props.showRangeLabels,showRangeLabels=_props$showRangeLabel===void 0?true:_props$showRangeLabel,_props$showValueLabel=props.showValueLabels,showValueLabels=_props$showValueLabel===void 0?true:_props$showValueLabel,initialValue=props.initialValue,_props$valueLabelsPos=props.valueLabelsPosition,valueLabelsPosition=_props$valueLabelsPos===void 0?'down':_props$valueLabelsPos,_props$showBubbles=props.showBubbles,showBubbles=_props$showBubbles===void 0?false:_props$showBubbles,_props$showValueLabel2=props.showValueLabelsOnlyWhenDrag,showValueLabelsOnlyWhenDrag=_props$showValueLabel2===void 0?false:_props$showValueLabel2,_props$valueLabelsUni=props.valueLabelsUnit,valueLabelsUnit=_props$valueLabelsUni===void 0?'':_props$valueLabelsUni,_props$invert=props.invert,invert=_props$invert===void 0?false:_props$invert,valueOnIndicated=props.valueOnIndicated;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),stepInPixels=_useState2[0],setStepInPixels=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),knobSize=_useState4[0],setKnobSize=_useState4[1];var _useState5=useState(15),_useState6=_slicedToArray(_useState5,1),fontSize=_useState6[0];var _useState7=useState('row'),_useState8=_slicedToArray(_useState7,2),flexDirection=_useState8[0],setFlexDirection=_useState8[1];var _useState9=useState({left:(knobSize-40)/2}),_useState10=_slicedToArray(_useState9,2),svgOffset=_useState10[0],setSvgOffset=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),valueOffset=_useState12[0],setValueOffset=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),sliderWidth=_useState14[0],setSliderWidth=_useState14[1];var _useState15=useState(new Animated.Value(0)),_useState16=_slicedToArray(_useState15,1),translateX=_useState16[0];var _useState17=useState(new Animated.Value(showValueLabelsOnlyWhenDrag?0.01:1)),_useState18=_slicedToArray(_useState17,1),valueLabelScale=_useState18[0];var _useState19=useState(new Animated.Value(0.01)),_useState20=_slicedToArray(_useState19,1),inRangeScaleX=_useState20[0];var valueTextRef=React.createRef();var opacity=React.useRef(new Animated.Value(0)).current;useEffect(function(){setFlexDirection(osRtl?'row-reverse':'row');setSvgOffset(osRtl?{right:(knobSize-40)/2}:{left:(knobSize-40)/2});},[knobSize]);useEffect(function(){if(sliderWidth>0){var _valueTextRef$current;var stepSize=setStepSize(max,min,step);(_valueTextRef$current=valueTextRef.current)==null?void 0:_valueTextRef$current.setNativeProps({text:min.toString()+valueLabelsUnit});if(typeof initialValue==='number'&&initialValue>=min&&initialValue<=max){var offset=(initialValue-min)/step*stepSize-knobSize/2;setValueStatic(offset,knobSize,stepSize);setValueText(offset);}Animated.timing(opacity,{toValue:1,duration:64,useNativeDriver:true}).start();}},[min,max,step,initialValue,sliderWidth]);useEffect(function(){var size=typeof styleSize==='number'?styleSize:styleSize==='small'?SMALL_SIZE:styleSize==='medium'?MEDIUM_SIZE:LARGE_SIZE;setKnobSize(size);translateX.setValue(-size/4);},[styleSize]);var setValueStatic=function setValueStatic(newOffset,knobSize,stepInPixels){newOffset=Math.round((newOffset+knobSize/2)/stepInPixels)*stepInPixels-knobSize/2;settingValue(newOffset);setValueOffset(newOffset);valueOnChange(Math.round((newOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min);};var settingValue=function settingValue(newOffset){translateX.setValue(newOffset);inRangeScaleX.setValue((newOffset+knobSize/2)/sliderWidth+0.01);};var setValueText=function setValueText(totalOffset){var _valueTextRef$current2;var numericValue=Math.floor((totalOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min;(_valueTextRef$current2=valueTextRef.current)==null?void 0:_valueTextRef$current2.setNativeProps({text:numericValue.toString()+valueLabelsUnit});};var setStepSize=function setStepSize(max,min,step){var numberOfSteps=(max-min)/step;var stepSize=sliderWidth/numberOfSteps;setStepInPixels(stepSize);return stepSize;};var onGestureEvent=function onGestureEvent(event){var totalOffset=event.nativeEvent.translationX+valueOffset;if(totalOffset>=-knobSize/2&&totalOffset<=sliderWidth-knobSize/2){translateX.setValue(totalOffset);if(valueTextRef!=null){var _valueTextRef$current3;var _value=Math.round((totalOffset+knobSize/2)*(max-min)/sliderWidth/step)*step+min;(_valueTextRef$current3=valueTextRef.current)==null?void 0:_valueTextRef$current3.setNativeProps({text:_value.toString()+valueLabelsUnit});valueOnIndicated==null?void 0:valueOnIndicated(_value);}inRangeScaleX.setValue((totalOffset+knobSize/2)/sliderWidth+0.01);}};var onHandlerStateChange=function onHandlerStateChange(event){if(event.nativeEvent.state===State.BEGAN){if(showValueLabelsOnlyWhenDrag)scaleTo(valueLabelScale,1);}if(event.nativeEvent.state===State.END){var newOffset=event.nativeEvent.translationX+valueOffset;newOffset=Math.round((newOffset+knobSize/2)/stepInPixels)*stepInPixels-knobSize/2;if(newOffset<-knobSize/2){newOffset=-knobSize/2;}else if(newOffset>=sliderWidth-knobSize/2){newOffset=sliderWidth-knobSize/2;}setValueStatic(newOffset,knobSize,stepInPixels);if(showValueLabelsOnlyWhenDrag)scaleTo(valueLabelScale,0.01);}};var scaleTo=function scaleTo(param,toValue){return Animated.timing(param,{toValue:toValue,duration:150,useNativeDriver:true}).start();};var onLayout=function onLayout(event){setSliderWidth(event.nativeEvent.layout.width);};var bubbleSizeMap={'small':{width:20,height:28},'medium':{width:40,height:56},'large':{width:50,height:70}};var bubbleSize=typeof styleSize==='number'?{width:styleSize,height:styleSize}:bubbleSizeMap[styleSize];var bubbleBottomValue=typeof styleSize==='number'?styleSize:bubbleSizeMap[styleSize].height;var bubbleBottom=valueLabelsPosition==='up'?0:-bubbleBottomValue;var styles=getStyles(knobSize);var renderValueLabels=function renderValueLabels(){return showValueLabels&&React.createElement(View,{style:{width:'100%',height:1,flexDirection:flexDirection}},React.createElement(Animated.View,{style:{position:'absolute',bottom:0,left:0,transform:[{translateX:translateX},{scale:valueLabelScale}]}},showBubbles?React.createElement(View,{style:[svgOffset,_objectSpread(_objectSpread({},bubbleSize),{},{justifyContent:'center',alignItems:'center',position:'absolute',bottom:bubbleBottom,backgroundColor:'red'})]}):null,React.createElement(TextInput,{style:_objectSpread(_objectSpread({position:'absolute',width:40,textAlign:'center'},svgOffset),{},{color:valueLabelsTextColor,bottom:valueLabelsPosition==='up'?18:-18}),ref:valueTextRef})));};var paddingSizeMap={'small':21,'medium':14,'large':7};return React.createElement(Animated.View,{style:[styles.container,{opacity:opacity,paddingHorizontal:typeof styleSize==='number'?styleSize/2:paddingSizeMap[styleSize]}]},valueLabelsPosition==='up'?renderValueLabels():null,React.createElement(View,{style:{width:'100%',height:knobSize,marginVertical:4,position:'relative',flexDirection:flexDirection,alignItems:'center'}},React.createElement(View,{style:[styles.bar,{backgroundColor:invert?inRangeBarColor:outOfRangeBarColor}],onLayout:onLayout}),React.createElement(Animated.View,{style:{width:sliderWidth,height:knobSize/3,backgroundColor:invert?outOfRangeBarColor:inRangeBarColor,transform:[{translateX:-sliderWidth/2},{scaleX:inRangeScaleX},{translateX:sliderWidth/2}]}}),React.createElement(Animated.View,{style:[styles.outOfRangeBar,{backgroundColor:invert?outOfRangeBarColor:inRangeBarColor}]}),React.createElement(PanGestureHandler,{onGestureEvent:onGestureEvent,onHandlerStateChange:onHandlerStateChange},React.createElement(Animated.View,{style:[styles.knob1,{backgroundColor:knobColor,transform:[{translateX:translateX}]}]},React.createElement(Text,{style:styles.knobInnerDivider},\"| | |\")))),valueLabelsPosition==='down'?renderValueLabels():null,showRangeLabels&&React.createElement(View,{style:{width:'100%',flexDirection:flexDirection,justifyContent:'space-between'}},React.createElement(Text,{style:{color:rangeLabelsTextColor,fontWeight:'bold',fontSize:fontSize,marginLeft:-7}},min),React.createElement(Text,{style:{color:rangeLabelsTextColor,fontWeight:'bold',fontSize:fontSize}},max)));};var getStyles=function getStyles(knobSize){return StyleSheet.create({container:{width:'100%'},knob:{position:'absolute',elevation:4},knob1:{height:knobSize,width:2*knobSize,left:-(0.5*knobSize),borderRadius:0.5*knobSize,position:'absolute',flexDirection:'row',justifyContent:'center',alignItems:'center',elevation:4},knobInnerDivider:{marginHorizontal:3*knobSize/40,fontSize:18*knobSize/40,lineHeight:18*knobSize/40,color:'white'},bar:{position:'absolute',borderBottomRightRadius:100,borderTopRightRadius:100,left:knobSize/4,marginLeft:-knobSize/4,right:knobSize/4,height:knobSize/3},outOfRangeBar:{position:'absolute',left:-knobSize/4,width:knobSize/2.5,height:knobSize/3,borderRadius:knobSize/3}});};","map":null,"metadata":{},"sourceType":"module"}